/*! For license information please see bundle.js.LICENSE.txt */
(()=>{"use strict";var e={243:t=>{function e(){return n(null,[].slice.call(arguments,0))}function n(t,e){for(var n,s,r,o,a,c=e.length,l=e[0],h={},u=t&&t.equal||i,d=1;d<c;d++)for(n=e[d],r=(s=Object.keys(n)).length,a=0;a<r;a++)u(n[o=s[a]],l[o])||(h[o]=n[o]);return h}function i(t,e){return t===e}e.custom=function(t){return n(t,[].slice.call(arguments,1))},t.exports=e}},n={};function i(t){var s=n[t];if(void 0!==s)return s.exports;var r=n[t]={exports:{}};return e[t](r,r.exports,i),r.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var e={};i.r(e),i.d(e,{BaseLink:()=>uo,BezierLink:()=>ko,Capsule:()=>no,CapsuleGroup:()=>ka,CapsuleVertical:()=>io,CapsuleVerticalGroup:()=>Ea,Diamond:()=>ro,DiamondGroup:()=>Ca,DiamondVerticalGroup:()=>La,Group:()=>Sa,GroupFactory:()=>Qr,Icon:()=>_o,Instance:()=>Mr,JFLOW_MODE:()=>gr,JFlowEvent:()=>Jr,LinearLayout:()=>Co,Link:()=>yo,Node:()=>Ir,Point:()=>to,PointGroup:()=>Ta,PolyLink:()=>xo,Rectangle:()=>eo,Rhombus:()=>so,RhombusGroup:()=>Ba,ScrollGroup:()=>lo,ShadowDom:()=>vo,Text:()=>mo,TextElement:()=>ta,TextGroup:()=>xa,commonEventAdapter:()=>ho,default:()=>Ra});var n=Object.freeze({});function s(t){return null==t}function r(t){return null!=t}function o(t){return!0===t}function a(t){return"string"==typeof t||"number"==typeof t||"symbol"==typeof t||"boolean"==typeof t}function c(t){return null!==t&&"object"==typeof t}var l=Object.prototype.toString;function h(t){return"[object Object]"===l.call(t)}function u(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function d(t){return r(t)&&"function"==typeof t.then&&"function"==typeof t.catch}function f(t){return null==t?"":Array.isArray(t)||h(t)&&t.toString===l?JSON.stringify(t,null,2):String(t)}function p(t){var e=parseFloat(t);return isNaN(e)?t:e}function g(t,e){for(var n=Object.create(null),i=t.split(","),s=0;s<i.length;s++)n[i[s]]=!0;return e?function(t){return n[t.toLowerCase()]}:function(t){return n[t]}}g("slot,component",!0);var m=g("key,ref,slot,slot-scope,is");function _(t,e){if(t.length){var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}var v=Object.prototype.hasOwnProperty;function y(t,e){return v.call(t,e)}function w(t){var e=Object.create(null);return function(n){return e[n]||(e[n]=t(n))}}var b=/-(\w)/g,x=w((function(t){return t.replace(b,(function(t,e){return e?e.toUpperCase():""}))})),S=w((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})),k=/\B([A-Z])/g,B=w((function(t){return t.replace(k,"-$1").toLowerCase()})),C=Function.prototype.bind?function(t,e){return t.bind(e)}:function(t,e){function n(n){var i=arguments.length;return i?i>1?t.apply(e,arguments):t.call(e,n):t.call(e)}return n._length=t.length,n};function L(t,e){e=e||0;for(var n=t.length-e,i=new Array(n);n--;)i[n]=t[n+e];return i}function E(t,e){for(var n in e)t[n]=e[n];return t}function T(t){for(var e={},n=0;n<t.length;n++)t[n]&&E(e,t[n]);return e}function P(t,e,n){}var R=function(t,e,n){return!1},O=function(t){return t};function A(t,e){if(t===e)return!0;var n=c(t),i=c(e);if(!n||!i)return!n&&!i&&String(t)===String(e);try{var s=Array.isArray(t),r=Array.isArray(e);if(s&&r)return t.length===e.length&&t.every((function(t,n){return A(t,e[n])}));if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(s||r)return!1;var o=Object.keys(t),a=Object.keys(e);return o.length===a.length&&o.every((function(n){return A(t[n],e[n])}))}catch(t){return!1}}function M(t,e){for(var n=0;n<t.length;n++)if(A(t[n],e))return n;return-1}function I(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}var j="data-server-rendered",D=["component","directive","filter"],V=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],$={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:R,isReservedAttr:R,isUnknownElement:R,getTagNamespace:P,parsePlatformTagName:O,mustUseProp:R,async:!0,_lifecycleHooks:V};function N(t,e,n,i){Object.defineProperty(t,e,{value:n,enumerable:!!i,writable:!0,configurable:!0})}var F,z=new RegExp("[^"+/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/.source+".$_\\d]"),W="__proto__"in{},H="undefined"!=typeof window,U="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,X=U&&WXEnvironment.platform.toLowerCase(),Y=H&&window.navigator.userAgent.toLowerCase(),G=Y&&/msie|trident/.test(Y),q=Y&&Y.indexOf("msie 9.0")>0,J=Y&&Y.indexOf("edge/")>0,K=(Y&&Y.indexOf("android"),Y&&/iphone|ipad|ipod|ios/.test(Y)||"ios"===X),Z=(Y&&/chrome\/\d+/.test(Y),Y&&/phantomjs/.test(Y),Y&&Y.match(/firefox\/(\d+)/)),Q={}.watch,tt=!1;if(H)try{var et={};Object.defineProperty(et,"passive",{get:function(){tt=!0}}),window.addEventListener("test-passive",null,et)}catch(t){}var nt=function(){return void 0===F&&(F=!H&&!U&&void 0!==i.g&&i.g.process&&"server"===i.g.process.env.VUE_ENV),F},it=H&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function st(t){return"function"==typeof t&&/native code/.test(t.toString())}var rt,ot="undefined"!=typeof Symbol&&st(Symbol)&&"undefined"!=typeof Reflect&&st(Reflect.ownKeys);rt="undefined"!=typeof Set&&st(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var at=P,ct=0,lt=function(){this.id=ct++,this.subs=[]};lt.prototype.addSub=function(t){this.subs.push(t)},lt.prototype.removeSub=function(t){_(this.subs,t)},lt.prototype.depend=function(){lt.target&&lt.target.addDep(this)},lt.prototype.notify=function(){for(var t=this.subs.slice(),e=0,n=t.length;e<n;e++)t[e].update()},lt.target=null;var ht=[];function ut(t){ht.push(t),lt.target=t}function dt(){ht.pop(),lt.target=ht[ht.length-1]}var ft=function(t,e,n,i,s,r,o,a){this.tag=t,this.data=e,this.children=n,this.text=i,this.elm=s,this.ns=void 0,this.context=r,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=o,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=a,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},pt={child:{configurable:!0}};pt.child.get=function(){return this.componentInstance},Object.defineProperties(ft.prototype,pt);var gt=function(t){void 0===t&&(t="");var e=new ft;return e.text=t,e.isComment=!0,e};function mt(t){return new ft(void 0,void 0,void 0,String(t))}function _t(t){var e=new ft(t.tag,t.data,t.children&&t.children.slice(),t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.asyncMeta=t.asyncMeta,e.isCloned=!0,e}var vt=Array.prototype,yt=Object.create(vt);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(t){var e=vt[t];N(yt,t,(function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];var s,r=e.apply(this,n),o=this.__ob__;switch(t){case"push":case"unshift":s=n;break;case"splice":s=n.slice(2)}return s&&o.observeArray(s),o.dep.notify(),r}))}));var wt=Object.getOwnPropertyNames(yt),bt=!0;function xt(t){bt=t}var St=function(t){this.value=t,this.dep=new lt,this.vmCount=0,N(t,"__ob__",this),Array.isArray(t)?(W?function(t,e){t.__proto__=e}(t,yt):function(t,e,n){for(var i=0,s=n.length;i<s;i++){var r=n[i];N(t,r,e[r])}}(t,yt,wt),this.observeArray(t)):this.walk(t)};function kt(t,e){var n;if(c(t)&&!(t instanceof ft))return y(t,"__ob__")&&t.__ob__ instanceof St?n=t.__ob__:bt&&!nt()&&(Array.isArray(t)||h(t))&&Object.isExtensible(t)&&!t._isVue&&(n=new St(t)),e&&n&&n.vmCount++,n}function Bt(t,e,n,i,s){var r=new lt,o=Object.getOwnPropertyDescriptor(t,e);if(!o||!1!==o.configurable){var a=o&&o.get,c=o&&o.set;a&&!c||2!==arguments.length||(n=t[e]);var l=!s&&kt(n);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=a?a.call(t):n;return lt.target&&(r.depend(),l&&(l.dep.depend(),Array.isArray(e)&&Et(e))),e},set:function(e){var i=a?a.call(t):n;e===i||e!=e&&i!=i||a&&!c||(c?c.call(t,e):n=e,l=!s&&kt(e),r.notify())}})}}function Ct(t,e,n){if(Array.isArray(t)&&u(e))return t.length=Math.max(t.length,e),t.splice(e,1,n),n;if(e in t&&!(e in Object.prototype))return t[e]=n,n;var i=t.__ob__;return t._isVue||i&&i.vmCount?n:i?(Bt(i.value,e,n),i.dep.notify(),n):(t[e]=n,n)}function Lt(t,e){if(Array.isArray(t)&&u(e))t.splice(e,1);else{var n=t.__ob__;t._isVue||n&&n.vmCount||y(t,e)&&(delete t[e],n&&n.dep.notify())}}function Et(t){for(var e=void 0,n=0,i=t.length;n<i;n++)(e=t[n])&&e.__ob__&&e.__ob__.dep.depend(),Array.isArray(e)&&Et(e)}St.prototype.walk=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)Bt(t,e[n])},St.prototype.observeArray=function(t){for(var e=0,n=t.length;e<n;e++)kt(t[e])};var Tt=$.optionMergeStrategies;function Pt(t,e){if(!e)return t;for(var n,i,s,r=ot?Reflect.ownKeys(e):Object.keys(e),o=0;o<r.length;o++)"__ob__"!==(n=r[o])&&(i=t[n],s=e[n],y(t,n)?i!==s&&h(i)&&h(s)&&Pt(i,s):Ct(t,n,s));return t}function Rt(t,e,n){return n?function(){var i="function"==typeof e?e.call(n,n):e,s="function"==typeof t?t.call(n,n):t;return i?Pt(i,s):s}:e?t?function(){return Pt("function"==typeof e?e.call(this,this):e,"function"==typeof t?t.call(this,this):t)}:e:t}function Ot(t,e){var n=e?t?t.concat(e):Array.isArray(e)?e:[e]:t;return n?function(t){for(var e=[],n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n]);return e}(n):n}function At(t,e,n,i){var s=Object.create(t||null);return e?E(s,e):s}Tt.data=function(t,e,n){return n?Rt(t,e,n):e&&"function"!=typeof e?t:Rt(t,e)},V.forEach((function(t){Tt[t]=Ot})),D.forEach((function(t){Tt[t+"s"]=At})),Tt.watch=function(t,e,n,i){if(t===Q&&(t=void 0),e===Q&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var s={};for(var r in E(s,t),e){var o=s[r],a=e[r];o&&!Array.isArray(o)&&(o=[o]),s[r]=o?o.concat(a):Array.isArray(a)?a:[a]}return s},Tt.props=Tt.methods=Tt.inject=Tt.computed=function(t,e,n,i){if(!t)return e;var s=Object.create(null);return E(s,t),e&&E(s,e),s},Tt.provide=Rt;var Mt=function(t,e){return void 0===e?t:e};function It(t,e,n){if("function"==typeof e&&(e=e.options),function(t,e){var n=t.props;if(n){var i,s,r={};if(Array.isArray(n))for(i=n.length;i--;)"string"==typeof(s=n[i])&&(r[x(s)]={type:null});else if(h(n))for(var o in n)s=n[o],r[x(o)]=h(s)?s:{type:s};t.props=r}}(e),function(t,e){var n=t.inject;if(n){var i=t.inject={};if(Array.isArray(n))for(var s=0;s<n.length;s++)i[n[s]]={from:n[s]};else if(h(n))for(var r in n){var o=n[r];i[r]=h(o)?E({from:r},o):{from:o}}}}(e),function(t){var e=t.directives;if(e)for(var n in e){var i=e[n];"function"==typeof i&&(e[n]={bind:i,update:i})}}(e),!e._base&&(e.extends&&(t=It(t,e.extends,n)),e.mixins))for(var i=0,s=e.mixins.length;i<s;i++)t=It(t,e.mixins[i],n);var r,o={};for(r in t)a(r);for(r in e)y(t,r)||a(r);function a(i){var s=Tt[i]||Mt;o[i]=s(t[i],e[i],n,i)}return o}function jt(t,e,n,i){if("string"==typeof n){var s=t[e];if(y(s,n))return s[n];var r=x(n);if(y(s,r))return s[r];var o=S(r);return y(s,o)?s[o]:s[n]||s[r]||s[o]}}function Dt(t,e,n,i){var s=e[t],r=!y(n,t),o=n[t],a=Ft(Boolean,s.type);if(a>-1)if(r&&!y(s,"default"))o=!1;else if(""===o||o===B(t)){var c=Ft(String,s.type);(c<0||a<c)&&(o=!0)}if(void 0===o){o=function(t,e,n){if(y(e,"default")){var i=e.default;return t&&t.$options.propsData&&void 0===t.$options.propsData[n]&&void 0!==t._props[n]?t._props[n]:"function"==typeof i&&"Function"!==$t(e.type)?i.call(t):i}}(i,s,t);var l=bt;xt(!0),kt(o),xt(l)}return o}var Vt=/^\s*function (\w+)/;function $t(t){var e=t&&t.toString().match(Vt);return e?e[1]:""}function Nt(t,e){return $t(t)===$t(e)}function Ft(t,e){if(!Array.isArray(e))return Nt(e,t)?0:-1;for(var n=0,i=e.length;n<i;n++)if(Nt(e[n],t))return n;return-1}function zt(t,e,n){ut();try{if(e)for(var i=e;i=i.$parent;){var s=i.$options.errorCaptured;if(s)for(var r=0;r<s.length;r++)try{if(!1===s[r].call(i,t,e,n))return}catch(t){Ht(t,i,"errorCaptured hook")}}Ht(t,e,n)}finally{dt()}}function Wt(t,e,n,i,s){var r;try{(r=n?t.apply(e,n):t.call(e))&&!r._isVue&&d(r)&&!r._handled&&(r.catch((function(t){return zt(t,i,s+" (Promise/async)")})),r._handled=!0)}catch(t){zt(t,i,s)}return r}function Ht(t,e,n){if($.errorHandler)try{return $.errorHandler.call(null,t,e,n)}catch(e){e!==t&&Ut(e)}Ut(t)}function Ut(t,e,n){if(!H&&!U||"undefined"==typeof console)throw t;console.error(t)}var Xt,Yt=!1,Gt=[],qt=!1;function Jt(){qt=!1;var t=Gt.slice(0);Gt.length=0;for(var e=0;e<t.length;e++)t[e]()}if("undefined"!=typeof Promise&&st(Promise)){var Kt=Promise.resolve();Xt=function(){Kt.then(Jt),K&&setTimeout(P)},Yt=!0}else if(G||"undefined"==typeof MutationObserver||!st(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Xt="undefined"!=typeof setImmediate&&st(setImmediate)?function(){setImmediate(Jt)}:function(){setTimeout(Jt,0)};else{var Zt=1,Qt=new MutationObserver(Jt),te=document.createTextNode(String(Zt));Qt.observe(te,{characterData:!0}),Xt=function(){Zt=(Zt+1)%2,te.data=String(Zt)},Yt=!0}function ee(t,e){var n;if(Gt.push((function(){if(t)try{t.call(e)}catch(t){zt(t,e,"nextTick")}else n&&n(e)})),qt||(qt=!0,Xt()),!t&&"undefined"!=typeof Promise)return new Promise((function(t){n=t}))}var ne=new rt;function ie(t){se(t,ne),ne.clear()}function se(t,e){var n,i,s=Array.isArray(t);if(!(!s&&!c(t)||Object.isFrozen(t)||t instanceof ft)){if(t.__ob__){var r=t.__ob__.dep.id;if(e.has(r))return;e.add(r)}if(s)for(n=t.length;n--;)se(t[n],e);else for(n=(i=Object.keys(t)).length;n--;)se(t[i[n]],e)}}var re=w((function(t){var e="&"===t.charAt(0),n="~"===(t=e?t.slice(1):t).charAt(0),i="!"===(t=n?t.slice(1):t).charAt(0);return{name:t=i?t.slice(1):t,once:n,capture:i,passive:e}}));function oe(t,e){function n(){var t=arguments,i=n.fns;if(!Array.isArray(i))return Wt(i,null,arguments,e,"v-on handler");for(var s=i.slice(),r=0;r<s.length;r++)Wt(s[r],null,t,e,"v-on handler")}return n.fns=t,n}function ae(t,e,n,i,r,a){var c,l,h,u;for(c in t)l=t[c],h=e[c],u=re(c),s(l)||(s(h)?(s(l.fns)&&(l=t[c]=oe(l,a)),o(u.once)&&(l=t[c]=r(u.name,l,u.capture)),n(u.name,l,u.capture,u.passive,u.params)):l!==h&&(h.fns=l,t[c]=h));for(c in e)s(t[c])&&i((u=re(c)).name,e[c],u.capture)}function ce(t,e,n){var i;t instanceof ft&&(t=t.data.hook||(t.data.hook={}));var a=t[e];function c(){n.apply(this,arguments),_(i.fns,c)}s(a)?i=oe([c]):r(a.fns)&&o(a.merged)?(i=a).fns.push(c):i=oe([a,c]),i.merged=!0,t[e]=i}function le(t,e,n,i,s){if(r(e)){if(y(e,n))return t[n]=e[n],s||delete e[n],!0;if(y(e,i))return t[n]=e[i],s||delete e[i],!0}return!1}function he(t){return a(t)?[mt(t)]:Array.isArray(t)?de(t):void 0}function ue(t){return r(t)&&r(t.text)&&!1===t.isComment}function de(t,e){var n,i,c,l,h=[];for(n=0;n<t.length;n++)s(i=t[n])||"boolean"==typeof i||(l=h[c=h.length-1],Array.isArray(i)?i.length>0&&(ue((i=de(i,(e||"")+"_"+n))[0])&&ue(l)&&(h[c]=mt(l.text+i[0].text),i.shift()),h.push.apply(h,i)):a(i)?ue(l)?h[c]=mt(l.text+i):""!==i&&h.push(mt(i)):ue(i)&&ue(l)?h[c]=mt(l.text+i.text):(o(t._isVList)&&r(i.tag)&&s(i.key)&&r(e)&&(i.key="__vlist"+e+"_"+n+"__"),h.push(i)));return h}function fe(t,e){if(t){for(var n=Object.create(null),i=ot?Reflect.ownKeys(t):Object.keys(t),s=0;s<i.length;s++){var r=i[s];if("__ob__"!==r){for(var o=t[r].from,a=e;a;){if(a._provided&&y(a._provided,o)){n[r]=a._provided[o];break}a=a.$parent}if(!a&&"default"in t[r]){var c=t[r].default;n[r]="function"==typeof c?c.call(e):c}}}return n}}function pe(t,e){if(!t||!t.length)return{};for(var n={},i=0,s=t.length;i<s;i++){var r=t[i],o=r.data;if(o&&o.attrs&&o.attrs.slot&&delete o.attrs.slot,r.context!==e&&r.fnContext!==e||!o||null==o.slot)(n.default||(n.default=[])).push(r);else{var a=o.slot,c=n[a]||(n[a]=[]);"template"===r.tag?c.push.apply(c,r.children||[]):c.push(r)}}for(var l in n)n[l].every(ge)&&delete n[l];return n}function ge(t){return t.isComment&&!t.asyncFactory||" "===t.text}function me(t){return t.isComment&&t.asyncFactory}function _e(t,e,i){var s,r=Object.keys(e).length>0,o=t?!!t.$stable:!r,a=t&&t.$key;if(t){if(t._normalized)return t._normalized;if(o&&i&&i!==n&&a===i.$key&&!r&&!i.$hasNormal)return i;for(var c in s={},t)t[c]&&"$"!==c[0]&&(s[c]=ve(e,c,t[c]))}else s={};for(var l in e)l in s||(s[l]=ye(e,l));return t&&Object.isExtensible(t)&&(t._normalized=s),N(s,"$stable",o),N(s,"$key",a),N(s,"$hasNormal",r),s}function ve(t,e,n){var i=function(){var t=arguments.length?n.apply(null,arguments):n({}),e=(t=t&&"object"==typeof t&&!Array.isArray(t)?[t]:he(t))&&t[0];return t&&(!e||1===t.length&&e.isComment&&!me(e))?void 0:t};return n.proxy&&Object.defineProperty(t,e,{get:i,enumerable:!0,configurable:!0}),i}function ye(t,e){return function(){return t[e]}}function we(t,e){var n,i,s,o,a;if(Array.isArray(t)||"string"==typeof t)for(n=new Array(t.length),i=0,s=t.length;i<s;i++)n[i]=e(t[i],i);else if("number"==typeof t)for(n=new Array(t),i=0;i<t;i++)n[i]=e(i+1,i);else if(c(t))if(ot&&t[Symbol.iterator]){n=[];for(var l=t[Symbol.iterator](),h=l.next();!h.done;)n.push(e(h.value,n.length)),h=l.next()}else for(o=Object.keys(t),n=new Array(o.length),i=0,s=o.length;i<s;i++)a=o[i],n[i]=e(t[a],a,i);return r(n)||(n=[]),n._isVList=!0,n}function be(t,e,n,i){var s,r=this.$scopedSlots[t];r?(n=n||{},i&&(n=E(E({},i),n)),s=r(n)||("function"==typeof e?e():e)):s=this.$slots[t]||("function"==typeof e?e():e);var o=n&&n.slot;return o?this.$createElement("template",{slot:o},s):s}function xe(t){return jt(this.$options,"filters",t)||O}function Se(t,e){return Array.isArray(t)?-1===t.indexOf(e):t!==e}function ke(t,e,n,i,s){var r=$.keyCodes[e]||n;return s&&i&&!$.keyCodes[e]?Se(s,i):r?Se(r,t):i?B(i)!==e:void 0===t}function Be(t,e,n,i,s){if(n&&c(n)){var r;Array.isArray(n)&&(n=T(n));var o=function(o){if("class"===o||"style"===o||m(o))r=t;else{var a=t.attrs&&t.attrs.type;r=i||$.mustUseProp(e,a,o)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}var c=x(o),l=B(o);c in r||l in r||(r[o]=n[o],s&&((t.on||(t.on={}))["update:"+o]=function(t){n[o]=t}))};for(var a in n)o(a)}return t}function Ce(t,e){var n=this._staticTrees||(this._staticTrees=[]),i=n[t];return i&&!e||Ee(i=n[t]=this.$options.staticRenderFns[t].call(this._renderProxy,null,this),"__static__"+t,!1),i}function Le(t,e,n){return Ee(t,"__once__"+e+(n?"_"+n:""),!0),t}function Ee(t,e,n){if(Array.isArray(t))for(var i=0;i<t.length;i++)t[i]&&"string"!=typeof t[i]&&Te(t[i],e+"_"+i,n);else Te(t,e,n)}function Te(t,e,n){t.isStatic=!0,t.key=e,t.isOnce=n}function Pe(t,e){if(e&&h(e)){var n=t.on=t.on?E({},t.on):{};for(var i in e){var s=n[i],r=e[i];n[i]=s?[].concat(s,r):r}}return t}function Re(t,e,n,i){e=e||{$stable:!n};for(var s=0;s<t.length;s++){var r=t[s];Array.isArray(r)?Re(r,e,n):r&&(r.proxy&&(r.fn.proxy=!0),e[r.key]=r.fn)}return i&&(e.$key=i),e}function Oe(t,e){for(var n=0;n<e.length;n+=2){var i=e[n];"string"==typeof i&&i&&(t[e[n]]=e[n+1])}return t}function Ae(t,e){return"string"==typeof t?e+t:t}function Me(t){t._o=Le,t._n=p,t._s=f,t._l=we,t._t=be,t._q=A,t._i=M,t._m=Ce,t._f=xe,t._k=ke,t._b=Be,t._v=mt,t._e=gt,t._u=Re,t._g=Pe,t._d=Oe,t._p=Ae}function Ie(t,e,i,s,r){var a,c=this,l=r.options;y(s,"_uid")?(a=Object.create(s))._original=s:(a=s,s=s._original);var h=o(l._compiled),u=!h;this.data=t,this.props=e,this.children=i,this.parent=s,this.listeners=t.on||n,this.injections=fe(l.inject,s),this.slots=function(){return c.$slots||_e(t.scopedSlots,c.$slots=pe(i,s)),c.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return _e(t.scopedSlots,this.slots())}}),h&&(this.$options=l,this.$slots=this.slots(),this.$scopedSlots=_e(t.scopedSlots,this.$slots)),l._scopeId?this._c=function(t,e,n,i){var r=ze(a,t,e,n,i,u);return r&&!Array.isArray(r)&&(r.fnScopeId=l._scopeId,r.fnContext=s),r}:this._c=function(t,e,n,i){return ze(a,t,e,n,i,u)}}function je(t,e,n,i,s){var r=_t(t);return r.fnContext=n,r.fnOptions=i,e.slot&&((r.data||(r.data={})).slot=e.slot),r}function De(t,e){for(var n in e)t[x(n)]=e[n]}Me(Ie.prototype);var Ve={init:function(t,e){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var n=t;Ve.prepatch(n,n)}else(t.componentInstance=function(t,e){var n={_isComponent:!0,_parentVnode:t,parent:e},i=t.data.inlineTemplate;return r(i)&&(n.render=i.render,n.staticRenderFns=i.staticRenderFns),new t.componentOptions.Ctor(n)}(t,Ze)).$mount(e?t.elm:void 0,e)},prepatch:function(t,e){var i=e.componentOptions;!function(t,e,i,s,r){var o=s.data.scopedSlots,a=t.$scopedSlots,c=!!(o&&!o.$stable||a!==n&&!a.$stable||o&&t.$scopedSlots.$key!==o.$key||!o&&t.$scopedSlots.$key),l=!!(r||t.$options._renderChildren||c);if(t.$options._parentVnode=s,t.$vnode=s,t._vnode&&(t._vnode.parent=s),t.$options._renderChildren=r,t.$attrs=s.data.attrs||n,t.$listeners=i||n,e&&t.$options.props){xt(!1);for(var h=t._props,u=t.$options._propKeys||[],d=0;d<u.length;d++){var f=u[d],p=t.$options.props;h[f]=Dt(f,p,e,t)}xt(!0),t.$options.propsData=e}i=i||n;var g=t.$options._parentListeners;t.$options._parentListeners=i,Ke(t,i,g),l&&(t.$slots=pe(r,s.context),t.$forceUpdate())}(e.componentInstance=t.componentInstance,i.propsData,i.listeners,e,i.children)},insert:function(t){var e,n=t.context,i=t.componentInstance;i._isMounted||(i._isMounted=!0,sn(i,"mounted")),t.data.keepAlive&&(n._isMounted?((e=i)._inactive=!1,on.push(e)):en(i,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?nn(e,!0):e.$destroy())}},$e=Object.keys(Ve);function Ne(t,e,i,a,l){if(!s(t)){var h=i.$options._base;if(c(t)&&(t=h.extend(t)),"function"==typeof t){var u;if(s(t.cid)&&(t=function(t,e){if(o(t.error)&&r(t.errorComp))return t.errorComp;if(r(t.resolved))return t.resolved;var n=Ue;if(n&&r(t.owners)&&-1===t.owners.indexOf(n)&&t.owners.push(n),o(t.loading)&&r(t.loadingComp))return t.loadingComp;if(n&&!r(t.owners)){var i=t.owners=[n],a=!0,l=null,h=null;n.$on("hook:destroyed",(function(){return _(i,n)}));var u=function(t){for(var e=0,n=i.length;e<n;e++)i[e].$forceUpdate();t&&(i.length=0,null!==l&&(clearTimeout(l),l=null),null!==h&&(clearTimeout(h),h=null))},f=I((function(n){t.resolved=Xe(n,e),a?i.length=0:u(!0)})),p=I((function(e){r(t.errorComp)&&(t.error=!0,u(!0))})),g=t(f,p);return c(g)&&(d(g)?s(t.resolved)&&g.then(f,p):d(g.component)&&(g.component.then(f,p),r(g.error)&&(t.errorComp=Xe(g.error,e)),r(g.loading)&&(t.loadingComp=Xe(g.loading,e),0===g.delay?t.loading=!0:l=setTimeout((function(){l=null,s(t.resolved)&&s(t.error)&&(t.loading=!0,u(!1))}),g.delay||200)),r(g.timeout)&&(h=setTimeout((function(){h=null,s(t.resolved)&&p(null)}),g.timeout)))),a=!1,t.loading?t.loadingComp:t.resolved}}(u=t,h),void 0===t))return function(t,e,n,i,s){var r=gt();return r.asyncFactory=t,r.asyncMeta={data:e,context:n,children:i,tag:s},r}(u,e,i,a,l);e=e||{},Bn(t),r(e.model)&&function(t,e){var n=t.model&&t.model.prop||"value",i=t.model&&t.model.event||"input";(e.attrs||(e.attrs={}))[n]=e.model.value;var s=e.on||(e.on={}),o=s[i],a=e.model.callback;r(o)?(Array.isArray(o)?-1===o.indexOf(a):o!==a)&&(s[i]=[a].concat(o)):s[i]=a}(t.options,e);var f=function(t,e,n){var i=e.options.props;if(!s(i)){var o={},a=t.attrs,c=t.props;if(r(a)||r(c))for(var l in i){var h=B(l);le(o,c,l,h,!0)||le(o,a,l,h,!1)}return o}}(e,t);if(o(t.options.functional))return function(t,e,i,s,o){var a=t.options,c={},l=a.props;if(r(l))for(var h in l)c[h]=Dt(h,l,e||n);else r(i.attrs)&&De(c,i.attrs),r(i.props)&&De(c,i.props);var u=new Ie(i,c,o,s,t),d=a.render.call(null,u._c,u);if(d instanceof ft)return je(d,i,u.parent,a);if(Array.isArray(d)){for(var f=he(d)||[],p=new Array(f.length),g=0;g<f.length;g++)p[g]=je(f[g],i,u.parent,a);return p}}(t,f,e,i,a);var p=e.on;if(e.on=e.nativeOn,o(t.options.abstract)){var g=e.slot;e={},g&&(e.slot=g)}!function(t){for(var e=t.hook||(t.hook={}),n=0;n<$e.length;n++){var i=$e[n],s=e[i],r=Ve[i];s===r||s&&s._merged||(e[i]=s?Fe(r,s):r)}}(e);var m=t.options.name||l;return new ft("vue-component-"+t.cid+(m?"-"+m:""),e,void 0,void 0,void 0,i,{Ctor:t,propsData:f,listeners:p,tag:l,children:a},u)}}}function Fe(t,e){var n=function(n,i){t(n,i),e(n,i)};return n._merged=!0,n}function ze(t,e,n,i,s,l){return(Array.isArray(n)||a(n))&&(s=i,i=n,n=void 0),o(l)&&(s=2),function(t,e,n,i,s){if(r(n)&&r(n.__ob__))return gt();if(r(n)&&r(n.is)&&(e=n.is),!e)return gt();var o,a,l;(Array.isArray(i)&&"function"==typeof i[0]&&((n=n||{}).scopedSlots={default:i[0]},i.length=0),2===s?i=he(i):1===s&&(i=function(t){for(var e=0;e<t.length;e++)if(Array.isArray(t[e]))return Array.prototype.concat.apply([],t);return t}(i)),"string"==typeof e)?(a=t.$vnode&&t.$vnode.ns||$.getTagNamespace(e),o=$.isReservedTag(e)?new ft($.parsePlatformTagName(e),n,i,void 0,void 0,t):n&&n.pre||!r(l=jt(t.$options,"components",e))?new ft(e,n,i,void 0,void 0,t):Ne(l,n,t,i,e)):o=Ne(e,n,t,i);return Array.isArray(o)?o:r(o)?(r(a)&&We(o,a),r(n)&&function(t){c(t.style)&&ie(t.style),c(t.class)&&ie(t.class)}(n),o):gt()}(t,e,n,i,s)}function We(t,e,n){if(t.ns=e,"foreignObject"===t.tag&&(e=void 0,n=!0),r(t.children))for(var i=0,a=t.children.length;i<a;i++){var c=t.children[i];r(c.tag)&&(s(c.ns)||o(n)&&"svg"!==c.tag)&&We(c,e,n)}}var He,Ue=null;function Xe(t,e){return(t.__esModule||ot&&"Module"===t[Symbol.toStringTag])&&(t=t.default),c(t)?e.extend(t):t}function Ye(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var n=t[e];if(r(n)&&(r(n.componentOptions)||me(n)))return n}}function Ge(t,e){He.$on(t,e)}function qe(t,e){He.$off(t,e)}function Je(t,e){var n=He;return function i(){var s=e.apply(null,arguments);null!==s&&n.$off(t,i)}}function Ke(t,e,n){He=t,ae(e,n||{},Ge,qe,Je,t),He=void 0}var Ze=null;function Qe(t){var e=Ze;return Ze=t,function(){Ze=e}}function tn(t){for(;t&&(t=t.$parent);)if(t._inactive)return!0;return!1}function en(t,e){if(e){if(t._directInactive=!1,tn(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var n=0;n<t.$children.length;n++)en(t.$children[n]);sn(t,"activated")}}function nn(t,e){if(!(e&&(t._directInactive=!0,tn(t))||t._inactive)){t._inactive=!0;for(var n=0;n<t.$children.length;n++)nn(t.$children[n]);sn(t,"deactivated")}}function sn(t,e){ut();var n=t.$options[e],i=e+" hook";if(n)for(var s=0,r=n.length;s<r;s++)Wt(n[s],t,null,t,i);t._hasHookEvent&&t.$emit("hook:"+e),dt()}var rn=[],on=[],an={},cn=!1,ln=!1,hn=0,un=0,dn=Date.now;if(H&&!G){var fn=window.performance;fn&&"function"==typeof fn.now&&dn()>document.createEvent("Event").timeStamp&&(dn=function(){return fn.now()})}function pn(){var t,e;for(un=dn(),ln=!0,rn.sort((function(t,e){return t.id-e.id})),hn=0;hn<rn.length;hn++)(t=rn[hn]).before&&t.before(),e=t.id,an[e]=null,t.run();var n=on.slice(),i=rn.slice();hn=rn.length=on.length=0,an={},cn=ln=!1,function(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,en(t[e],!0)}(n),function(t){for(var e=t.length;e--;){var n=t[e],i=n.vm;i._watcher===n&&i._isMounted&&!i._isDestroyed&&sn(i,"updated")}}(i),it&&$.devtools&&it.emit("flush")}var gn=0,mn=function(t,e,n,i,s){this.vm=t,s&&(t._watcher=this),t._watchers.push(this),i?(this.deep=!!i.deep,this.user=!!i.user,this.lazy=!!i.lazy,this.sync=!!i.sync,this.before=i.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++gn,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new rt,this.newDepIds=new rt,this.expression="","function"==typeof e?this.getter=e:(this.getter=function(t){if(!z.test(t)){var e=t.split(".");return function(t){for(var n=0;n<e.length;n++){if(!t)return;t=t[e[n]]}return t}}}(e),this.getter||(this.getter=P)),this.value=this.lazy?void 0:this.get()};mn.prototype.get=function(){var t;ut(this);var e=this.vm;try{t=this.getter.call(e,e)}catch(t){if(!this.user)throw t;zt(t,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&ie(t),dt(),this.cleanupDeps()}return t},mn.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},mn.prototype.cleanupDeps=function(){for(var t=this.deps.length;t--;){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},mn.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(t){var e=t.id;if(null==an[e]){if(an[e]=!0,ln){for(var n=rn.length-1;n>hn&&rn[n].id>t.id;)n--;rn.splice(n+1,0,t)}else rn.push(t);cn||(cn=!0,ee(pn))}}(this)},mn.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||c(t)||this.deep){var e=this.value;if(this.value=t,this.user){var n='callback for watcher "'+this.expression+'"';Wt(this.cb,this.vm,[t,e],this.vm,n)}else this.cb.call(this.vm,t,e)}}},mn.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},mn.prototype.depend=function(){for(var t=this.deps.length;t--;)this.deps[t].depend()},mn.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||_(this.vm._watchers,this);for(var t=this.deps.length;t--;)this.deps[t].removeSub(this);this.active=!1}};var _n={enumerable:!0,configurable:!0,get:P,set:P};function vn(t,e,n){_n.get=function(){return this[e][n]},_n.set=function(t){this[e][n]=t},Object.defineProperty(t,n,_n)}var yn={lazy:!0};function wn(t,e,n){var i=!nt();"function"==typeof n?(_n.get=i?bn(e):xn(n),_n.set=P):(_n.get=n.get?i&&!1!==n.cache?bn(e):xn(n.get):P,_n.set=n.set||P),Object.defineProperty(t,e,_n)}function bn(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),lt.target&&e.depend(),e.value}}function xn(t){return function(){return t.call(this,this)}}function Sn(t,e,n,i){return h(n)&&(i=n,n=n.handler),"string"==typeof n&&(n=t[n]),t.$watch(e,n,i)}var kn=0;function Bn(t){var e=t.options;if(t.super){var n=Bn(t.super);if(n!==t.superOptions){t.superOptions=n;var i=function(t){var e,n=t.options,i=t.sealedOptions;for(var s in n)n[s]!==i[s]&&(e||(e={}),e[s]=n[s]);return e}(t);i&&E(t.extendOptions,i),(e=t.options=It(n,t.extendOptions)).name&&(e.components[e.name]=t)}}return e}function Cn(t){this._init(t)}function Ln(t){return t&&(t.Ctor.options.name||t.tag)}function En(t,e){return Array.isArray(t)?t.indexOf(e)>-1:"string"==typeof t?t.split(",").indexOf(e)>-1:(n=t,!("[object RegExp]"!==l.call(n))&&t.test(e));var n}function Tn(t,e){var n=t.cache,i=t.keys,s=t._vnode;for(var r in n){var o=n[r];if(o){var a=o.name;a&&!e(a)&&Pn(n,r,i,s)}}}function Pn(t,e,n,i){var s=t[e];!s||i&&s.tag===i.tag||s.componentInstance.$destroy(),t[e]=null,_(n,e)}!function(t){t.prototype._init=function(t){var e=this;e._uid=kn++,e._isVue=!0,t&&t._isComponent?function(t,e){var n=t.$options=Object.create(t.constructor.options),i=e._parentVnode;n.parent=e.parent,n._parentVnode=i;var s=i.componentOptions;n.propsData=s.propsData,n._parentListeners=s.listeners,n._renderChildren=s.children,n._componentTag=s.tag,e.render&&(n.render=e.render,n.staticRenderFns=e.staticRenderFns)}(e,t):e.$options=It(Bn(e.constructor),t||{},e),e._renderProxy=e,e._self=e,function(t){var e=t.$options,n=e.parent;if(n&&!e.abstract){for(;n.$options.abstract&&n.$parent;)n=n.$parent;n.$children.push(t)}t.$parent=n,t.$root=n?n.$root:t,t.$children=[],t.$refs={},t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}(e),function(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&Ke(t,e)}(e),function(t){t._vnode=null,t._staticTrees=null;var e=t.$options,i=t.$vnode=e._parentVnode,s=i&&i.context;t.$slots=pe(e._renderChildren,s),t.$scopedSlots=n,t._c=function(e,n,i,s){return ze(t,e,n,i,s,!1)},t.$createElement=function(e,n,i,s){return ze(t,e,n,i,s,!0)};var r=i&&i.data;Bt(t,"$attrs",r&&r.attrs||n,null,!0),Bt(t,"$listeners",e._parentListeners||n,null,!0)}(e),sn(e,"beforeCreate"),function(t){var e=fe(t.$options.inject,t);e&&(xt(!1),Object.keys(e).forEach((function(n){Bt(t,n,e[n])})),xt(!0))}(e),function(t){t._watchers=[];var e=t.$options;e.props&&function(t,e){var n=t.$options.propsData||{},i=t._props={},s=t.$options._propKeys=[];t.$parent&&xt(!1);var r=function(r){s.push(r);var o=Dt(r,e,n,t);Bt(i,r,o),r in t||vn(t,"_props",r)};for(var o in e)r(o);xt(!0)}(t,e.props),e.methods&&function(t,e){for(var n in t.$options.props,e)t[n]="function"!=typeof e[n]?P:C(e[n],t)}(t,e.methods),e.data?function(t){var e=t.$options.data;h(e=t._data="function"==typeof e?function(t,e){ut();try{return t.call(e,e)}catch(t){return zt(t,e,"data()"),{}}finally{dt()}}(e,t):e||{})||(e={});for(var n,i=Object.keys(e),s=t.$options.props,r=(t.$options.methods,i.length);r--;){var o=i[r];s&&y(s,o)||(n=void 0,36===(n=(o+"").charCodeAt(0))||95===n)||vn(t,"_data",o)}kt(e,!0)}(t):kt(t._data={},!0),e.computed&&function(t,e){var n=t._computedWatchers=Object.create(null),i=nt();for(var s in e){var r=e[s],o="function"==typeof r?r:r.get;i||(n[s]=new mn(t,o||P,P,yn)),s in t||wn(t,s,r)}}(t,e.computed),e.watch&&e.watch!==Q&&function(t,e){for(var n in e){var i=e[n];if(Array.isArray(i))for(var s=0;s<i.length;s++)Sn(t,n,i[s]);else Sn(t,n,i)}}(t,e.watch)}(e),function(t){var e=t.$options.provide;e&&(t._provided="function"==typeof e?e.call(t):e)}(e),sn(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}(Cn),function(t){Object.defineProperty(t.prototype,"$data",{get:function(){return this._data}}),Object.defineProperty(t.prototype,"$props",{get:function(){return this._props}}),t.prototype.$set=Ct,t.prototype.$delete=Lt,t.prototype.$watch=function(t,e,n){var i=this;if(h(e))return Sn(i,t,e,n);(n=n||{}).user=!0;var s=new mn(i,t,e,n);if(n.immediate){var r='callback for immediate watcher "'+s.expression+'"';ut(),Wt(e,i,[s.value],i,r),dt()}return function(){s.teardown()}}}(Cn),function(t){var e=/^hook:/;t.prototype.$on=function(t,n){var i=this;if(Array.isArray(t))for(var s=0,r=t.length;s<r;s++)i.$on(t[s],n);else(i._events[t]||(i._events[t]=[])).push(n),e.test(t)&&(i._hasHookEvent=!0);return i},t.prototype.$once=function(t,e){var n=this;function i(){n.$off(t,i),e.apply(n,arguments)}return i.fn=e,n.$on(t,i),n},t.prototype.$off=function(t,e){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(t)){for(var i=0,s=t.length;i<s;i++)n.$off(t[i],e);return n}var r,o=n._events[t];if(!o)return n;if(!e)return n._events[t]=null,n;for(var a=o.length;a--;)if((r=o[a])===e||r.fn===e){o.splice(a,1);break}return n},t.prototype.$emit=function(t){var e=this,n=e._events[t];if(n){n=n.length>1?L(n):n;for(var i=L(arguments,1),s='event handler for "'+t+'"',r=0,o=n.length;r<o;r++)Wt(n[r],e,i,e,s)}return e}}(Cn),function(t){t.prototype._update=function(t,e){var n=this,i=n.$el,s=n._vnode,r=Qe(n);n._vnode=t,n.$el=s?n.__patch__(s,t):n.__patch__(n.$el,t,e,!1),r(),i&&(i.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},t.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){sn(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||_(e.$children,t),t._watcher&&t._watcher.teardown();for(var n=t._watchers.length;n--;)t._watchers[n].teardown();t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),sn(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}(Cn),function(t){Me(t.prototype),t.prototype.$nextTick=function(t){return ee(t,this)},t.prototype._render=function(){var t,e=this,n=e.$options,i=n.render,s=n._parentVnode;s&&(e.$scopedSlots=_e(s.data.scopedSlots,e.$slots,e.$scopedSlots)),e.$vnode=s;try{Ue=e,t=i.call(e._renderProxy,e.$createElement)}catch(n){zt(n,e,"render"),t=e._vnode}finally{Ue=null}return Array.isArray(t)&&1===t.length&&(t=t[0]),t instanceof ft||(t=gt()),t.parent=s,t}}(Cn);var Rn=[String,RegExp,Array],On={name:"keep-alive",abstract:!0,props:{include:Rn,exclude:Rn,max:[String,Number]},methods:{cacheVNode:function(){var t=this,e=t.cache,n=t.keys,i=t.vnodeToCache,s=t.keyToCache;if(i){var r=i.tag,o=i.componentInstance,a=i.componentOptions;e[s]={name:Ln(a),tag:r,componentInstance:o},n.push(s),this.max&&n.length>parseInt(this.max)&&Pn(e,n[0],n,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)Pn(this.cache,t,this.keys)},mounted:function(){var t=this;this.cacheVNode(),this.$watch("include",(function(e){Tn(t,(function(t){return En(e,t)}))})),this.$watch("exclude",(function(e){Tn(t,(function(t){return!En(e,t)}))}))},updated:function(){this.cacheVNode()},render:function(){var t=this.$slots.default,e=Ye(t),n=e&&e.componentOptions;if(n){var i=Ln(n),s=this.include,r=this.exclude;if(s&&(!i||!En(s,i))||r&&i&&En(r,i))return e;var o=this.cache,a=this.keys,c=null==e.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):e.key;o[c]?(e.componentInstance=o[c].componentInstance,_(a,c),a.push(c)):(this.vnodeToCache=e,this.keyToCache=c),e.data.keepAlive=!0}return e||t&&t[0]}},An={KeepAlive:On};!function(t){var e={get:function(){return $}};Object.defineProperty(t,"config",e),t.util={warn:at,extend:E,mergeOptions:It,defineReactive:Bt},t.set=Ct,t.delete=Lt,t.nextTick=ee,t.observable=function(t){return kt(t),t},t.options=Object.create(null),D.forEach((function(e){t.options[e+"s"]=Object.create(null)})),t.options._base=t,E(t.options.components,An),function(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var n=L(arguments,1);return n.unshift(this),"function"==typeof t.install?t.install.apply(t,n):"function"==typeof t&&t.apply(null,n),e.push(t),this}}(t),function(t){t.mixin=function(t){return this.options=It(this.options,t),this}}(t),function(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var n=this,i=n.cid,s=t._Ctor||(t._Ctor={});if(s[i])return s[i];var r=t.name||n.options.name,o=function(t){this._init(t)};return(o.prototype=Object.create(n.prototype)).constructor=o,o.cid=e++,o.options=It(n.options,t),o.super=n,o.options.props&&function(t){var e=t.options.props;for(var n in e)vn(t.prototype,"_props",n)}(o),o.options.computed&&function(t){var e=t.options.computed;for(var n in e)wn(t.prototype,n,e[n])}(o),o.extend=n.extend,o.mixin=n.mixin,o.use=n.use,D.forEach((function(t){o[t]=n[t]})),r&&(o.options.components[r]=o),o.superOptions=n.options,o.extendOptions=t,o.sealedOptions=E({},o.options),s[i]=o,o}}(t),function(t){D.forEach((function(e){t[e]=function(t,n){return n?("component"===e&&h(n)&&(n.name=n.name||t,n=this.options._base.extend(n)),"directive"===e&&"function"==typeof n&&(n={bind:n,update:n}),this.options[e+"s"][t]=n,n):this.options[e+"s"][t]}}))}(t)}(Cn),Object.defineProperty(Cn.prototype,"$isServer",{get:nt}),Object.defineProperty(Cn.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Cn,"FunctionalRenderContext",{value:Ie}),Cn.version="2.6.14";var Mn=g("style,class"),In=g("input,textarea,option,select,progress"),jn=g("contenteditable,draggable,spellcheck"),Dn=g("events,caret,typing,plaintext-only"),Vn=g("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),$n="http://www.w3.org/1999/xlink",Nn=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},Fn=function(t){return Nn(t)?t.slice(6,t.length):""},zn=function(t){return null==t||!1===t};function Wn(t,e){return{staticClass:Hn(t.staticClass,e.staticClass),class:r(t.class)?[t.class,e.class]:e.class}}function Hn(t,e){return t?e?t+" "+e:t:e||""}function Un(t){return Array.isArray(t)?function(t){for(var e,n="",i=0,s=t.length;i<s;i++)r(e=Un(t[i]))&&""!==e&&(n&&(n+=" "),n+=e);return n}(t):c(t)?function(t){var e="";for(var n in t)t[n]&&(e&&(e+=" "),e+=n);return e}(t):"string"==typeof t?t:""}var Xn={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Yn=g("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Gn=g("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),qn=function(t){return Yn(t)||Gn(t)},Jn=Object.create(null),Kn=g("text,number,password,search,email,tel,url"),Zn=Object.freeze({createElement:function(t,e){var n=document.createElement(t);return"select"!==t||e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n},createElementNS:function(t,e){return document.createElementNS(Xn[t],e)},createTextNode:function(t){return document.createTextNode(t)},createComment:function(t){return document.createComment(t)},insertBefore:function(t,e,n){t.insertBefore(e,n)},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){t.appendChild(e)},parentNode:function(t){return t.parentNode},nextSibling:function(t){return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e},setStyleScope:function(t,e){t.setAttribute(e,"")}}),Qn={create:function(t,e){ti(e)},update:function(t,e){t.data.ref!==e.data.ref&&(ti(t,!0),ti(e))},destroy:function(t){ti(t,!0)}};function ti(t,e){var n=t.data.ref;if(r(n)){var i=t.context,s=t.componentInstance||t.elm,o=i.$refs;e?Array.isArray(o[n])?_(o[n],s):o[n]===s&&(o[n]=void 0):t.data.refInFor?Array.isArray(o[n])?o[n].indexOf(s)<0&&o[n].push(s):o[n]=[s]:o[n]=s}}var ei=new ft("",{},[]),ni=["create","activate","update","remove","destroy"];function ii(t,e){return t.key===e.key&&t.asyncFactory===e.asyncFactory&&(t.tag===e.tag&&t.isComment===e.isComment&&r(t.data)===r(e.data)&&function(t,e){if("input"!==t.tag)return!0;var n,i=r(n=t.data)&&r(n=n.attrs)&&n.type,s=r(n=e.data)&&r(n=n.attrs)&&n.type;return i===s||Kn(i)&&Kn(s)}(t,e)||o(t.isAsyncPlaceholder)&&s(e.asyncFactory.error))}function si(t,e,n){var i,s,o={};for(i=e;i<=n;++i)r(s=t[i].key)&&(o[s]=i);return o}var ri={create:oi,update:oi,destroy:function(t){oi(t,ei)}};function oi(t,e){(t.data.directives||e.data.directives)&&function(t,e){var n,i,s,r=t===ei,o=e===ei,a=ci(t.data.directives,t.context),c=ci(e.data.directives,e.context),l=[],h=[];for(n in c)i=a[n],s=c[n],i?(s.oldValue=i.value,s.oldArg=i.arg,hi(s,"update",e,t),s.def&&s.def.componentUpdated&&h.push(s)):(hi(s,"bind",e,t),s.def&&s.def.inserted&&l.push(s));if(l.length){var u=function(){for(var n=0;n<l.length;n++)hi(l[n],"inserted",e,t)};r?ce(e,"insert",u):u()}if(h.length&&ce(e,"postpatch",(function(){for(var n=0;n<h.length;n++)hi(h[n],"componentUpdated",e,t)})),!r)for(n in a)c[n]||hi(a[n],"unbind",t,t,o)}(t,e)}var ai=Object.create(null);function ci(t,e){var n,i,s=Object.create(null);if(!t)return s;for(n=0;n<t.length;n++)(i=t[n]).modifiers||(i.modifiers=ai),s[li(i)]=i,i.def=jt(e.$options,"directives",i.name);return s}function li(t){return t.rawName||t.name+"."+Object.keys(t.modifiers||{}).join(".")}function hi(t,e,n,i,s){var r=t.def&&t.def[e];if(r)try{r(n.elm,t,n,i,s)}catch(i){zt(i,n.context,"directive "+t.name+" "+e+" hook")}}var ui=[Qn,ri];function di(t,e){var n=e.componentOptions;if(!(r(n)&&!1===n.Ctor.options.inheritAttrs||s(t.data.attrs)&&s(e.data.attrs))){var i,o,a=e.elm,c=t.data.attrs||{},l=e.data.attrs||{};for(i in r(l.__ob__)&&(l=e.data.attrs=E({},l)),l)o=l[i],c[i]!==o&&fi(a,i,o,e.data.pre);for(i in(G||J)&&l.value!==c.value&&fi(a,"value",l.value),c)s(l[i])&&(Nn(i)?a.removeAttributeNS($n,Fn(i)):jn(i)||a.removeAttribute(i))}}function fi(t,e,n,i){i||t.tagName.indexOf("-")>-1?pi(t,e,n):Vn(e)?zn(n)?t.removeAttribute(e):(n="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,n)):jn(e)?t.setAttribute(e,function(t,e){return zn(e)||"false"===e?"false":"contenteditable"===t&&Dn(e)?e:"true"}(e,n)):Nn(e)?zn(n)?t.removeAttributeNS($n,Fn(e)):t.setAttributeNS($n,e,n):pi(t,e,n)}function pi(t,e,n){if(zn(n))t.removeAttribute(e);else{if(G&&!q&&"TEXTAREA"===t.tagName&&"placeholder"===e&&""!==n&&!t.__ieph){var i=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",i)};t.addEventListener("input",i),t.__ieph=!0}t.setAttribute(e,n)}}var gi={create:di,update:di};function mi(t,e){var n=e.elm,i=e.data,o=t.data;if(!(s(i.staticClass)&&s(i.class)&&(s(o)||s(o.staticClass)&&s(o.class)))){var a=function(t){for(var e=t.data,n=t,i=t;r(i.componentInstance);)(i=i.componentInstance._vnode)&&i.data&&(e=Wn(i.data,e));for(;r(n=n.parent);)n&&n.data&&(e=Wn(e,n.data));return s=e.staticClass,o=e.class,r(s)||r(o)?Hn(s,Un(o)):"";var s,o}(e),c=n._transitionClasses;r(c)&&(a=Hn(a,Un(c))),a!==n._prevClass&&(n.setAttribute("class",a),n._prevClass=a)}}var _i,vi={create:mi,update:mi};function yi(t,e,n){var i=_i;return function s(){var r=e.apply(null,arguments);null!==r&&xi(t,s,n,i)}}var wi=Yt&&!(Z&&Number(Z[1])<=53);function bi(t,e,n,i){if(wi){var s=un,r=e;e=r._wrapper=function(t){if(t.target===t.currentTarget||t.timeStamp>=s||t.timeStamp<=0||t.target.ownerDocument!==document)return r.apply(this,arguments)}}_i.addEventListener(t,e,tt?{capture:n,passive:i}:n)}function xi(t,e,n,i){(i||_i).removeEventListener(t,e._wrapper||e,n)}function Si(t,e){if(!s(t.data.on)||!s(e.data.on)){var n=e.data.on||{},i=t.data.on||{};_i=e.elm,function(t){if(r(t.__r)){var e=G?"change":"input";t[e]=[].concat(t.__r,t[e]||[]),delete t.__r}r(t.__c)&&(t.change=[].concat(t.__c,t.change||[]),delete t.__c)}(n),ae(n,i,bi,xi,yi,e.context),_i=void 0}}var ki,Bi={create:Si,update:Si};function Ci(t,e){if(!s(t.data.domProps)||!s(e.data.domProps)){var n,i,o=e.elm,a=t.data.domProps||{},c=e.data.domProps||{};for(n in r(c.__ob__)&&(c=e.data.domProps=E({},c)),a)n in c||(o[n]="");for(n in c){if(i=c[n],"textContent"===n||"innerHTML"===n){if(e.children&&(e.children.length=0),i===a[n])continue;1===o.childNodes.length&&o.removeChild(o.childNodes[0])}if("value"===n&&"PROGRESS"!==o.tagName){o._value=i;var l=s(i)?"":String(i);Li(o,l)&&(o.value=l)}else if("innerHTML"===n&&Gn(o.tagName)&&s(o.innerHTML)){(ki=ki||document.createElement("div")).innerHTML="<svg>"+i+"</svg>";for(var h=ki.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;h.firstChild;)o.appendChild(h.firstChild)}else if(i!==a[n])try{o[n]=i}catch(t){}}}}function Li(t,e){return!t.composing&&("OPTION"===t.tagName||function(t,e){var n=!0;try{n=document.activeElement!==t}catch(t){}return n&&t.value!==e}(t,e)||function(t,e){var n=t.value,i=t._vModifiers;if(r(i)){if(i.number)return p(n)!==p(e);if(i.trim)return n.trim()!==e.trim()}return n!==e}(t,e))}var Ei={create:Ci,update:Ci},Ti=w((function(t){var e={},n=/:(.+)/;return t.split(/;(?![^(]*\))/g).forEach((function(t){if(t){var i=t.split(n);i.length>1&&(e[i[0].trim()]=i[1].trim())}})),e}));function Pi(t){var e=Ri(t.style);return t.staticStyle?E(t.staticStyle,e):e}function Ri(t){return Array.isArray(t)?T(t):"string"==typeof t?Ti(t):t}var Oi,Ai=/^--/,Mi=/\s*!important$/,Ii=function(t,e,n){if(Ai.test(e))t.style.setProperty(e,n);else if(Mi.test(n))t.style.setProperty(B(e),n.replace(Mi,""),"important");else{var i=Di(e);if(Array.isArray(n))for(var s=0,r=n.length;s<r;s++)t.style[i]=n[s];else t.style[i]=n}},ji=["Webkit","Moz","ms"],Di=w((function(t){if(Oi=Oi||document.createElement("div").style,"filter"!==(t=x(t))&&t in Oi)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<ji.length;n++){var i=ji[n]+e;if(i in Oi)return i}}));function Vi(t,e){var n=e.data,i=t.data;if(!(s(n.staticStyle)&&s(n.style)&&s(i.staticStyle)&&s(i.style))){var o,a,c=e.elm,l=i.staticStyle,h=i.normalizedStyle||i.style||{},u=l||h,d=Ri(e.data.style)||{};e.data.normalizedStyle=r(d.__ob__)?E({},d):d;var f=function(t,e){for(var n,i={},s=t;s.componentInstance;)(s=s.componentInstance._vnode)&&s.data&&(n=Pi(s.data))&&E(i,n);(n=Pi(t.data))&&E(i,n);for(var r=t;r=r.parent;)r.data&&(n=Pi(r.data))&&E(i,n);return i}(e);for(a in u)s(f[a])&&Ii(c,a,"");for(a in f)(o=f[a])!==u[a]&&Ii(c,a,null==o?"":o)}}var $i={create:Vi,update:Vi},Ni=/\s+/;function Fi(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(Ni).forEach((function(e){return t.classList.add(e)})):t.classList.add(e);else{var n=" "+(t.getAttribute("class")||"")+" ";n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function zi(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(Ni).forEach((function(e){return t.classList.remove(e)})):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var n=" "+(t.getAttribute("class")||"")+" ",i=" "+e+" ";n.indexOf(i)>=0;)n=n.replace(i," ");(n=n.trim())?t.setAttribute("class",n):t.removeAttribute("class")}}function Wi(t){if(t){if("object"==typeof t){var e={};return!1!==t.css&&E(e,Hi(t.name||"v")),E(e,t),e}return"string"==typeof t?Hi(t):void 0}}var Hi=w((function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}})),Ui=H&&!q,Xi="transition",Yi="animation",Gi="transition",qi="transitionend",Ji="animation",Ki="animationend";Ui&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Gi="WebkitTransition",qi="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Ji="WebkitAnimation",Ki="webkitAnimationEnd"));var Zi=H?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function Qi(t){Zi((function(){Zi(t)}))}function ts(t,e){var n=t._transitionClasses||(t._transitionClasses=[]);n.indexOf(e)<0&&(n.push(e),Fi(t,e))}function es(t,e){t._transitionClasses&&_(t._transitionClasses,e),zi(t,e)}function ns(t,e,n){var i=ss(t,e),s=i.type,r=i.timeout,o=i.propCount;if(!s)return n();var a=s===Xi?qi:Ki,c=0,l=function(){t.removeEventListener(a,h),n()},h=function(e){e.target===t&&++c>=o&&l()};setTimeout((function(){c<o&&l()}),r+1),t.addEventListener(a,h)}var is=/\b(transform|all)(,|$)/;function ss(t,e){var n,i=window.getComputedStyle(t),s=(i[Gi+"Delay"]||"").split(", "),r=(i[Gi+"Duration"]||"").split(", "),o=rs(s,r),a=(i[Ji+"Delay"]||"").split(", "),c=(i[Ji+"Duration"]||"").split(", "),l=rs(a,c),h=0,u=0;return e===Xi?o>0&&(n=Xi,h=o,u=r.length):e===Yi?l>0&&(n=Yi,h=l,u=c.length):u=(n=(h=Math.max(o,l))>0?o>l?Xi:Yi:null)?n===Xi?r.length:c.length:0,{type:n,timeout:h,propCount:u,hasTransform:n===Xi&&is.test(i[Gi+"Property"])}}function rs(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map((function(e,n){return os(e)+os(t[n])})))}function os(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function as(t,e){var n=t.elm;r(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var i=Wi(t.data.transition);if(!s(i)&&!r(n._enterCb)&&1===n.nodeType){for(var o=i.css,a=i.type,l=i.enterClass,h=i.enterToClass,u=i.enterActiveClass,d=i.appearClass,f=i.appearToClass,g=i.appearActiveClass,m=i.beforeEnter,_=i.enter,v=i.afterEnter,y=i.enterCancelled,w=i.beforeAppear,b=i.appear,x=i.afterAppear,S=i.appearCancelled,k=i.duration,B=Ze,C=Ze.$vnode;C&&C.parent;)B=C.context,C=C.parent;var L=!B._isMounted||!t.isRootInsert;if(!L||b||""===b){var E=L&&d?d:l,T=L&&g?g:u,P=L&&f?f:h,R=L&&w||m,O=L&&"function"==typeof b?b:_,A=L&&x||v,M=L&&S||y,j=p(c(k)?k.enter:k),D=!1!==o&&!q,V=hs(O),$=n._enterCb=I((function(){D&&(es(n,P),es(n,T)),$.cancelled?(D&&es(n,E),M&&M(n)):A&&A(n),n._enterCb=null}));t.data.show||ce(t,"insert",(function(){var e=n.parentNode,i=e&&e._pending&&e._pending[t.key];i&&i.tag===t.tag&&i.elm._leaveCb&&i.elm._leaveCb(),O&&O(n,$)})),R&&R(n),D&&(ts(n,E),ts(n,T),Qi((function(){es(n,E),$.cancelled||(ts(n,P),V||(ls(j)?setTimeout($,j):ns(n,a,$)))}))),t.data.show&&(e&&e(),O&&O(n,$)),D||V||$()}}}function cs(t,e){var n=t.elm;r(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var i=Wi(t.data.transition);if(s(i)||1!==n.nodeType)return e();if(!r(n._leaveCb)){var o=i.css,a=i.type,l=i.leaveClass,h=i.leaveToClass,u=i.leaveActiveClass,d=i.beforeLeave,f=i.leave,g=i.afterLeave,m=i.leaveCancelled,_=i.delayLeave,v=i.duration,y=!1!==o&&!q,w=hs(f),b=p(c(v)?v.leave:v),x=n._leaveCb=I((function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[t.key]=null),y&&(es(n,h),es(n,u)),x.cancelled?(y&&es(n,l),m&&m(n)):(e(),g&&g(n)),n._leaveCb=null}));_?_(S):S()}function S(){x.cancelled||(!t.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[t.key]=t),d&&d(n),y&&(ts(n,l),ts(n,u),Qi((function(){es(n,l),x.cancelled||(ts(n,h),w||(ls(b)?setTimeout(x,b):ns(n,a,x)))}))),f&&f(n,x),y||w||x())}}function ls(t){return"number"==typeof t&&!isNaN(t)}function hs(t){if(s(t))return!1;var e=t.fns;return r(e)?hs(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function us(t,e){!0!==e.data.show&&as(e)}var ds=function(t){var e,n,i={},c=t.modules,l=t.nodeOps;for(e=0;e<ni.length;++e)for(i[ni[e]]=[],n=0;n<c.length;++n)r(c[n][ni[e]])&&i[ni[e]].push(c[n][ni[e]]);function h(t){var e=l.parentNode(t);r(e)&&l.removeChild(e,t)}function u(t,e,n,s,a,c,h){if(r(t.elm)&&r(c)&&(t=c[h]=_t(t)),t.isRootInsert=!a,!function(t,e,n,s){var a=t.data;if(r(a)){var c=r(t.componentInstance)&&a.keepAlive;if(r(a=a.hook)&&r(a=a.init)&&a(t,!1),r(t.componentInstance))return d(t,e),f(n,t.elm,s),o(c)&&function(t,e,n,s){for(var o,a=t;a.componentInstance;)if(r(o=(a=a.componentInstance._vnode).data)&&r(o=o.transition)){for(o=0;o<i.activate.length;++o)i.activate[o](ei,a);e.push(a);break}f(n,t.elm,s)}(t,e,n,s),!0}}(t,e,n,s)){var u=t.data,g=t.children,m=t.tag;r(m)?(t.elm=t.ns?l.createElementNS(t.ns,m):l.createElement(m,t),v(t),p(t,g,e),r(u)&&_(t,e),f(n,t.elm,s)):o(t.isComment)?(t.elm=l.createComment(t.text),f(n,t.elm,s)):(t.elm=l.createTextNode(t.text),f(n,t.elm,s))}}function d(t,e){r(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,m(t)?(_(t,e),v(t)):(ti(t),e.push(t))}function f(t,e,n){r(t)&&(r(n)?l.parentNode(n)===t&&l.insertBefore(t,e,n):l.appendChild(t,e))}function p(t,e,n){if(Array.isArray(e))for(var i=0;i<e.length;++i)u(e[i],n,t.elm,null,!0,e,i);else a(t.text)&&l.appendChild(t.elm,l.createTextNode(String(t.text)))}function m(t){for(;t.componentInstance;)t=t.componentInstance._vnode;return r(t.tag)}function _(t,n){for(var s=0;s<i.create.length;++s)i.create[s](ei,t);r(e=t.data.hook)&&(r(e.create)&&e.create(ei,t),r(e.insert)&&n.push(t))}function v(t){var e;if(r(e=t.fnScopeId))l.setStyleScope(t.elm,e);else for(var n=t;n;)r(e=n.context)&&r(e=e.$options._scopeId)&&l.setStyleScope(t.elm,e),n=n.parent;r(e=Ze)&&e!==t.context&&e!==t.fnContext&&r(e=e.$options._scopeId)&&l.setStyleScope(t.elm,e)}function y(t,e,n,i,s,r){for(;i<=s;++i)u(n[i],r,t,e,!1,n,i)}function w(t){var e,n,s=t.data;if(r(s))for(r(e=s.hook)&&r(e=e.destroy)&&e(t),e=0;e<i.destroy.length;++e)i.destroy[e](t);if(r(e=t.children))for(n=0;n<t.children.length;++n)w(t.children[n])}function b(t,e,n){for(;e<=n;++e){var i=t[e];r(i)&&(r(i.tag)?(x(i),w(i)):h(i.elm))}}function x(t,e){if(r(e)||r(t.data)){var n,s=i.remove.length+1;for(r(e)?e.listeners+=s:e=function(t,e){function n(){0==--n.listeners&&h(t)}return n.listeners=e,n}(t.elm,s),r(n=t.componentInstance)&&r(n=n._vnode)&&r(n.data)&&x(n,e),n=0;n<i.remove.length;++n)i.remove[n](t,e);r(n=t.data.hook)&&r(n=n.remove)?n(t,e):e()}else h(t.elm)}function S(t,e,n,i){for(var s=n;s<i;s++){var o=e[s];if(r(o)&&ii(t,o))return s}}function k(t,e,n,a,c,h){if(t!==e){r(e.elm)&&r(a)&&(e=a[c]=_t(e));var d=e.elm=t.elm;if(o(t.isAsyncPlaceholder))r(e.asyncFactory.resolved)?L(t.elm,e,n):e.isAsyncPlaceholder=!0;else if(o(e.isStatic)&&o(t.isStatic)&&e.key===t.key&&(o(e.isCloned)||o(e.isOnce)))e.componentInstance=t.componentInstance;else{var f,p=e.data;r(p)&&r(f=p.hook)&&r(f=f.prepatch)&&f(t,e);var g=t.children,_=e.children;if(r(p)&&m(e)){for(f=0;f<i.update.length;++f)i.update[f](t,e);r(f=p.hook)&&r(f=f.update)&&f(t,e)}s(e.text)?r(g)&&r(_)?g!==_&&function(t,e,n,i,o){for(var a,c,h,d=0,f=0,p=e.length-1,g=e[0],m=e[p],_=n.length-1,v=n[0],w=n[_],x=!o;d<=p&&f<=_;)s(g)?g=e[++d]:s(m)?m=e[--p]:ii(g,v)?(k(g,v,i,n,f),g=e[++d],v=n[++f]):ii(m,w)?(k(m,w,i,n,_),m=e[--p],w=n[--_]):ii(g,w)?(k(g,w,i,n,_),x&&l.insertBefore(t,g.elm,l.nextSibling(m.elm)),g=e[++d],w=n[--_]):ii(m,v)?(k(m,v,i,n,f),x&&l.insertBefore(t,m.elm,g.elm),m=e[--p],v=n[++f]):(s(a)&&(a=si(e,d,p)),s(c=r(v.key)?a[v.key]:S(v,e,d,p))?u(v,i,t,g.elm,!1,n,f):ii(h=e[c],v)?(k(h,v,i,n,f),e[c]=void 0,x&&l.insertBefore(t,h.elm,g.elm)):u(v,i,t,g.elm,!1,n,f),v=n[++f]);d>p?y(t,s(n[_+1])?null:n[_+1].elm,n,f,_,i):f>_&&b(e,d,p)}(d,g,_,n,h):r(_)?(r(t.text)&&l.setTextContent(d,""),y(d,null,_,0,_.length-1,n)):r(g)?b(g,0,g.length-1):r(t.text)&&l.setTextContent(d,""):t.text!==e.text&&l.setTextContent(d,e.text),r(p)&&r(f=p.hook)&&r(f=f.postpatch)&&f(t,e)}}}function B(t,e,n){if(o(n)&&r(t.parent))t.parent.data.pendingInsert=e;else for(var i=0;i<e.length;++i)e[i].data.hook.insert(e[i])}var C=g("attrs,class,staticClass,staticStyle,key");function L(t,e,n,i){var s,a=e.tag,c=e.data,l=e.children;if(i=i||c&&c.pre,e.elm=t,o(e.isComment)&&r(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(r(c)&&(r(s=c.hook)&&r(s=s.init)&&s(e,!0),r(s=e.componentInstance)))return d(e,n),!0;if(r(a)){if(r(l))if(t.hasChildNodes())if(r(s=c)&&r(s=s.domProps)&&r(s=s.innerHTML)){if(s!==t.innerHTML)return!1}else{for(var h=!0,u=t.firstChild,f=0;f<l.length;f++){if(!u||!L(u,l[f],n,i)){h=!1;break}u=u.nextSibling}if(!h||u)return!1}else p(e,l,n);if(r(c)){var g=!1;for(var m in c)if(!C(m)){g=!0,_(e,n);break}!g&&c.class&&ie(c.class)}}else t.data!==e.text&&(t.data=e.text);return!0}return function(t,e,n,a){if(!s(e)){var c,h=!1,d=[];if(s(t))h=!0,u(e,d);else{var f=r(t.nodeType);if(!f&&ii(t,e))k(t,e,d,null,null,a);else{if(f){if(1===t.nodeType&&t.hasAttribute(j)&&(t.removeAttribute(j),n=!0),o(n)&&L(t,e,d))return B(e,d,!0),t;c=t,t=new ft(l.tagName(c).toLowerCase(),{},[],void 0,c)}var p=t.elm,g=l.parentNode(p);if(u(e,d,p._leaveCb?null:g,l.nextSibling(p)),r(e.parent))for(var _=e.parent,v=m(e);_;){for(var y=0;y<i.destroy.length;++y)i.destroy[y](_);if(_.elm=e.elm,v){for(var x=0;x<i.create.length;++x)i.create[x](ei,_);var S=_.data.hook.insert;if(S.merged)for(var C=1;C<S.fns.length;C++)S.fns[C]()}else ti(_);_=_.parent}r(g)?b([t],0,0):r(t.tag)&&w(t)}}return B(e,d,h),e.elm}r(t)&&w(t)}}({nodeOps:Zn,modules:[gi,vi,Bi,Ei,$i,H?{create:us,activate:us,remove:function(t,e){!0!==t.data.show?cs(t,e):e()}}:{}].concat(ui)});q&&document.addEventListener("selectionchange",(function(){var t=document.activeElement;t&&t.vmodel&&ws(t,"input")}));var fs={inserted:function(t,e,n,i){"select"===n.tag?(i.elm&&!i.elm._vOptions?ce(n,"postpatch",(function(){fs.componentUpdated(t,e,n)})):ps(t,e,n.context),t._vOptions=[].map.call(t.options,_s)):("textarea"===n.tag||Kn(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",vs),t.addEventListener("compositionend",ys),t.addEventListener("change",ys),q&&(t.vmodel=!0)))},componentUpdated:function(t,e,n){if("select"===n.tag){ps(t,e,n.context);var i=t._vOptions,s=t._vOptions=[].map.call(t.options,_s);s.some((function(t,e){return!A(t,i[e])}))&&(t.multiple?e.value.some((function(t){return ms(t,s)})):e.value!==e.oldValue&&ms(e.value,s))&&ws(t,"change")}}};function ps(t,e,n){gs(t,e),(G||J)&&setTimeout((function(){gs(t,e)}),0)}function gs(t,e,n){var i=e.value,s=t.multiple;if(!s||Array.isArray(i)){for(var r,o,a=0,c=t.options.length;a<c;a++)if(o=t.options[a],s)r=M(i,_s(o))>-1,o.selected!==r&&(o.selected=r);else if(A(_s(o),i))return void(t.selectedIndex!==a&&(t.selectedIndex=a));s||(t.selectedIndex=-1)}}function ms(t,e){return e.every((function(e){return!A(e,t)}))}function _s(t){return"_value"in t?t._value:t.value}function vs(t){t.target.composing=!0}function ys(t){t.target.composing&&(t.target.composing=!1,ws(t.target,"input"))}function ws(t,e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}function bs(t){return!t.componentInstance||t.data&&t.data.transition?t:bs(t.componentInstance._vnode)}var xs={bind:function(t,e,n){var i=e.value,s=(n=bs(n)).data&&n.data.transition,r=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;i&&s?(n.data.show=!0,as(n,(function(){t.style.display=r}))):t.style.display=i?r:"none"},update:function(t,e,n){var i=e.value;!i!=!e.oldValue&&((n=bs(n)).data&&n.data.transition?(n.data.show=!0,i?as(n,(function(){t.style.display=t.__vOriginalDisplay})):cs(n,(function(){t.style.display="none"}))):t.style.display=i?t.__vOriginalDisplay:"none")},unbind:function(t,e,n,i,s){s||(t.style.display=t.__vOriginalDisplay)}},Ss={model:fs,show:xs},ks={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function Bs(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?Bs(Ye(e.children)):t}function Cs(t){var e={},n=t.$options;for(var i in n.propsData)e[i]=t[i];var s=n._parentListeners;for(var r in s)e[x(r)]=s[r];return e}function Ls(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}var Es=function(t){return t.tag||me(t)},Ts=function(t){return"show"===t.name},Ps={name:"transition",props:ks,abstract:!0,render:function(t){var e=this,n=this.$slots.default;if(n&&(n=n.filter(Es)).length){var i=this.mode,s=n[0];if(function(t){for(;t=t.parent;)if(t.data.transition)return!0}(this.$vnode))return s;var r=Bs(s);if(!r)return s;if(this._leaving)return Ls(t,s);var o="__transition-"+this._uid+"-";r.key=null==r.key?r.isComment?o+"comment":o+r.tag:a(r.key)?0===String(r.key).indexOf(o)?r.key:o+r.key:r.key;var c=(r.data||(r.data={})).transition=Cs(this),l=this._vnode,h=Bs(l);if(r.data.directives&&r.data.directives.some(Ts)&&(r.data.show=!0),h&&h.data&&!function(t,e){return e.key===t.key&&e.tag===t.tag}(r,h)&&!me(h)&&(!h.componentInstance||!h.componentInstance._vnode.isComment)){var u=h.data.transition=E({},c);if("out-in"===i)return this._leaving=!0,ce(u,"afterLeave",(function(){e._leaving=!1,e.$forceUpdate()})),Ls(t,s);if("in-out"===i){if(me(r))return l;var d,f=function(){d()};ce(c,"afterEnter",f),ce(c,"enterCancelled",f),ce(u,"delayLeave",(function(t){d=t}))}}return s}}},Rs=E({tag:String,moveClass:String},ks);function Os(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function As(t){t.data.newPos=t.elm.getBoundingClientRect()}function Ms(t){var e=t.data.pos,n=t.data.newPos,i=e.left-n.left,s=e.top-n.top;if(i||s){t.data.moved=!0;var r=t.elm.style;r.transform=r.WebkitTransform="translate("+i+"px,"+s+"px)",r.transitionDuration="0s"}}delete Rs.mode;var Is={Transition:Ps,TransitionGroup:{props:Rs,beforeMount:function(){var t=this,e=this._update;this._update=function(n,i){var s=Qe(t);t.__patch__(t._vnode,t.kept,!1,!0),t._vnode=t.kept,s(),e.call(t,n,i)}},render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),i=this.prevChildren=this.children,s=this.$slots.default||[],r=this.children=[],o=Cs(this),a=0;a<s.length;a++){var c=s[a];c.tag&&null!=c.key&&0!==String(c.key).indexOf("__vlist")&&(r.push(c),n[c.key]=c,(c.data||(c.data={})).transition=o)}if(i){for(var l=[],h=[],u=0;u<i.length;u++){var d=i[u];d.data.transition=o,d.data.pos=d.elm.getBoundingClientRect(),n[d.key]?l.push(d):h.push(d)}this.kept=t(e,null,l),this.removed=h}return t(e,null,r)},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(Os),t.forEach(As),t.forEach(Ms),this._reflow=document.body.offsetHeight,t.forEach((function(t){if(t.data.moved){var n=t.elm,i=n.style;ts(n,e),i.transform=i.WebkitTransform=i.transitionDuration="",n.addEventListener(qi,n._moveCb=function t(i){i&&i.target!==n||i&&!/transform$/.test(i.propertyName)||(n.removeEventListener(qi,t),n._moveCb=null,es(n,e))})}})))},methods:{hasMove:function(t,e){if(!Ui)return!1;if(this._hasMove)return this._hasMove;var n=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach((function(t){zi(n,t)})),Fi(n,e),n.style.display="none",this.$el.appendChild(n);var i=ss(n);return this.$el.removeChild(n),this._hasMove=i.hasTransform}}}};Cn.config.mustUseProp=function(t,e,n){return"value"===n&&In(t)&&"button"!==e||"selected"===n&&"option"===t||"checked"===n&&"input"===t||"muted"===n&&"video"===t},Cn.config.isReservedTag=qn,Cn.config.isReservedAttr=Mn,Cn.config.getTagNamespace=function(t){return Gn(t)?"svg":"math"===t?"math":void 0},Cn.config.isUnknownElement=function(t){if(!H)return!0;if(qn(t))return!1;if(t=t.toLowerCase(),null!=Jn[t])return Jn[t];var e=document.createElement(t);return t.indexOf("-")>-1?Jn[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:Jn[t]=/HTMLUnknownElement/.test(e.toString())},E(Cn.options.directives,Ss),E(Cn.options.components,Is),Cn.prototype.__patch__=H?ds:P,Cn.prototype.$mount=function(t,e){return function(t,e,n){var i;return t.$el=e,t.$options.render||(t.$options.render=gt),sn(t,"beforeMount"),i=function(){t._update(t._render(),n)},new mn(t,i,P,{before:function(){t._isMounted&&!t._isDestroyed&&sn(t,"beforeUpdate")}},!0),n=!1,null==t.$vnode&&(t._isMounted=!0,sn(t,"mounted")),t}(this,t=t&&H?function(t){return"string"==typeof t?document.querySelector(t)||document.createElement("div"):t}(t):void 0,e)},H&&setTimeout((function(){$.devtools&&it&&it.emit("init",Cn)}),0);const js=Cn;function Ds(t){const e=document.createElement("canvas"),n=e.getContext("2d"),{width:i,height:s,left:r,top:o}=t.getBoundingClientRect();e.style.width=i+"px",e.style.height=s+"px",e.style.userSelect="none";const a=window.devicePixelRatio;return e.width=Math.floor(i*a),e.height=Math.floor(s*a),t&&(t.style.position="relative",t.style.overflow="hidden",t.append(e)),{canvas:e,width:i,height:s,raw_width:e.width,raw_height:e.height,left:r,top:o,ctx:n,scale:a}}const Vs=document.createElement("canvas");Vs.width=1,Vs.height=1;const $s=Vs.getContext("2d"),Ns=window.devicePixelRatio;function Fs(t){$s.clearRect(0,0,5,5),$s.save(),t($s),$s.restore(),$s.clearRect(0,0,5,5)}function zs(t,e){const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);function i(){console.log("devicePixelRatio changed: "+window.devicePixelRatio),t(window.devicePixelRatio),zs(t,e)}e((()=>{console.log("remove devicePixelRatio event handler"),n.removeEventListener("change",i,{once:!0})})),n.addEventListener("change",i,{once:!0})}$s.scale(Ns,Ns);const{abs:Ws,cos:Hs,sin:Us,acos:Xs,atan2:Ys,sqrt:Gs,pow:qs}=Math;function Js(t){return t<0?-qs(-t,1/3):qs(t,1/3)}const Ks=Math.PI,Zs=2*Ks,Qs=Ks/2,tr=Number.MAX_SAFE_INTEGER||9007199254740991,er=Number.MIN_SAFE_INTEGER||-9007199254740991,nr={x:0,y:0,z:0},ir={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(t,e){const n=e(t);let i=n.x*n.x+n.y*n.y;return void 0!==n.z&&(i+=n.z*n.z),Gs(i)},compute:function(t,e,n){if(0===t)return e[0].t=0,e[0];const i=e.length-1;if(1===t)return e[i].t=1,e[i];const s=1-t;let r=e;if(0===i)return e[0].t=t,e[0];if(1===i){const e={x:s*r[0].x+t*r[1].x,y:s*r[0].y+t*r[1].y,t};return n&&(e.z=s*r[0].z+t*r[1].z),e}if(i<4){let e,o,a,c=s*s,l=t*t,h=0;2===i?(r=[r[0],r[1],r[2],nr],e=c,o=s*t*2,a=l):3===i&&(e=c*s,o=c*t*3,a=s*l*3,h=t*l);const u={x:e*r[0].x+o*r[1].x+a*r[2].x+h*r[3].x,y:e*r[0].y+o*r[1].y+a*r[2].y+h*r[3].y,t};return n&&(u.z=e*r[0].z+o*r[1].z+a*r[2].z+h*r[3].z),u}const o=JSON.parse(JSON.stringify(e));for(;o.length>1;){for(let e=0;e<o.length-1;e++)o[e]={x:o[e].x+(o[e+1].x-o[e].x)*t,y:o[e].y+(o[e+1].y-o[e].y)*t},void 0!==o[e].z&&(o[e]=o[e].z+(o[e+1].z-o[e].z)*t);o.splice(o.length-1,1)}return o[0].t=t,o[0]},computeWithRatios:function(t,e,n,i){const s=1-t,r=n,o=e;let a,c=r[0],l=r[1],h=r[2],u=r[3];return c*=s,l*=t,2===o.length?(a=c+l,{x:(c*o[0].x+l*o[1].x)/a,y:(c*o[0].y+l*o[1].y)/a,z:!!i&&(c*o[0].z+l*o[1].z)/a,t}):(c*=s,l*=2*s,h*=t*t,3===o.length?(a=c+l+h,{x:(c*o[0].x+l*o[1].x+h*o[2].x)/a,y:(c*o[0].y+l*o[1].y+h*o[2].y)/a,z:!!i&&(c*o[0].z+l*o[1].z+h*o[2].z)/a,t}):(c*=s,l*=1.5*s,h*=3*s,u*=t*t*t,4===o.length?(a=c+l+h+u,{x:(c*o[0].x+l*o[1].x+h*o[2].x+u*o[3].x)/a,y:(c*o[0].y+l*o[1].y+h*o[2].y+u*o[3].y)/a,z:!!i&&(c*o[0].z+l*o[1].z+h*o[2].z+u*o[3].z)/a,t}):void 0))},derive:function(t,e){const n=[];for(let i=t,s=i.length,r=s-1;s>1;s--,r--){const t=[];for(let n,s=0;s<r;s++)n={x:r*(i[s+1].x-i[s].x),y:r*(i[s+1].y-i[s].y)},e&&(n.z=r*(i[s+1].z-i[s].z)),t.push(n);n.push(t),i=t}return n},between:function(t,e,n){return e<=t&&t<=n||ir.approximately(t,e)||ir.approximately(t,n)},approximately:function(t,e,n){return Ws(t-e)<=(n||1e-6)},length:function(t){const e=ir.Tvalues.length;let n=0;for(let i,s=0;s<e;s++)i=.5*ir.Tvalues[s]+.5,n+=ir.Cvalues[s]*ir.arcfn(i,t);return.5*n},map:function(t,e,n,i,s){return i+(t-e)/(n-e)*(s-i)},lerp:function(t,e,n){const i={x:e.x+t*(n.x-e.x),y:e.y+t*(n.y-e.y)};return void 0!==e.z&&void 0!==n.z&&(i.z=e.z+t*(n.z-e.z)),i},pointToString:function(t){let e=t.x+"/"+t.y;return void 0!==t.z&&(e+="/"+t.z),e},pointsToString:function(t){return"["+t.map(ir.pointToString).join(", ")+"]"},copy:function(t){return JSON.parse(JSON.stringify(t))},angle:function(t,e,n){const i=e.x-t.x,s=e.y-t.y,r=n.x-t.x,o=n.y-t.y;return Ys(i*o-s*r,i*r+s*o)},round:function(t,e){const n=""+t,i=n.indexOf(".");return parseFloat(n.substring(0,i+1+e))},dist:function(t,e){const n=t.x-e.x,i=t.y-e.y;return Gs(n*n+i*i)},closest:function(t,e){let n,i,s=qs(2,63);return t.forEach((function(t,r){i=ir.dist(e,t),i<s&&(s=i,n=r)})),{mdist:s,mpos:n}},abcratio:function(t,e){if(2!==e&&3!==e)return!1;if(void 0===t)t=.5;else if(0===t||1===t)return t;const n=qs(t,e)+qs(1-t,e);return Ws((n-1)/n)},projectionratio:function(t,e){if(2!==e&&3!==e)return!1;if(void 0===t)t=.5;else if(0===t||1===t)return t;const n=qs(1-t,e);return n/(qs(t,e)+n)},lli8:function(t,e,n,i,s,r,o,a){const c=(t-n)*(r-a)-(e-i)*(s-o);return 0!=c&&{x:((t*i-e*n)*(s-o)-(t-n)*(s*a-r*o))/c,y:((t*i-e*n)*(r-a)-(e-i)*(s*a-r*o))/c}},lli4:function(t,e,n,i){const s=t.x,r=t.y,o=e.x,a=e.y,c=n.x,l=n.y,h=i.x,u=i.y;return ir.lli8(s,r,o,a,c,l,h,u)},lli:function(t,e){return ir.lli4(t,t.c,e,e.c)},makeline:function(t,e){const n=t.x,i=t.y,s=e.x,r=e.y,o=(s-n)/3,a=(r-i)/3;return new fr(n,i,n+o,i+a,n+2*o,i+2*a,s,r)},findbbox:function(t){let e=tr,n=tr,i=er,s=er;return t.forEach((function(t){const r=t.bbox();e>r.x.min&&(e=r.x.min),n>r.y.min&&(n=r.y.min),i<r.x.max&&(i=r.x.max),s<r.y.max&&(s=r.y.max)})),{x:{min:e,mid:(e+i)/2,max:i,size:i-e},y:{min:n,mid:(n+s)/2,max:s,size:s-n}}},shapeintersections:function(t,e,n,i,s){if(!ir.bboxoverlap(e,i))return[];const r=[],o=[t.startcap,t.forward,t.back,t.endcap],a=[n.startcap,n.forward,n.back,n.endcap];return o.forEach((function(e){e.virtual||a.forEach((function(i){if(i.virtual)return;const o=e.intersects(i,s);o.length>0&&(o.c1=e,o.c2=i,o.s1=t,o.s2=n,r.push(o))}))})),r},makeshape:function(t,e,n){const i=e.points.length,s=t.points.length,r=ir.makeline(e.points[i-1],t.points[0]),o=ir.makeline(t.points[s-1],e.points[0]),a={startcap:r,forward:t,back:e,endcap:o,bbox:ir.findbbox([r,t,e,o]),intersections:function(t){return ir.shapeintersections(a,a.bbox,t,t.bbox,n)}};return a},getminmax:function(t,e,n){if(!n)return{min:0,max:0};let i,s,r=tr,o=er;-1===n.indexOf(0)&&(n=[0].concat(n)),-1===n.indexOf(1)&&n.push(1);for(let a=0,c=n.length;a<c;a++)i=n[a],s=t.get(i),s[e]<r&&(r=s[e]),s[e]>o&&(o=s[e]);return{min:r,mid:(r+o)/2,max:o,size:o-r}},align:function(t,e){const n=e.p1.x,i=e.p1.y,s=-Ys(e.p2.y-i,e.p2.x-n);return t.map((function(t){return{x:(t.x-n)*Hs(s)-(t.y-i)*Us(s),y:(t.x-n)*Us(s)+(t.y-i)*Hs(s)}}))},roots:function(t,e){e=e||{p1:{x:0,y:0},p2:{x:1,y:0}};const n=t.length-1,i=ir.align(t,e),s=function(t){return 0<=t&&t<=1};if(2===n){const t=i[0].y,e=i[1].y,n=i[2].y,r=t-2*e+n;if(0!==r){const i=-Gs(e*e-t*n),o=-t+e;return[-(i+o)/r,-(-i+o)/r].filter(s)}return e!==n&&0===r?[(2*e-n)/(2*e-2*n)].filter(s):[]}const r=i[0].y,o=i[1].y,a=i[2].y;let c=3*o-r-3*a+i[3].y,l=3*r-6*o+3*a,h=-3*r+3*o,u=r;if(ir.approximately(c,0)){if(ir.approximately(l,0))return ir.approximately(h,0)?[]:[-u/h].filter(s);const t=Gs(h*h-4*l*u),e=2*l;return[(t-h)/e,(-h-t)/e].filter(s)}l/=c,h/=c,u/=c;const d=(3*h-l*l)/3,f=d/3,p=(2*l*l*l-9*l*h+27*u)/27,g=p/2,m=g*g+f*f*f;let _,v,y,w,b;if(m<0){const t=-d/3,e=Gs(t*t*t),n=-p/(2*e),i=Xs(n<-1?-1:n>1?1:n),r=2*Js(e);return y=r*Hs(i/3)-l/3,w=r*Hs((i+Zs)/3)-l/3,b=r*Hs((i+2*Zs)/3)-l/3,[y,w,b].filter(s)}if(0===m)return _=g<0?Js(-g):-Js(g),y=2*_-l/3,w=-_-l/3,[y,w].filter(s);{const t=Gs(m);return _=Js(-g+t),v=Js(g+t),[_-v-l/3].filter(s)}},droots:function(t){if(3===t.length){const e=t[0],n=t[1],i=t[2],s=e-2*n+i;if(0!==s){const t=-Gs(n*n-e*i),r=-e+n;return[-(t+r)/s,-(-t+r)/s]}return n!==i&&0===s?[(2*n-i)/(2*(n-i))]:[]}if(2===t.length){const e=t[0],n=t[1];return e!==n?[e/(e-n)]:[]}return[]},curvature:function(t,e,n,i,s){let r,o,a,c,l=0,h=0;const u=ir.compute(t,e),d=ir.compute(t,n),f=u.x*u.x+u.y*u.y;if(i?(r=Gs(qs(u.y*d.z-d.y*u.z,2)+qs(u.z*d.x-d.z*u.x,2)+qs(u.x*d.y-d.x*u.y,2)),o=qs(f+u.z*u.z,1.5)):(r=u.x*d.y-u.y*d.x,o=qs(f,1.5)),0===r||0===o)return{k:0,r:0};if(l=r/o,h=o/r,!s){const s=ir.curvature(t-.001,e,n,i,!0).k,r=ir.curvature(t+.001,e,n,i,!0).k;c=(r-l+(l-s))/2,a=(Ws(r-l)+Ws(l-s))/2}return{k:l,r:h,dk:c,adk:a}},inflections:function(t){if(t.length<4)return[];const e=ir.align(t,{p1:t[0],p2:t.slice(-1)[0]}),n=e[2].x*e[1].y,i=e[3].x*e[1].y,s=e[1].x*e[2].y,r=18*(-3*n+2*i+3*s-e[3].x*e[2].y),o=18*(3*n-i-3*s),a=18*(s-n);if(ir.approximately(r,0)){if(!ir.approximately(o,0)){let t=-a/o;if(0<=t&&t<=1)return[t]}return[]}const c=o*o-4*r*a,l=Math.sqrt(c),h=2*r;return ir.approximately(h,0)?[]:[(l-o)/h,-(o+l)/h].filter((function(t){return 0<=t&&t<=1}))},bboxoverlap:function(t,e){const n=["x","y"],i=n.length;for(let s,r,o,a,c=0;c<i;c++)if(s=n[c],r=t[s].mid,o=e[s].mid,a=(t[s].size+e[s].size)/2,Ws(r-o)>=a)return!1;return!0},expandbox:function(t,e){e.x.min<t.x.min&&(t.x.min=e.x.min),e.y.min<t.y.min&&(t.y.min=e.y.min),e.z&&e.z.min<t.z.min&&(t.z.min=e.z.min),e.x.max>t.x.max&&(t.x.max=e.x.max),e.y.max>t.y.max&&(t.y.max=e.y.max),e.z&&e.z.max>t.z.max&&(t.z.max=e.z.max),t.x.mid=(t.x.min+t.x.max)/2,t.y.mid=(t.y.min+t.y.max)/2,t.z&&(t.z.mid=(t.z.min+t.z.max)/2),t.x.size=t.x.max-t.x.min,t.y.size=t.y.max-t.y.min,t.z&&(t.z.size=t.z.max-t.z.min)},pairiteration:function(t,e,n){const i=t.bbox(),s=e.bbox(),r=1e5,o=n||.5;if(i.x.size+i.y.size<o&&s.x.size+s.y.size<o)return[(r*(t._t1+t._t2)/2|0)/r+"/"+(r*(e._t1+e._t2)/2|0)/r];let a=t.split(.5),c=e.split(.5),l=[{left:a.left,right:c.left},{left:a.left,right:c.right},{left:a.right,right:c.right},{left:a.right,right:c.left}];l=l.filter((function(t){return ir.bboxoverlap(t.left.bbox(),t.right.bbox())}));let h=[];return 0===l.length||(l.forEach((function(t){h=h.concat(ir.pairiteration(t.left,t.right,o))})),h=h.filter((function(t,e){return h.indexOf(t)===e}))),h},getccenter:function(t,e,n){const i=e.x-t.x,s=e.y-t.y,r=n.x-e.x,o=n.y-e.y,a=i*Hs(Qs)-s*Us(Qs),c=i*Us(Qs)+s*Hs(Qs),l=r*Hs(Qs)-o*Us(Qs),h=r*Us(Qs)+o*Hs(Qs),u=(t.x+e.x)/2,d=(t.y+e.y)/2,f=(e.x+n.x)/2,p=(e.y+n.y)/2,g=u+a,m=d+c,_=f+l,v=p+h,y=ir.lli8(u,d,g,m,f,p,_,v),w=ir.dist(y,t);let b,x=Ys(t.y-y.y,t.x-y.x),S=Ys(e.y-y.y,e.x-y.x),k=Ys(n.y-y.y,n.x-y.x);return x<k?((x>S||S>k)&&(x+=Zs),x>k&&(b=k,k=x,x=b)):k<S&&S<x?(b=k,k=x,x=b):k+=Zs,y.s=x,y.e=k,y.r=w,y},numberSort:function(t,e){return t-e}};class sr{constructor(t){this.curves=[],this._3d=!1,t&&(this.curves=t,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map((function(t){return ir.pointsToString(t.points)})).join(", ")+"]"}addCurve(t){this.curves.push(t),this._3d=this._3d||t._3d}length(){return this.curves.map((function(t){return t.length()})).reduce((function(t,e){return t+e}))}curve(t){return this.curves[t]}bbox(){const t=this.curves;for(var e=t[0].bbox(),n=1;n<t.length;n++)ir.expandbox(e,t[n].bbox());return e}offset(t){const e=[];return this.curves.forEach((function(n){e.push(...n.offset(t))})),new sr(e)}}const{abs:rr,min:or,max:ar,cos:cr,sin:lr,acos:hr,sqrt:ur}=Math,dr=Math.PI;class fr{constructor(t){let e=t&&t.forEach?t:Array.from(arguments).slice(),n=!1;if("object"==typeof e[0]){n=e.length;const t=[];e.forEach((function(e){["x","y","z"].forEach((function(n){void 0!==e[n]&&t.push(e[n])}))})),e=t}let i=!1;const s=e.length;if(n){if(n>4){if(1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");i=!0}}else if(6!==s&&8!==s&&9!==s&&12!==s&&1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const r=this._3d=!i&&(9===s||12===s)||t&&t[0]&&void 0!==t[0].z,o=this.points=[];for(let t=0,n=r?3:2;t<s;t+=n){var a={x:e[t],y:e[t+1]};r&&(a.z=e[t+2]),o.push(a)}const c=this.order=o.length-1,l=this.dims=["x","y"];r&&l.push("z"),this.dimlen=l.length;const h=ir.align(o,{p1:o[0],p2:o[c]});this._linear=!h.some((t=>rr(t.y)>1e-4)),this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(t,e,n,i){if(void 0===i&&(i=.5),0===i)return new fr(e,e,n);if(1===i)return new fr(t,e,e);const s=fr.getABC(2,t,e,n,i);return new fr(t,s.A,n)}static cubicFromPoints(t,e,n,i,s){void 0===i&&(i=.5);const r=fr.getABC(3,t,e,n,i);void 0===s&&(s=ir.dist(e,r.C));const o=s*(1-i)/i,a=ir.dist(t,n),c=(n.x-t.x)/a,l=(n.y-t.y)/a,h=s*c,u=s*l,d=o*c,f=o*l,p=e.x-h,g=e.y-u,m=e.x+d,_=e.y+f,v=r.A,y=v.x+(p-v.x)/(1-i),w=v.y+(g-v.y)/(1-i),b=v.x+(m-v.x)/i,x=v.y+(_-v.y)/i,S={x:t.x+(y-t.x)/i,y:t.y+(w-t.y)/i},k={x:n.x+(b-n.x)/(1-i),y:n.y+(x-n.y)/(1-i)};return new fr(t,S,k,n)}static getUtils(){return ir}getUtils(){return fr.getUtils()}static get PolyBezier(){return sr}valueOf(){return this.toString()}toString(){return ir.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const t=this.points,e=["M",t[0].x,t[0].y,2===this.order?"Q":"C"];for(let n=1,i=t.length;n<i;n++)e.push(t[n].x),e.push(t[n].y);return e.join(" ")}setRatios(t){if(t.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=t,this._lut=[]}verify(){const t=this.coordDigest();t!==this._print&&(this._print=t,this.update())}coordDigest(){return this.points.map((function(t,e){return""+e+t.x+t.y+(t.z?t.z:0)})).join("")}update(){this._lut=[],this.dpoints=ir.derive(this.points,this._3d),this.computedirection()}computedirection(){const t=this.points,e=ir.angle(t[0],t[this.order],t[1]);this.clockwise=e>0}length(){return ir.length(this.derivative.bind(this))}static getABC(t=2,e,n,i,s=.5){const r=ir.projectionratio(s,t),o=1-r,a={x:r*e.x+o*i.x,y:r*e.y+o*i.y},c=ir.abcratio(s,t);return{A:{x:n.x+(n.x-a.x)/c,y:n.y+(n.y-a.y)/c},B:n,C:a,S:e,E:i}}getABC(t,e){e=e||this.get(t);let n=this.points[0],i=this.points[this.order];return fr.getABC(this.order,n,e,i,t)}getLUT(t){if(this.verify(),t=t||100,this._lut.length===t)return this._lut;this._lut=[],t--;for(let e,n,i=0;i<t;i++)n=i/(t-1),e=this.compute(n),e.t=n,this._lut.push(e);return this._lut}on(e,n){n=n||5;const i=this.getLUT(),s=[];for(let t,r=0,o=0;r<i.length;r++)t=i[r],ir.dist(t,e)<n&&(s.push(t),o+=r/i.length);return!!s.length&&(t/=s.length)}project(t){const e=this.getLUT(),n=e.length-1,i=ir.closest(e,t),s=i.mpos,r=(s-1)/n,o=(s+1)/n,a=.1/n;let c,l,h=i.mdist,u=r,d=u;for(h+=1;u<o+a;u+=a)c=this.compute(u),l=ir.dist(t,c),l<h&&(h=l,d=u);return d=d<0?0:d>1?1:d,c=this.compute(d),c.t=d,c.d=h,c}get(t){return this.compute(t)}point(t){return this.points[t]}compute(t){return this.ratios?ir.computeWithRatios(t,this.points,this.ratios,this._3d):ir.compute(t,this.points,this._3d,this.ratios)}raise(){const t=this.points,e=[t[0]],n=t.length;for(let i,s,r=1;r<n;r++)i=t[r],s=t[r-1],e[r]={x:(n-r)/n*i.x+r/n*s.x,y:(n-r)/n*i.y+r/n*s.y};return e[n]=t[n-1],new fr(e)}derivative(t){return ir.compute(t,this.dpoints[0],this._3d)}dderivative(t){return ir.compute(t,this.dpoints[1],this._3d)}align(){let t=this.points;return new fr(ir.align(t,{p1:t[0],p2:t[t.length-1]}))}curvature(t){return ir.curvature(t,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return ir.inflections(this.points)}normal(t){return this._3d?this.__normal3(t):this.__normal2(t)}__normal2(t){const e=this.derivative(t),n=ur(e.x*e.x+e.y*e.y);return{x:-e.y/n,y:e.x/n}}__normal3(t){const e=this.derivative(t),n=this.derivative(t+.01),i=ur(e.x*e.x+e.y*e.y+e.z*e.z),s=ur(n.x*n.x+n.y*n.y+n.z*n.z);e.x/=i,e.y/=i,e.z/=i,n.x/=s,n.y/=s,n.z/=s;const r={x:n.y*e.z-n.z*e.y,y:n.z*e.x-n.x*e.z,z:n.x*e.y-n.y*e.x},o=ur(r.x*r.x+r.y*r.y+r.z*r.z);r.x/=o,r.y/=o,r.z/=o;const a=[r.x*r.x,r.x*r.y-r.z,r.x*r.z+r.y,r.x*r.y+r.z,r.y*r.y,r.y*r.z-r.x,r.x*r.z-r.y,r.y*r.z+r.x,r.z*r.z];return{x:a[0]*e.x+a[1]*e.y+a[2]*e.z,y:a[3]*e.x+a[4]*e.y+a[5]*e.z,z:a[6]*e.x+a[7]*e.y+a[8]*e.z}}hull(t){let e=this.points,n=[],i=[],s=0;for(i[s++]=e[0],i[s++]=e[1],i[s++]=e[2],3===this.order&&(i[s++]=e[3]);e.length>1;){n=[];for(let r,o=0,a=e.length-1;o<a;o++)r=ir.lerp(t,e[o],e[o+1]),i[s++]=r,n.push(r);e=n}return i}split(t,e){if(0===t&&e)return this.split(e).left;if(1===e)return this.split(t).right;const n=this.hull(t),i={left:2===this.order?new fr([n[0],n[3],n[5]]):new fr([n[0],n[4],n[7],n[9]]),right:2===this.order?new fr([n[5],n[4],n[2]]):new fr([n[9],n[8],n[6],n[3]]),span:n};return i.left._t1=ir.map(0,0,1,this._t1,this._t2),i.left._t2=ir.map(t,0,1,this._t1,this._t2),i.right._t1=ir.map(t,0,1,this._t1,this._t2),i.right._t2=ir.map(1,0,1,this._t1,this._t2),e?(e=ir.map(e,t,1,0,1),i.right.split(e).left):i}extrema(){const t={};let e=[];return this.dims.forEach(function(n){let i=function(t){return t[n]},s=this.dpoints[0].map(i);t[n]=ir.droots(s),3===this.order&&(s=this.dpoints[1].map(i),t[n]=t[n].concat(ir.droots(s))),t[n]=t[n].filter((function(t){return t>=0&&t<=1})),e=e.concat(t[n].sort(ir.numberSort))}.bind(this)),t.values=e.sort(ir.numberSort).filter((function(t,n){return e.indexOf(t)===n})),t}bbox(){const t=this.extrema(),e={};return this.dims.forEach(function(n){e[n]=ir.getminmax(this,n,t[n])}.bind(this)),e}overlaps(t){const e=this.bbox(),n=t.bbox();return ir.bboxoverlap(e,n)}offset(t,e){if(void 0!==e){const n=this.get(t),i=this.normal(t),s={c:n,n:i,x:n.x+i.x*e,y:n.y+i.y*e};return this._3d&&(s.z=n.z+i.z*e),s}if(this._linear){const e=this.normal(0),n=this.points.map((function(n){const i={x:n.x+t*e.x,y:n.y+t*e.y};return n.z&&e.z&&(i.z=n.z+t*e.z),i}));return[new fr(n)]}return this.reduce().map((function(e){return e._linear?e.offset(t)[0]:e.scale(t)}))}simple(){if(3===this.order){const t=ir.angle(this.points[0],this.points[3],this.points[1]),e=ir.angle(this.points[0],this.points[3],this.points[2]);if(t>0&&e<0||t<0&&e>0)return!1}const t=this.normal(0),e=this.normal(1);let n=t.x*e.x+t.y*e.y;return this._3d&&(n+=t.z*e.z),rr(hr(n))<dr/3}reduce(){let t,e,n=0,i=0,s=.01,r=[],o=[],a=this.extrema().values;for(-1===a.indexOf(0)&&(a=[0].concat(a)),-1===a.indexOf(1)&&a.push(1),n=a[0],t=1;t<a.length;t++)i=a[t],e=this.split(n,i),e._t1=n,e._t2=i,r.push(e),n=i;return r.forEach((function(t){for(n=0,i=0;i<=1;)for(i=n+s;i<=1.01;i+=s)if(e=t.split(n,i),!e.simple()){if(i-=s,rr(n-i)<s)return[];e=t.split(n,i),e._t1=ir.map(n,0,1,t._t1,t._t2),e._t2=ir.map(i,0,1,t._t1,t._t2),o.push(e),n=i;break}n<1&&(e=t.split(n,1),e._t1=ir.map(n,0,1,t._t1,t._t2),e._t2=t._t2,o.push(e))})),o}scale(t){const e=this.order;let n=!1;if("function"==typeof t&&(n=t),n&&2===e)return this.raise().scale(n);const i=this.clockwise,s=n?n(0):t,r=n?n(1):t,o=[this.offset(0,10),this.offset(1,10)],a=this.points,c=[],l=ir.lli4(o[0],o[0].c,o[1],o[1].c);if(!l)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach((function(t){const n=c[t*e]=ir.copy(a[t*e]);n.x+=(t?r:s)*o[t].n.x,n.y+=(t?r:s)*o[t].n.y})),n?([0,1].forEach((function(s){if(2!==e||!s){var r=a[s+1],o={x:r.x-l.x,y:r.y-l.y},h=n?n((s+1)/e):t;n&&!i&&(h=-h);var u=ur(o.x*o.x+o.y*o.y);o.x/=u,o.y/=u,c[s+1]={x:r.x+h*o.x,y:r.y+h*o.y}}})),new fr(c)):([0,1].forEach((t=>{if(2===e&&t)return;const n=c[t*e],i=this.derivative(t),s={x:n.x+i.x,y:n.y+i.y};c[t+1]=ir.lli4(n,s,l,a[t+1])})),new fr(c))}outline(t,e,n,i){e=void 0===e?t:e;const s=this.reduce(),r=s.length,o=[];let a,c=[],l=0,h=this.length();const u=void 0!==n&&void 0!==i;function d(t,e,n,i,s){return function(r){const o=i/n,a=(i+s)/n,c=e-t;return ir.map(r,0,1,t+o*c,t+a*c)}}s.forEach((function(s){const r=s.length();u?(o.push(s.scale(d(t,n,h,l,r))),c.push(s.scale(d(-e,-i,h,l,r)))):(o.push(s.scale(t)),c.push(s.scale(-e))),l+=r})),c=c.map((function(t){return a=t.points,a[3]?t.points=[a[3],a[2],a[1],a[0]]:t.points=[a[2],a[1],a[0]],t})).reverse();const f=o[0].points[0],p=o[r-1].points[o[r-1].points.length-1],g=c[r-1].points[c[r-1].points.length-1],m=c[0].points[0],_=ir.makeline(g,f),v=ir.makeline(p,m),y=[_].concat(o).concat([v]).concat(c);return y.length,new sr(y)}outlineshapes(t,e,n){e=e||t;const i=this.outline(t,e).curves,s=[];for(let t=1,e=i.length;t<e/2;t++){const r=ir.makeshape(i[t],i[e-t],n);r.startcap.virtual=t>1,r.endcap.virtual=t<e/2-1,s.push(r)}return s}intersects(t,e){return t?t.p1&&t.p2?this.lineIntersects(t):(t instanceof fr&&(t=t.reduce()),this.curveintersects(this.reduce(),t,e)):this.selfintersects(e)}lineIntersects(t){const e=or(t.p1.x,t.p2.x),n=or(t.p1.y,t.p2.y),i=ar(t.p1.x,t.p2.x),s=ar(t.p1.y,t.p2.y);return ir.roots(this.points,t).filter((t=>{var r=this.get(t);return ir.between(r.x,e,i)&&ir.between(r.y,n,s)}))}selfintersects(t){const e=this.reduce(),n=e.length-2,i=[];for(let s,r,o,a=0;a<n;a++)r=e.slice(a,a+1),o=e.slice(a+2),s=this.curveintersects(r,o,t),i.push(...s);return i}curveintersects(t,e,n){const i=[];t.forEach((function(t){e.forEach((function(e){t.overlaps(e)&&i.push({left:t,right:e})}))}));let s=[];return i.forEach((function(t){const e=ir.pairiteration(t.left,t.right,n);e.length>0&&(s=s.concat(e))})),s}arcs(t){return t=t||.5,this._iterate(t,[])}_error(t,e,n,i){const s=(i-n)/4,r=this.get(n+s),o=this.get(i-s),a=ir.dist(t,e),c=ir.dist(t,r),l=ir.dist(t,o);return rr(c-a)+rr(l-a)}_iterate(t,e){let n,i=0,s=1;do{n=0,s=1;let r,o,a,c,l,h=this.get(i),u=!1,d=!1,f=s,p=1,g=0;do{if(d=u,c=a,f=(i+s)/2,g++,r=this.get(f),o=this.get(s),a=ir.getccenter(h,r,o),a.interval={start:i,end:s},u=this._error(a,h,i,s)<=t,l=d&&!u,l||(p=s),u){if(s>=1){if(a.interval.end=p=1,c=a,s>1){let t={x:a.x+a.r*cr(a.e),y:a.y+a.r*lr(a.e)};a.e+=ir.angle({x:a.x,y:a.y},t,this.get(1))}break}s+=(s-i)/2}else s=f}while(!l&&n++<100);if(n>=100)break;c=c||a,e.push(c),i=p}while(s<1);return e}}const pr={RIGHT:0,BOTTOM:1,LEFT:2,TOP:3,SELF:100},gr={DEFAULT:"DEFAULT",LINKING:"LINKING"};function mr(t){if(0===t.length)return{width:1,height:1,x:0,y:0};let e=1/0,n=1/0,i=-1/0,s=-1/0;for(let r in t){const o=t[r];o[0]<e&&(e=o[0]),o[0]>i&&(i=o[0]),o[1]<n&&(n=o[1]),o[1]>s&&(s=o[1])}return{width:Math.max(i-e,10),height:Math.max(s-n,10),x:e,y:n}}function _r(t){return t*t}function vr(t,e){return _r(t[0]-e[0])+_r(t[1]-e[1])}function yr(t,e,n){const i=vr(e,n);if(0===i)return vr(t,e);let s=((t[0]-e[0])*(n[0]-e[0])+(t[1]-e[1])*(n[1]-e[1]))/i;return s=Math.max(0,Math.min(1,s)),vr(t,[e[0]+s*(n[0]-e[0]),e[1]+s*(n[1]-e[1])])}function wr(t,e){const n={fromDir:null,fromP:null,toDir:null,toP:null,distMin:1/0};return Object.keys(t).forEach((i=>{if(+i===pr.SELF)return;let s=t[i];Object.keys(e).forEach((t=>{if(+t===pr.SELF)return;let r=e[t];const o=vr(s,r);o<n.distMin&&Object.assign(n,{distMin:o,fromDir:+i,fromP:s,toDir:+t,toP:r})}))})),n}function br(t,e,n,i){return e===pr.TOP?[t[0],t[1]-i]:e===pr.BOTTOM?[t[0],t[1]+i]:e===pr.LEFT?[t[0]-n,t[1]]:e===pr.RIGHT?[t[0]+n,t[1]]:void 0}function xr(t,e,n=pr.TOP,i=pr.TOP,s=0,r=0){const o=Math.max(Math.abs((t[0]-e[0])/2),s),a=Math.max(Math.abs((t[1]-e[1])/2),r),c=br(t,n,o,a),l=br(e,i,o,a),h=[pr.TOP,pr.LEFT].includes(i)?-5:5,u=[pr.TOP,pr.BOTTOM].includes(i);return[...c,...l,u?e[0]:e[0]+h,u?e[1]+h:e[1]]}function Sr(t,e,n,i,s,r,o,a,c){var l=Math.pow(1-t,2)*(i-e)+2*t*(1-t)*(r-i)+t*t*(a-r),h=Math.pow(1-t,2)*(s-n)+2*t*(1-t)*(o-s)+t*t*(c-o);return-Math.atan2(l,h)+.5*Math.PI}function kr(t,e,n,i=pr.TOP,s=pr.TOP,r=10,o=10,a){const c=Math.abs(i-s),l=i===pr.TOP||i===pr.BOTTOM;switch(t.length=0,c){case 0:if(i===pr.TOP){const i=Math.min(e[1],n[1])-o;t.push([e[0],i]),t.push([n[0],i])}if(i===pr.BOTTOM){const i=Math.max(e[1],n[1])+o;t.push([e[0],i]),t.push([n[0],i])}if(i===pr.LEFT){const i=Math.min(e[0],n[0])-r;t.push([i,e[1]]),t.push([i,n[1]])}if(i===pr.RIGHT){const i=Math.max(e[0],n[0])+r;t.push([i,e[1]]),t.push([i,n[1]])}break;case 1:case 3:if(a)l?(t.push([e[0],e[1]+o]),t.push([n[0]+r,e[1]+o]),t.push([n[0]+r,n[1]])):(t.push([e[0]+r,e[1]]),t.push([e[0]+r,n[1]+o]),t.push([n[0],n[1]+o]));else{const i=l?[e[0],n[1]]:[n[0],e[1]];t.push(i)}break;case 2:const s=[(e[0]-n[0])/2+n[0],(e[1]-n[1])/2+n[1]];l?(t.push([e[0],s[1]]),t.push([n[0],s[1]])):(t.push([s[0],e[1]]),t.push([s[0],n[1]]))}t.unshift(e),t.push(n)}function Br(t,e){return[t[0]-e[0],t[1]-e[1]]}function Cr(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Lr(t,e){return[t[0]*e,t[1]*e]}function Er(t,e){return t[0]!=t[2]&&t[1]!=t[3]&&e[0]!=e[2]&&e[1]!=e[3]&&!(t[2]<=e[0]||t[3]<=e[1]||t[0]>=e[2]||t[1]>=e[3])}function Tr(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function Pr(t,e){t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]}const Rr=Symbol("ishit"),Or=Symbol("isInViewBox");class Ar extends EventTarget{constructor(t={}){super(),Object.assign(this,t),this.visible=!0,this._belongs=void 0,this[Rr]=!1,this.borderWidth=t.borderWidth||0,this.borderColor=t.borderColor||"transparent",this.backgroundColor=t.backgroundColor||"transparent",this.shadowColor=t.shadowColor,this.shadowBlur=t.shadowBlur||5,this.shadowOffsetX=t.shadowOffsetX||0,this.shadowOffsetY=t.shadowOffsetY||0,this.opacity=t.opacity||1,this._boundingrect=[0,0,0,0]}get _isTargeting(){return this===(this._jflow._target.instance||this._jflow._target.link)}get _isMoving(){return this===this._jflow._getMovingTarget()&&this._jflow._target.status.movingState}get _isHit(){return this[Rr]}get _jflow(){return"jflow"===this._belongs.uniqueName?this._belongs:this._belongs._jflow}set _isHit(t){this[Rr]!==t&&this.dispatchEvent(new CustomEvent(t?"mouseenter":"mouseleave",{detail:{instance:this,jflow:this._jflow}})),this[Rr]=t}get isInViewBox(){return this[Or]}set _isInViewBox(t){t!==this[Or]&&(t?this.onEnterViewbox():this.onLeaveViewbox()),this[Or]=t}onEnterViewbox(){}onLeaveViewbox(){}setConfig(t){Object.keys(t).forEach((e=>{void 0!==t[e]&&null!==t[e]&&(this[e]=t[e])}))}render(t){throw"require render implement"}isHit(t){throw"require isHit implement"}getBoundingRect(){throw"require getBoundingRect implement"}calculateIntersection(){throw"require calculateIntersection implement"}getIntersectionsInFourDimension(){throw"require getIntersectionsInFourDimension implement"}getCenter(){return this.anchor}getBoundingDimension(){const t=instance.getBoundingRect();let e=1/0,n=-1/0,i=1/0,s=-1/0;return t.forEach((t=>{n=Math.max(n,t[1]),e=Math.min(e,t[1]),s=Math.max(s,t[0]),i=Math.min(i,t[0])})),{height:n-e,width:s-i}}bubbleEvent(t){t.detail.currentTarget=this,this.dispatchEvent(t),t.detail.bubbles&&(this._belongs.bubbleEvent?this._belongs.bubbleEvent(t):this._belongs.dispatchEvent(t))}calculateToRealWorld(t){return this._belongs&&this._belongs.calculateToRealWorld?this._belongs.calculateToRealWorld(t):t}calculateToRealWorldWithScalar(t){return this._jflow.scale*t}recalculateUp(){this.belongs&&this.belongs.recalculateUp()}destroy(){}}const Mr=Ar,Ir=class extends Mr{constructor(t={}){super(t),this._rawConfigs=t,this.anchor=t.anchor||[0,0],this.absolutePosition=t.absolutePosition}setConfig(t){Object.keys(t).forEach((e=>{void 0!==t[e]&&null!==t[e]&&(this[e]=t[e],this._rawConfigs[e]=t[e])}))}setAnchorX(t){this.anchor[0]=t}setAnchorY(t){this.anchor[1]=t}setAnchor(t,e){this.anchor[0]=t,this.anchor[1]=e}beforeRender(){return Er(this._belongs._getViewBox(),this.getBoundingRect())}clone(){const t=new(0,this.constructor)(this._rawConfigs);return t.visible=this.visible,t}},jr=class extends Ir{constructor(t){super(t)}render(t){}isHit(t){return!1}calculateIntersection(t){return this.anchor}getBoundingRect(){const[t,e]=this.anchor;return[t,e,t,e]}getBoundingDimension(){return{width:0,height:0}}getIntersectionsInFourDimension(){const[t,e]=this.anchor;return{[pr.RIGHT]:[t+1,e],[pr.LEFT]:[t-1,e],[pr.BOTTOM]:[t,e+1],[pr.TOP]:[t,e-1]}}};class Dr{constructor(){this._map=new WeakMap}get(t){return this._map.get(t)}set(t){const e={layoutNode:void 0,jflowNode:void 0,jflowlinks:[],jflowFromLinks:[],jflowToLinks:[]};return this._map.set(t,e),e}has(t){return this._map.has(t)}delete(t){this._map.delete(t)}clear(){this._map.clear()}}const Vr={initNodeWeakMap(){this.source_Layout_Render_NodeMap=new Dr},getRenderNodeBySource(t){const e=this.source_Layout_Render_NodeMap.get(t);if(e)return e.jflowNode},getLayoutNodeBySource(t){const e=this.source_Layout_Render_NodeMap.get(t);if(e)return e.layoutNode},getSourceRenderMeta(t){return this.source_Layout_Render_NodeMap.get(t)},_getMap(t){const e=this.source_Layout_Render_NodeMap;let n;return n=e.has(t)?e.get(t):e.set(t),n},setLayoutNodeBySource(t,e){this._getMap(t).layoutNode=e},setRenderNodeBySource(t,e){this._getMap(t).jflowNode=e},addLinkNodeBySource(t,e,n){let i=this._getMap(t);i.jflowFromLinks.push(n),i=this._getMap(e),i.jflowToLinks.push(n)},removeLinkNodeBySource(t,e,n){let i=this._getMap(t),s=i.jflowFromLinks.findIndex((t=>t===n));-1!==s&&i.jflowFromLinks.splice(s,1),i=this._getMap(e),s=i.jflowToLinks.findIndex((t=>t===n)),-1!==s&&i.jflowToLinks.splice(s,1)}},$r=class extends Array{constructor(){super(),this._currentHit=null}render(t,e){let n;this.forEach((i=>{if(i._isMoving)n=i;else if(i.visible&&(!e||e(i))){if(i.beforeRender&&!i.beforeRender(t))return;t.save(),i.render(t),t.restore()}})),n&&(t.save(),n.render(t),t.restore())}resetHitStatus(){this._currentHit=null,this.forEach((t=>{t._stack&&t._stack.resetHitStatus(),t._isHit=!1}))}checkHit(t,e,n){let i=this.length-1;for(;i>=0;){const s=this[i];if(s.visible&&!s.ignoreHit){if(e&&e(s)){i--;continue}if(n&&!n(s)){i--;continue}const r=s.isHit(t,e);if(r)return this._currentHit!==s&&(this._currentHit&&(this._currentHit._isHit=!1),s._isHit=!0,this._currentHit=s),"boolean"!=typeof r?r:s;s._isHit=!1}i--}return this._currentHit=null,null}getBoundingRectPoints(){const t=[];return this.forEach((e=>{if(e.visible&&!e.absolutePosition){const n=e.getBoundingRect();t.push([n[0],n[1]]),t.push([n[2],n[3]])}})),t}getAnchorRectPoints(){const t=[];return this.forEach((e=>{e.visible&&!e.absolutePosition&&t.push(e.anchor)})),t}},Nr={instances:[],links:[],_stack:null,_linkStack:null,initStack({data:t}){this._stack=new $r,this._linkStack=new $r,t&&(this.instances=t.instances,this.links=t.links,this.instances.forEach((t=>{this._stack.push(t),t._belongs=this})),this.links.forEach((t=>{this._linkStack.push(t),t._belongs=this})))},addToStack(t){t._belongs=this,this._stack.push(t)},replaceFromStack(t,e){const n=this._stack.findIndex((e=>e===t));this._stack.splice(n,1,e),t._belongs=null,e._belongs=this},addToLinkStack(t){t._belongs=this,this._linkStack.push(t)},removeFromStack(t){const e=this._stack.findIndex((e=>e===t));-1!==e&&this._stack.splice(e,1)},removeFromLinkStack(t){const e=this._linkStack.findIndex((e=>e===t));-1!==e&&this._linkStack.splice(e,1)},emptyLink(){this._linkStack=new $r},resetChildrenPosition(){this._stack.forEach((t=>{t.anchor=[0,0]}))},addInstanceToLink(t,e){this.addToStack(e);const{from:n,to:i}=t,s=this._linkStack.findIndex((e=>e===t)),r=t.__proto__.constructor,o=new r({from:n,to:e});o._belongs=this;const a=new r({from:e,to:i});a._belongs=this,this._linkStack.splice(s,1,o,a)},interateNodeStack(t){this._stack.forEach((e=>{t(e)}))}},Fr=Nr,zr={_layout:null,initLayout(t){this._layout=t.layout},recalculateUp(){let t=!0;if(this.getBoundingDimension){const{width:e,height:n}=this.getBoundingDimension();this.resetChildrenPosition&&this.resetChildrenPosition(),this._getBoundingGroupRect&&this._getBoundingGroupRect(),this.reflow(),this._getBoundingGroupRect&&this._getBoundingGroupRect();const{width:i,height:s}=this.getBoundingDimension();t=e!==i||n!==s}else this.reflow();this._belongs&&t&&this._belongs.recalculateUp()},recalculate(){this.reflow(),this._getBoundingGroupRect&&this._getBoundingGroupRect()},staticCheck(t){return!!this._layout&&this._layout.staticCheck(t,this)},reflow(){this._layout&&this._layout.reflow(this)}},Wr={_message:null,sendMessage(t){this._message=t},consumeMessage(){const t=this._message;return this._message=null,t},readMessage(){return this._message}},Hr={initAnime(){this.anime_queue=[],this.__animeClock__=void 0},requestJFlowAnime(t){const e=this.enqueueAnime(t);return this._runAnime(),e},enqueueAnime(t){const e={start:void 0,callback:t,cancel:()=>{this._cancelAnime(e),this._render()}};return this.anime_queue.push(e),e},_cancelAnime(t){const e=this.anime_queue.findIndex((e=>e===t));~e&&this.anime_queue.splice(e,1)},runAnime(){this._runAnime()},_runAnime(){this.anime_queue.length&&requestAnimationFrame((()=>{this.scheduleRender(),this._runAnime()}))},runAnimeFrame(){this.anime_queue.forEach((t=>{const e=Date.now();t.start||(t.start=e);const n=e-t.start;t.callback(n)}))}},Ur={captureMap(t,{padding:e=0,placement:n="normal"}){this._getBoundingGroupRect();const{width:i,height:s,x:r,y:o}=this.bounding_box;if(!this.miniMap){this.miniMap=Ds(t);const{width:e,height:n,raw_width:i,raw_height:s}=this.miniMap;this.addEventListener("zoompan",(()=>{this._renderMap&&this._renderMap()}));let r=!1;this.miniMap.canvas.addEventListener("pointerdown",(t=>{let{offsetX:e,offsetY:n,deltaX:i,deltaY:s}=t;r=!0,this._onMoveMap&&this._onMoveMap(e,n)})),this.miniMap.canvas.addEventListener("pointermove",(t=>{let{offsetX:i,offsetY:s,deltaX:o,deltaY:a}=t;r&&this._onMoveMap&&this._onMoveMap(i,s),(s<5||i<5||i>e-5||s>n-5)&&(r=!1)})),this.miniMap.canvas.addEventListener("pointerup",(()=>{r=!1}));const o=document.createElement("canvas");o.width=i,o.height=s,this.cacheMinimapCtx=o.getContext("2d")}const{width:a,height:c,raw_width:l,raw_height:h,left:u,top:d,scale:f,ctx:p}=this.miniMap,g=2*e,m=e,_=(a-g)/i,v=(c-g)/s,y=Math.min(_,v);let w=0,b=0;"center"===n?(b=(c-s*y)/2-o*y,w=(a-i*y)/2-r*y):_<v?(b=(c-s*y)/2-o*y,w=m):(w=(a-i*y)/2-r*y,b=m);const x=this.cacheMinimapCtx;x.setTransform(),x.clearRect(0,0,l,h),x.scale(f,f),x.transform(y,0,0,y,w,b);const S=[0,0,0,0];this.NodeRenderTop?(this._linkStack.render(x,(t=>(t.isInViewBox(S),!0))),this._stack.render(x)):(this._stack.render(x),this._linkStack.render(x,(t=>(t.isInViewBox(S),!0))));const k=x.getImageData(0,0,l,h);this._renderMap=()=>{p.save(),p.setTransform(),p.clearRect(0,0,l,h),p.scale(f,f),p.putImageData(k,0,0),p.transform(y,0,0,y,w,b);const[t,e,n,i]=this._getViewBox();p.beginPath(),p.rect(t,e,n-t,i-e),p.setTransform(),p.rect(0,0,l,h),p.clip("evenodd"),p.fillStyle="rgba(0,0,0,0.4)",p.fillRect(0,0,l,h),p.restore()},this._renderMap(),this._onMoveMap=(t,e)=>{const[n,i,s,r]=this._getViewBox(),o=[((s-n)/2+n)*y+w,((r-i)/2+i)*y+b];this._recalculatePosition((o[0]-t)/y*this.scale,(o[1]-e)/y*this.scale),this._render(),this._renderMap()}}};class Xr{constructor(t,e={}){this.anchor=[0,0],this.width=e.barWidth||4,this.height=e.barWidth||4,this.barMarginX=0,this.barMarginY=0,this.dir=t,this.plainColor=e.plainColor||"rgba(0, 0, 0, 0.15)",this.focusColor=e.focusColor||"rgba(0, 0, 0, 0.25)",this.isFocus=!1}render(t){const[e,n]=this.anchor;if(t.save(),t.beginPath(),"x"===this.dir){const i=this.height/2,s=n+i,r=n+this.height,o=e+this.width-2*this.barMarginX-i,a=e+this.barMarginX+i;t.moveTo(a,r),t.arc(a,s,i,Math.PI/2,Math.PI/2*3),t.lineTo(o,n),t.arc(o,s,i,-Math.PI/2,Math.PI/2),t.closePath()}else{const i=this.width/2,s=n+this.barMarginY+i,r=n+this.height-2*this.barMarginY-i,o=e+i,a=e+this.width;t.moveTo(e,s),t.arc(o,s,i,-Math.PI,0),t.lineTo(a,r),t.arc(o,r,i,0,Math.PI),t.closePath()}t.fillStyle=this.isFocus?this.focusColor:this.plainColor,t.fill(),t.restore()}isHit(t){const e=this.anchor,n=this.width,i=this.height;return t[0]>e[0]-5&&t[0]<e[0]+n+5&&t[1]>e[1]-5&&t[1]<e[1]+i+5}}const Yr={initScrollBar(t={}){const{barColor:e,barFocusColor:n,barMarginX:i,barMarginY:s,barWidth:r}=t;this._scrollbarEnable=!0,this._scrollbarX=new Xr("x",{plainColor:e,focusColor:n,barWidth:r}),this._scrollbarX.barMarginX=i||5,this._scrollbarY=new Xr("y",{plainColor:e,focusColor:n,barWidth:r}),this._scrollbarY.barMarginY=s||5,this._scrollBarStatus={dragging:!1,target:null,xscale:void 0,yscale:void 0,barInitX:0,barInitY:0},this.addEventListener("zoompan",(()=>{this.scrollBarOnPanAndZoom()})),this.scrollBarOnPanAndZoom(),this.canvas.addEventListener("pointerdown",(t=>{const{offsetX:e,offsetY:n,clientX:i,clientY:s}=t;this.onScrollbarPressStart(e,n,i,s)}))},checkScrollDragging(){return this._scrollBarStatus&&this._scrollBarStatus.dragging},onScrollbarPressStart(t,e,n,i){this._scrollbarX.isHit([t,e])&&Object.assign(this._scrollBarStatus,{dragging:!0,target:this._scrollbarX,barStartX:this._scrollbarX.anchor[0],barInitX:n}),this._scrollbarY.isHit([t,e])&&Object.assign(this._scrollBarStatus,{dragging:!0,target:this._scrollbarY,barStartY:this._scrollbarY.anchor[1],barInitY:i});const s=(t=>{const{offsetX:e,offsetY:n,clientX:i,clientY:s}=t;this.onDraggingScrollbar(e,n,i,s)}).bind(this);document.addEventListener("pointermove",s);const r=(t=>{Object.assign(this._scrollBarStatus,{dragging:!1,target:null,x:void 0,y:void 0}),document.removeEventListener("pointermove",s),document.removeEventListener("pointerup",r),this.canvas.removeEventListener("pointerup",r)}).bind(this);this.canvas.addEventListener("pointerup",r,{once:!0}),document.addEventListener("pointerup",r,{once:!0})},onDraggingScrollbar(t,e,n,i){if(this._scrollbarEnable&&this._scrollBarStatus.dragging){const{target:t,barInitX:e,barStartX:s,barInitY:r,barStartY:o,xscale:a,yscale:c,scollbarHeight:l,scollbarWidth:h,realR:u,realL:d,realT:f,realB:p}=this._scrollBarStatus,{actual_width:g,actual_height:m}=this.canvasMeta,{x:_,y:v}=this.bounding_box;if("x"===t.dir){const i=s+(n-e),r=(_-((u-d)*((t.anchor[0]=Math.max(Math.min(i,g-h),0))/g)+d))*this.scale;Object.assign(this.position,{offsetX:r-_*this.scale,x:r})}if("y"===t.dir){const e=o+(i-r),n=(v-((p-f)*((t.anchor[1]=Math.max(Math.min(e,m-l),0))/m)+f))*this.scale;Object.assign(this.position,{offsetY:n-v*this.scale,y:n})}return this.scheduleRender(),!0}return!1},checkScrollBarHover(t,e){if(this._scrollbarEnable){if(this._scrollbarX.isHit([t,e]))return this._scrollbarX.isFocus||(this._scrollbarX.isFocus=!0,this.scheduleRender()),this.canvas.style.cursor="default",!0;if(this._scrollbarY.isHit([t,e]))return this._scrollbarY.isFocus||(this._scrollbarY.isFocus=!0,this.scheduleRender()),this.canvas.style.cursor="default",!0}return!1},resetScrollBarHover(){this._scrollbarEnable&&(this._scrollbarY.isFocus||this._scrollbarX.isFocus)&&(this._scrollbarY.isFocus=!1,this._scrollbarX.isFocus=!1,this.scheduleRender())},_getScrollViewBoundingbox(){const{width:t,height:e,x:n,y:i}=this.bounding_box;return{width:t+240,height:e+240,x:n-120,y:i-120}},scrollBarOnPanAndZoom(){if(!this._scrollbarEnable||this._scrollBarStatus.dragging)return;const{width:t,height:e,x:n,y:i}=this._getScrollViewBoundingbox();let[s,r,o,a]=this._getViewBox();const c=Math.max(o,n+t),l=Math.min(s,n),h=Math.min(r,i),u=Math.max(a,i+e),d=o-s,f=a-r,{actual_width:p,actual_height:g}=this.canvasMeta,m=d/(c-l);if(m<1){const t=p*m,e=(s-l)*m*this.scale;this._scrollbarX.anchor=[e,g-10],this._scrollbarX.width=t,this._scrollBarStatus.scollbarWidth=t}const _=f/(u-h);if(_<1){const t=g*_,e=(r-h)*_*this.scale;this._scrollbarY.anchor=[p-10,e],this._scrollbarY.height=t,this._scrollBarStatus.scollbarHeight=t}Object.assign(this._scrollBarStatus,{yscale:_,xscale:m,realR:c,realL:l,realT:h,realB:u})},resetScollBarStatus(){this._scrollbarEnable&&Object.assign(this._scrollBarStatus,{dragging:!1,target:null,x:void 0,y:void 0})},renderScrollBar(t){if(this._scrollbarEnable){t.setTransform(),t.scale(this.dpr,this.dpr);const{xscale:e,yscale:n}=this._scrollBarStatus;e<1&&this._scrollbarX.render(t),n<1&&this._scrollbarY.render(t)}}},Gr={initSchedule(){this.__clock__=void 0},scheduleRender(t){requestAnimationFrame((e=>{this.__clock__!==e&&this.__render(),t&&t(e),this.__clock__=e}))}};class qr extends CustomEvent{constructor(t,e={}){super(t,{detail:{...e,originEvent:e.event,target:e.target,jflow:e.jflow,bubbles:e.bubbles||!1}})}}const Jr=qr,Kr={...Fr,...zr,_setPadding(t){this.padding={top:t.paddingTop||t.padding||0,right:t.paddingRight||t.padding||0,bottom:t.paddingBottom||t.padding||0,left:t.paddingLeft||t.padding||0}},_setMargin(t){this.margin={top:t.marginTop||t.margin||0,right:t.marginRight||t.margin||0,bottom:t.marginBottom||t.margin||0,left:t.marginLeft||t.margin||0}},_getCenter(){const t=this.anchor,e=this.padding,n=this.margin,i=(n.left-n.right)/2,s=(n.top-n.bottom)/2,r=(e.left-e.right)/2+i,o=(e.top-e.bottom)/2+s;return this._shape.anchor=[t[0]+i,t[1]+s],[t[0]+r,t[1]+o]},setAnchorX(t){this.anchor[0]=t,this._getCenter()},setAnchorY(t){this.anchor[1]=t,this._getCenter()},setAnchor(t,e){this.anchor[0]=t,this.anchor[1]=e,this._getCenter()},_calculatePointBack(t){const[e,n]=t,[i,s]=this._getCenter();return[e-i,n-s]},_calculatePointBackWithPoint(t,e,n,i,s){const r=this.anchor,o=this.padding,a=this.margin;n[i]=t-(r[0]+(o.left-o.right)/2+(a.left-a.right)/2),n[s]=e-(r[1]+(o.top-o.bottom)/2+(a.top-a.bottom)/2)},calculateToCoordination(t){const[e,n]=t,[i,s]=this._getCenter(),r=[e+i,n+s];return this._belongs&&this._belongs.calculateToCoordination?this._belongs.calculateToCoordination(r):r},calculateToRealWorld(t){const[e,n]=t,[i,s]=this._getCenter(),r=[e+i,n+s];if(this._belongs&&this._belongs.calculateToRealWorld)return this._belongs.calculateToRealWorld(r)},clone(){const t=new(0,this.constructor)(Object.assign({},this._rawConfigs,{layout:this._layout&&this._layout.clone()}));return this.interateNodeStack((e=>{t.addToStack(e.clone())})),t.recalculate(),t.visible=this.visible,t},getBoundingDimension(){return{width:this.width,height:this.height}},getBoundingRect(){const t=this.anchor,e=this.width/2,n=this.height/2,i=t[0]-e,s=t[1]-n,r=t[0]+e,o=t[1]+n,a=this._boundingrect;return a[0]=i,a[1]=s,a[2]=r,a[3]=o,a},getIntersectionsInFourDimension(){let t=this.anchor;this._belongs&&this._belongs.calculateToCoordination&&(t=this._belongs.calculateToCoordination(t));const[e,n]=t,i=this.width/2,s=this.height/2;return{[pr.RIGHT]:[e+i,n],[pr.LEFT]:[e-i,n],[pr.BOTTOM]:[e,n+s],[pr.TOP]:[e,n-s],[pr.SELF]:[e+.618*i,n+.618*s]}},calculateIntersection(t){const[e,n]=t,[i,s]=this.anchor,r=this.width/2,o=this.height/2,a=i-e,c=s-n,l=o/r,h=Math.abs(c/a),u=e>i,d=n>s;let f,p;return h<l?(f=i+(u?r:-r),p=r*(d?h:-h)+s):(p=s+(d?o:-o),f=o/(u?h:-h)+i),[f,p]},onEnterViewbox(){this.interateNodeStack((t=>{t.onEnterViewbox()}))},onLeaveViewbox(){this.interateNodeStack((t=>{t.onLeaveViewbox()}))},destroy(){this._shape.destroy(),this.interateNodeStack((t=>{t.destroy()}))}};function Zr(t,e){return[t,e]}const Qr=function(t,e={}){const n="function"==typeof e.shapeShift?e.shapeShift:Zr;class i extends Ir{constructor(e){super(e),this.initStack(e),this.initLayout(e),this._shape=new t(e),this._shape.anchor=[0,0],this._shape._belongs=this,this._setPadding(e),this._setMargin(e),this.definedWidth=e.width,this.minWidth=e.minWidth,this.definedHeight=e.height,this.lock=e.lock??!0,this.display=e.display||"default",this.transparent=e.transparent??!1,this._getBoundingGroupRect(),this.reflow(),this._getBoundingGroupRect(),this._cacheViewBox=[]}}return Object.assign(i.prototype,Kr),Object.assign(i.prototype,{reflow(){Kr.reflow.call(this);const t=this.margin,[e,i]=n(this.width-t.left-t.right,this.height-t.top-t.bottom,this._shape);this._shape.width=e,this._shape.height=i},setConfig(t){this._shape.setConfig(t),this._setPadding(t),this._setMargin(t),"opacity"in t&&(this.opacity=t.opacity),t.layout&&this._layout!==t.layout&&(this._layout=t.layout)},_getBoundingGroupRect(){const t=mr(this._stack.getBoundingRectPoints()),e=this.padding,i=this.minWidth,s=this.definedWidth,r=t.width+e.left+e.right,o=t.height+e.top+e.bottom,a=i?Math.max(i,r):s||r,c=this.definedHeight||o;this._paddingWidth=a,this._paddingHeight=c;const[l,h]=n(a,c,this._shape);this._shape.width=l,this._shape.height=h;const u=this.margin;this.width=l+u.left+u.right,this.height=h+u.top+u.bottom},_getViewBox(){const t=this._belongs.getCacheViewBox(),e=this._cacheViewBox;return this._calculatePointBackWithPoint(t[0],t[1],e,0,1),this._calculatePointBackWithPoint(t[2],t[3],e,2,3),this._cacheViewBox},getCacheViewBox(){return this._cacheViewBox},render(t){t.save(),this._isMoving?t.globalAlpha=.6:1!==this.opacity&&(t.globalAlpha=this.opacity);const[e,n]=this._getCenter();this._shape.render(t),t.translate(e,n),this._stack.render(t),t.translate(-e,-n),t.restore()},isHit(t,e){const n=this._calculatePointBack(t);this._currentp=n;return this._stack.checkHit(n,e)||!this.transparent&&this._shape.isHit(t)}}),i},to=class extends Ir{constructor(t){super(t),this.type="Point",this.radius=t.radius||10,this._doCache()}setConfig(t){Object.keys(t).forEach((e=>{void 0!==t[e]&&null!==t[e]&&(this[e]=t[e],this._rawConfigs[e]=t[e])})),this._doCache()}_doCache(){this.width=2*this.radius,this.height=2*this.radius}render(t){t.save(),this._isMoving&&(t.globalAlpha=.6),t.beginPath(),t.arc(this.anchor[0],this.anchor[1],this.radius,0,2*Math.PI),t.fillStyle=this.backgroundColor,t.fill(),this.borderWidth&&(t.lineWidth=this.borderWidth,t.strokeStyle=this.borderColor,t.stroke()),t.restore()}isHit(t){const e=this.anchor;return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)<this.radius*this.radius}getBoundingRect(){const t=this.anchor,e=this.radius,n=t[0]-e,i=t[1]-e,s=t[0]+e,r=t[1]+e,o=this._boundingrect;return o[0]=n,o[1]=i,o[2]=s,o[3]=r,o}calculateIntersection(t){const[e,n]=t,[i,s]=this.anchor,r=i-e,o=s-n,a=Math.sqrt(r*r+o*o),c=this.radius/a;return[i-c*r,s-c*o]}getIntersectionsInFourDimension(){const[t,e]=this.anchor,n=this.radius;return{[pr.RIGHT]:[t+n,e],[pr.LEFT]:[t-n,e],[pr.BOTTOM]:[t,e+n],[pr.TOP]:[t,e-n]}}calculateIntersectionInFourDimension(t,e){const[n,i]=t,[s,r]=this.anchor,o=this.radius,a=s-n,c=r-i,l={[pr.RIGHT]:[s+o,r],[pr.LEFT]:[s-o,r],[pr.BOTTOM]:[s,r+o],[pr.TOP]:[s,r-o]};let h=Math.abs(c)>Math.abs(a)?c<0?pr.BOTTOM:pr.TOP:a<0?pr.RIGHT:pr.LEFT;return{p:l[h],dir:h}}getBoundingDimension(){return{width:this.width,height:this.height}}},eo=class extends Ir{constructor(t={}){super(t),this.type="Rectangle",this.width=t.width||10,this.height=t.height||10,this.borderRadius=t.borderRadius||0,this._setBorder(t)}_setBorder(t){this.border={top:{color:t.border?.top?.borderColor||t.borderColor||"transparent",width:t.border?.top?.borderWidth||t.borderWidth||0,enable:t.border?.top?.borderWidth},right:{color:t.border?.right?.borderColor||t.borderColor||"transparent",width:t.border?.right?.borderWidth||t.borderWidth||0,enable:t.border?.right?.borderWidth},bottom:{color:t.border?.bottom?.borderColor||t.borderColor||"transparent",width:t.border?.bottom?.borderWidth||t.borderWidth||0,enable:t.border?.bottom?.borderWidth},left:{color:t.border?.left?.borderColor||t.borderColor||"transparent",width:t.border?.left?.borderWidth||t.borderWidth||0,enable:t.border?.left?.borderWidth}},this.borderColor=t.borderColor||"transparent",this.borderWidth=t.borderWidth||0}setConfig(t){Object.keys(t).forEach((e=>{void 0!==t[e]&&null!==t[e]&&(this[e]=t[e],this._rawConfigs[e]=t[e])})),this._setBorder(t)}render(t){t.save(),this._isMoving&&(t.globalAlpha=.6);const{borderRadius:e,anchor:n,width:i,height:s}=this,r=this.anchor[0]-this.width/2,o=this.anchor[1]-this.height/2,a=this.anchor[0]+this.width/2,c=this.anchor[1]+this.height/2;if(this.borderRadius?(t.beginPath(),t.moveTo(r+e,o),t.lineTo(r+i-e,o),t.quadraticCurveTo(r+i,o,r+i,o+e),t.lineTo(r+i,o+s-e),t.quadraticCurveTo(r+i,o+s,r+i-e,o+s),t.lineTo(r+e,o+s),t.quadraticCurveTo(r,o+s,r,o+s-e),t.lineTo(r,o+e),t.quadraticCurveTo(r,o,r+e,o),t.closePath()):(t.beginPath(),t.rect(this.anchor[0]-this.width/2,this.anchor[1]-this.height/2,this.width,this.height)),this.borderWidth&&(t.lineWidth=this.borderWidth,t.strokeStyle=this.borderColor),this.shadowColor&&"transparent"!==this.shadowColor){t.shadowColor=this.shadowColor;const n=this._jflow.scale;t.shadowBlur=this.shadowBlur*n,t.shadowOffsetX=this.shadowOffsetX*n,t.shadowOffsetY=this.shadowOffsetY*n;let a=new Path2D;this.borderRadius?(a.moveTo(r+e,o),a.lineTo(r+i-e,o),a.quadraticCurveTo(r+i,o,r+i,o+e),a.lineTo(r+i,o+s-e),a.quadraticCurveTo(r+i,o+s,r+i-e,o+s),a.lineTo(r+e,o+s),a.quadraticCurveTo(r,o+s,r,o+s-e),a.lineTo(r,o+e),a.quadraticCurveTo(r,o,r+e,o),a.closePath()):a.rect(this.anchor[0]-this.width/2,this.anchor[1]-this.height/2,this.width,this.height),a.rect(r-10,o-10,this.width+20,this.height+20),t.save(),t.clip(a,"evenodd"),t.stroke(),t.restore()}if(t.fillStyle=this.backgroundColor,t.fill(),this.borderRadius&&this.borderWidth&&(t.shadowColor="transparent",t.stroke()),this.borderRadius){if(this.border.top.enable){const n=o-this.border.top.width/2;t.beginPath();let s=new Path2D;s.moveTo(r,n+e),s.quadraticCurveTo(r,n,r+e,n),s.lineTo(r+i-e,n),s.quadraticCurveTo(r+i,n,r+i,n+e),s.closePath(),t.clip(s),t.save(),t.shadowColor="transparent",t.fillStyle=this.border.top.color,t.rect(r,n,this.width,this.border.top.width),t.fill(),t.restore()}}else this.border.top.width&&(t.beginPath(),t.moveTo(r,o),t.lineTo(a,o),t.strokeStyle=this.border.top.color,t.lineWidth=this.border.top.width,t.stroke()),this.border.right.width&&(t.beginPath(),t.moveTo(a,o),t.lineTo(a,c),t.strokeStyle=this.border.right.color,t.lineWidth=this.border.right.width,t.stroke()),this.border.bottom.width&&(t.beginPath(),t.moveTo(a,c),t.lineTo(r,c),t.strokeStyle=this.border.bottom.color,t.lineWidth=this.border.bottom.width,t.stroke()),this.border.left.width&&(t.beginPath(),t.moveTo(r,c),t.lineTo(r,o),t.strokeStyle=this.border.left.color,t.lineWidth=this.border.left.width,t.stroke());t.restore()}isHit(t){const e=this.anchor,n=this.width/2,i=this.height/2;return t[0]>e[0]-n&&t[0]<e[0]+n&&t[1]>e[1]-i&&t[1]<e[1]+i}getBoundingRect(){const t=this.anchor,e=this.width/2,n=this.height/2,i=t[0]-e,s=t[1]-n,r=t[0]+e,o=t[1]+n,a=this._boundingrect;return a[0]=i,a[1]=s,a[2]=r,a[3]=o,a}getBoundingDimension(){return{height:this.height,width:this.width}}calculateIntersection(t){const[e,n]=t,[i,s]=this.anchor,r=this.width/2,o=this.height/2,a=i-e,c=s-n,l=o/r,h=Math.abs(c/a),u=e>i,d=n>s;let f,p;return h<l?(f=i+(u?r:-r),p=r*(d?h:-h)+s):(p=s+(d?o:-o),f=o/(u?h:-h)+i),[f,p]}getIntersectionsInFourDimension(){let t=this.anchor;this._belongs&&this._belongs.calculateToCoordination&&(t=this._belongs.calculateToCoordination(t));const[e,n]=t,i=this.width/2,s=this.height/2;return{[pr.RIGHT]:[e+i,n],[pr.LEFT]:[e-i,n],[pr.BOTTOM]:[e,n+s],[pr.TOP]:[e,n-s]}}calculateIntersectionInFourDimension(t,e){const[n,i]=t;let s=this.anchor;this._belongs&&this._belongs.calculateToCoordination&&(s=this._belongs.calculateToCoordination(s));const[r,o]=s,a=this.width/2,c=this.height/2,l={[pr.RIGHT]:[r+a,o],[pr.LEFT]:[r-a,o],[pr.BOTTOM]:[r,o+c],[pr.TOP]:[r,o-c]},h=r-n,u=o-i,d=c/a,f=n>r;let p=Math.abs(u/h)>d?i>o?pr.BOTTOM:pr.TOP:f?pr.RIGHT:pr.LEFT;return{p:l[p],dir:p}}},no=class extends Ir{constructor(t={}){super(t),this.type="Capsule",this.width=t.width||20,this.height=t.height||10}render(t){t.save(),this._isMoving&&(t.globalAlpha=.6),t.beginPath();const[e,n]=this.anchor,i=this.width/2,s=this.height/2,r=e-i+s,o=e+i-s,a=n-s,c=n+s;t.moveTo(r,a),t.lineTo(o,a),t.arc(o,n,s,-Math.PI/2,Math.PI/2),t.lineTo(r,c),t.arc(r,n,s,Math.PI/2,Math.PI/2*3),t.fillStyle=this.backgroundColor,this.shadowColor&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),t.fill(),this.borderWidth&&(t.lineWidth=this.borderWidth,t.strokeStyle=this.borderColor,t.stroke()),t.restore()}isHit(t){const e=this.anchor,n=this.width/2,i=this.height/2,s=Math.abs(n-i),r=e[0]-n+i,o=e[0]+n-i,a=i*i;return t[0]>e[0]-s&&t[0]<e[0]+s&&t[1]>e[1]-i&&t[1]<e[1]+i||Math.pow(t[0]-r,2)+Math.pow(t[1]-e[1],2)<a||Math.pow(t[0]-o,2)+Math.pow(t[1]-e[1],2)<a}getBoundingRect(){const t=this.anchor,e=this.width/2,n=this.height/2,i=t[0]-e,s=t[1]-n,r=t[0]+e,o=t[1]+n,a=this._boundingrect;return a[0]=i,a[1]=s,a[2]=r,a[3]=o,a}getBoundingDimension(){return{height:this.height,width:this.width}}getIntersectionsInFourDimension(){let t=this.anchor;this._belongs&&this._belongs.calculateToCoordination&&(t=this._belongs.calculateToCoordination(t));const[e,n]=t,i=this.width/2,s=this.height/2;return{[pr.RIGHT]:[e+i,n],[pr.LEFT]:[e-i,n],[pr.BOTTOM]:[e,n+s],[pr.TOP]:[e,n-s]}}},io=class extends no{render(t){t.save(),this._isMoving&&(t.globalAlpha=.6),t.beginPath();const[e,n]=this.anchor,i=this.width/2,s=this.height/2,r=n-s+i,o=n+s-i,a=e-i,c=e+i;t.moveTo(a,r),t.arc(e,r,i,-Math.PI,0),t.lineTo(c,o),t.arc(e,o,i,0,Math.PI),t.closePath(),t.fillStyle=this.backgroundColor,this.shadowColor&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),t.fill(),this.borderWidth&&(t.lineWidth=this.borderWidth,t.strokeStyle=this.borderColor,t.stroke()),t.restore()}isHit(t,e){const[n,i]=this.anchor,s=this.width/2,r=this.height/2,o=Math.abs(r-s),a=i-r+s,c=i+r-s,l=s*s;return t[0]>n-s&&t[0]<n+s&&t[1]>i-o&&t[1]<i+o||Math.pow(t[0]-n,2)+Math.pow(t[1]-a,2)<l||Math.pow(t[0]-n,2)+Math.pow(t[1]-c,2)<l}},so=class extends Ir{constructor(t={}){super(t),this.type="Rhombus",this.height=t.diagonalsV||10,this.width=t.diagonalsH||20}render(t){t.save(),this._isMoving&&(t.globalAlpha=.6);const e=this.width/2,n=this.height/2,i=this.anchor;if(t.translate(i[0],i[1]),t.beginPath(),t.moveTo(0,-n),t.lineTo(e,0),t.lineTo(0,n),t.lineTo(-e,0),t.closePath(),this.borderWidth&&(t.lineWidth=this.borderWidth,t.strokeStyle=this.borderColor),this.shadowColor){t.shadowColor=this.shadowColor;const i=this._jflow.scale;t.shadowBlur=this.shadowBlur*i,t.shadowOffsetX=this.shadowOffsetX*i,t.shadowOffsetY=this.shadowOffsetY*i;let s=new Path2D;s.moveTo(0,-n),s.lineTo(e,0),s.lineTo(0,n),s.lineTo(-e,0),s.closePath(),s.rect(-e-10,-n-10,this.width+20,this.height+20),t.save(),t.clip(s,"evenodd"),t.stroke(),t.restore()}t.fillStyle=this.backgroundColor,t.fill(),this.borderWidth&&(t.shadowColor="transparent",t.stroke()),t.translate(-i[0],-i[1]),t.restore()}isHit(t){const e=this.height/2,n=this.width/2,i=this.anchor;return Math.abs(t[0]-i[0])/n+Math.abs(t[1]-i[1])/e<=1}getBoundingRect(){const t=this.anchor,e=this.width/2,n=this.height/2,i=t[0]-e,s=t[1]-n,r=t[0]+e,o=t[1]+n,a=this._boundingrect;return a[0]=i,a[1]=s,a[2]=r,a[3]=o,a}getBoundingDimension(){return{height:this.height,width:this.width}}getIntersectionsInFourDimension(){let t=this.anchor;this._belongs&&this._belongs.calculateToCoordination&&(t=this._belongs.calculateToCoordination(t));const[e,n]=t,i=this.width/2,s=this.height/2;return{[pr.RIGHT]:[e+i,n],[pr.LEFT]:[e-i,n],[pr.BOTTOM]:[e,n+s],[pr.TOP]:[e,n-s],[pr.SELF]:[e+.618*i,n+.618*s]}}},ro=class extends Ir{constructor(t={}){super(t),this.type="Diamond",this.width=t.width||20,this.height=t.height||10,this.side=t.side||6,this._doCache()}setConfig(t){Object.keys(t).forEach((e=>{void 0!==t[e]&&null!==t[e]&&(this[e]=t[e],this._rawConfigs[e]=t[e])})),this._doCache()}_doCache(){this.sinSIDE=Math.sin(Math.PI/3)*this.side,this.cosSIDE=Math.cos(Math.PI/3)*this.side}render(t){const[e,n]=this.anchor,i=this.width/2,s=this.height/2,r=s/1.732,o=e-i+r,a=e+i-r,c=e+i,l=e-i,h=n-s,u=n+s;this._cachePoints=[[a,h],[c,n],[a,u],[o,u],[l,n],[o,h]],t.save(),this._isMoving&&(t.globalAlpha=.6),t.beginPath();const{side:d,sinSIDE:f,cosSIDE:p}=this;t.moveTo(e,h),t.lineTo(a-d,h),t.quadraticCurveTo(a,h,a+p,h+f),t.lineTo(c-p,n-f),t.quadraticCurveTo(c,n,c-p,n+f),t.lineTo(a+p,u-f),t.quadraticCurveTo(a,u,a-d,u),t.lineTo(o+d,u),t.quadraticCurveTo(o,u,o-p,u-f),t.lineTo(l+p,n+f),t.quadraticCurveTo(l,n,l+p,n-f),t.lineTo(o-p,h+f),t.quadraticCurveTo(o,h,o+d,h),t.closePath(),t.fillStyle=this.backgroundColor,this.shadowColor&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),t.fill(),this.borderWidth&&(t.lineWidth=this.borderWidth,t.strokeStyle=this.borderColor,t.stroke()),t.restore()}isHit(t){if(!this._cachePoints)return!1;const e=this._cachePoints;let n=!1;for(let i=0,s=e.length-1;i<e.length;i++)e[i][1]>t[1]!=e[s][1]>t[1]&&t[0]<(e[s][0]-e[i][0])*(t[1]-e[i][1])/(e[s][1]-e[i][1])+e[i][0]&&(n=!n),s=i;return n}getBoundingRect(){const t=this.anchor,e=this.width/2,n=this.height/2,i=t[0]-e,s=t[1]-n,r=t[0]+e,o=t[1]+n,a=this._boundingrect;return a[0]=i,a[1]=s,a[2]=r,a[3]=o,a}getBoundingDimension(){return{height:this.height,width:this.width}}getIntersectionsInFourDimension(){let t=this.anchor;this._belongs&&this._belongs.calculateToCoordination&&(t=this._belongs.calculateToCoordination(t));const[e,n]=t,i=this.width/2,s=this.height/2;return{[pr.RIGHT]:[e+i,n],[pr.LEFT]:[e-i,n],[pr.BOTTOM]:[e,n+s],[pr.TOP]:[e,n-s]}}};Math.sqrt(3);const oo=Symbol("ishit");class ao extends Xr{constructor(t,e={}){super(t,e),this.visible=!1}render(t){this.visible&&super.render(t)}setHit(t){this[oo]!==t&&(this.isFocus=t,this.onHit()),this[oo]=t}}class co extends Ir{constructor(t){super(t),this.type="ScrollGroup",this.initStack(t),this.initLayout(t),this.initScrollBar(t),this._shape=new eo(t),this._shape.anchor=[0,0],this._shape._belongs=this,this.maxWidth=t.maxWidth||1/0,this.definedWidth=t.definedWidth,this.maxHeight=t.maxHeight||1/0,this.definedHeight=t.definedHeight,this.lock=t.lock??!0,this._offset=[0,0],this._getBoundingGroupRect(),this.reflow(),this._getBoundingGroupRect(),this._resetOffset(),this._cacheViewBox=[]}initScrollBar(t){const{barColor:e,barFocusColor:n,barMarginX:i,barMarginY:s,barWidth:r}=t;this._scrollbarX=new ao("x",{plainColor:e,focusColor:n,barWidth:r}),this._scrollbarY=new ao("y",{plainColor:e,focusColor:n,barWidth:r}),this._scrollbarX.barMarginX=i||1,this._scrollbarY.barMarginY=s||1;const o=()=>{this._jflow.scheduleRender()};this._scrollbarX.onHit=o,this._scrollbarY.onHit=o,this._scrollBarStatus={dragging:!1,target:null,barInitX:0,barInitY:0,barStartX:0,barStartY:0,hitScrollX:!1,hitScrollY:!1},this.addEventListener("instancePressStart",(t=>{if(this._scrollBarStatus.hitScrollX){t.detail.preventDefault(),t.detail.bubbles=!1;const e=t.detail.event.clientX;Object.assign(this._scrollBarStatus,{dragging:!0,target:this._scrollbarX,barStartX:this._scrollbarX.anchor[0],barInitX:e}),this.onScrollbarPressStart()}if(this._scrollBarStatus.hitScrollY){t.detail.preventDefault(),t.detail.bubbles=!1;const e=t.detail.event.clientY;Object.assign(this._scrollBarStatus,{dragging:!0,target:this._scrollbarY,barStartY:this._scrollbarY.anchor[1],barInitY:e}),this.onScrollbarPressStart()}}))}onScrollbarPressStart(){const t=this._jflow.canvas,e=(t=>{const{clientX:e,clientY:n}=t;this.onDraggingScrollbar(e,n)}).bind(this);document.addEventListener("pointermove",e);const n=(i=>{Object.assign(this._scrollBarStatus,{dragging:!1,target:null,barInitX:0,barInitY:0,barStartX:0,barStartY:0,hitScrollX:!1,hitScrollY:!1}),document.removeEventListener("pointermove",e),document.removeEventListener("pointerup",n),t.removeEventListener("pointerup",n)}).bind(this);t.addEventListener("pointerup",n,{once:!0}),document.addEventListener("pointerup",n,{once:!0})}onDraggingScrollbar(t,e){if(this._scrollbarX.visible&&this._scrollBarStatus.dragging){const n=this._jflow,i=n.scale,{target:s,barInitX:r,barStartX:o,barInitY:a,barStartY:c}=this._scrollBarStatus;if("x"===s.dir){const e=this._scrollbarX.width,a=this._outerWidth,c=o+(t-r)/i,l=(s.anchor[0]=Math.max(Math.min(c,a-e),0))/(a-e),h=(this._innerWidth-a)/2;this._offset[0]=h-(this._innerWidth-a)*l,n.scheduleRender()}if("y"===s.dir){const t=this._scrollbarY.height,r=this._outerHeight,o=c+(e-a)/i,l=(s.anchor[1]=Math.max(Math.min(o,r-t),0))/(r-t),h=(this._innerHeight-r)/2;this._offset[1]=h-(this._innerHeight-r)*l,n.scheduleRender()}}}setConfig(t){this._shape.setConfig(t)}_getBoundingGroupRect(){const t=mr(this._stack.getBoundingRectPoints()),e=t.width,n=t.height,i=this.definedWidth||Math.min(e,this.maxWidth),s=this.definedHeight||Math.min(n,this.maxHeight);this._innerWidth=e,this._outerWidth=i,this._innerHeight=n,this._outerHeight=s,this._shape.width=i,this._shape.height=s,this.width=i,this.height=s}_calculatePointBack(t){const[e,n]=t,[i,s]=this._offset,[r,o]=this.anchor;return[e-r-i,n-o-s]}_calculatePointBackWithPoint(t,e,n,i,s){const r=this.anchor,o=this._offset;n[i]=t-r[0]-o[0],n[s]=e-r[1]-o[1]}calculateToCoordination(t){const[e,n]=t,[i,s]=this.anchor,[r,o]=this._offset,a=[e+i-r,n+s-o];return this._belongs&&this._belongs.calculateToCoordination?this._belongs.calculateToCoordination(a):a}calculateToRealWorld(t){const[e,n]=t,[i,s]=this.anchor,[r,o]=this._offset,a=[e+i-r,n+s-o];if(this._belongs&&this._belongs.calculateToRealWorld)return this._belongs.calculateToRealWorld(a)}_getViewBox(){const t=this._cacheViewBox;return this._calculatePointBackWithPoint(0,0,t,0,1),this._calculatePointBackWithPoint(this.width,this.height,t,2,3),t}getCacheViewBox(){return this._cacheViewBox}_resetOffset(){this._offset=[Math.max((this._innerWidth-this._outerWidth)/2,0),Math.max((this._innerHeight-this._outerHeight)/2,0)],this._innerWidth>this._outerWidth?(this._scrollbarX.visible=!0,this._scrollbarX.width=this._outerWidth*this._outerWidth/this._innerWidth,this._scrollbarX.anchor=[0,this._outerHeight-4]):this._scrollbarX.visible=!1,this._innerHeight>this._outerHeight?(this._scrollbarY.visible=!0,this._scrollbarY.height=this._outerHeight*this._outerHeight/this._innerHeight,this._scrollbarY.anchor=[this._outerWidth-4,0]):this._scrollbarY.visible=!1}render(t){this._isMoving?t.globalAlpha=.6:1!==this.opacity&&(t.globalAlpha=this.opacity);const[e,n]=this.anchor,i=this.width,s=this.height,r=i/2,o=s/2,[a,c]=this._offset;t.translate(e,n),this._shape.render(t),t.translate(-r,-o),this._scrollbarX.visible&&this._scrollbarX.render(t),this._scrollbarY.visible&&this._scrollbarY.render(t),t.translate(r,o),t.save(),t.beginPath(),t.rect(-r,-o,i,s),t.clip(),t.translate(a,c),this._stack.render(t),this._linkStack.render(t),t.translate(-e-a,-n-c),t.restore()}isHit(t,e){const[n,i]=t,[s,r]=this.anchor,o=[n-s+this.width/2,i-r+this.height/2];if(this._scrollBarStatus.hitScrollX=!1,this._scrollBarStatus.hitScrollY=!1,this._scrollbarX.visible&&this._scrollbarX.isHit(o))return this._scrollBarStatus.hitScrollX=!0,this._scrollbarX.setHit(!0),!0;if(this._scrollbarX.setHit(!1),this._scrollbarY.visible&&this._scrollbarY.isHit(o))return this._scrollBarStatus.hitScrollY=!0,this._scrollbarY.setHit(!0),!0;if(this._scrollbarY.setHit(!1),this._shape.isHit([n-s,i-r])){const[t,o]=this._offset,a=[n-s-t,i-r-o];this._currentp=a;const c=this._stack.checkHit(a,e);if(c)return c}else this._stack.resetHitStatus();return!1}getBoundingDimension(){return{width:this.width,height:this.height}}getBoundingRect(){const t=this.anchor,e=this.width/2,n=this.height/2,i=t[0]-e,s=t[1]-n,r=t[0]+e,o=t[1]+n,a=this._boundingrect;return a[0]=i,a[1]=s,a[2]=r,a[3]=o,a}getIntersectionsInFourDimension(){let t=this.anchor;this._belongs&&this._belongs.calculateToCoordination&&(t=this._belongs.calculateToCoordination(t));const[e,n]=t,i=this.width/2,s=this.height/2;return{[pr.RIGHT]:[e+i,n],[pr.LEFT]:[e-i,n],[pr.BOTTOM]:[e,n+s],[pr.TOP]:[e,n-s],[pr.SELF]:[e+.618*i,n+.618*s]}}onEnterViewbox(){this.interateNodeStack((t=>{t.onEnterViewbox()}))}onLeaveViewbox(){this.interateNodeStack((t=>{t.onLeaveViewbox()}))}destroy(){this._shape.destroy(),this.interateNodeStack((t=>{t.destroy()}))}clone(){const t=new(0,this.constructor)(Object.assign({},this._rawConfigs,{layout:this._layout&&this._layout.clone()}));return this.interateNodeStack((e=>{t.addToStack(e.clone())})),t.recalculate(),t.visible=this.visible,t}}Object.assign(co.prototype,Fr),Object.assign(co.prototype,zr),Object.assign(co.prototype,{recalculateUp(){let t=!0;if(this.getBoundingDimension){const e=this._innerWidth,n=this._innerHeight;this.resetChildrenPosition&&this.resetChildrenPosition(),this._getBoundingGroupRect&&this._getBoundingGroupRect(),this.reflow(),this._getBoundingGroupRect&&this._getBoundingGroupRect();const i=this._innerWidth,s=this._innerHeight;t=e!==i||n!==s}else this.reflow();this._belongs&&t&&(this._resetOffset(),this._belongs.recalculateUp())},recalculate(){const{width:t,height:e}=this.getBoundingDimension();this.reflow(),this._getBoundingGroupRect&&this._getBoundingGroupRect();const{width:n,height:i}=this.getBoundingDimension();t===n&&e===i||this._resetOffset()}});const lo=co,ho={canvas:{wheel(t,e){t.preventDefault();let{offsetX:n,offsetY:i,deltaX:s,deltaY:r}=t;t.ctrlKey&&(r=-r),e.zoomHandler(n,i,s,r,t)}}},uo=class extends Mr{constructor(t={}){super(),this.from=t.from,this.to=t.to,this.fromDir=t.fromDir,this.toDir=t.toDir,this._cachePoints=null,this.backgroundColor=t.backgroundColor||"#000",this.isSelf=!!t.isSelf}isInViewBox(t){return!0}bringToTop(){const t=this._jflow._linkStack,e=t.findIndex((t=>t===this));t.splice(e,1),t.push(this),this._jflow._render()}},fo=class extends Ir{constructor(t){super(t),this.width=t.width,this.height=t.height,this.imageBuffer=document.createElement("canvas"),this.imageBuffer.width=this.width+2,this.imageBuffer.height=this.height+2,t.cache(this.imageBuffer.getContext("2d"))}render(t){const[e,n]=this.anchor;t.save(),t.translate(e,n),t.beginPath(),t.drawImage(this.imageBuffer,-this.width/2,-this.height/2),t.translate(-e,-n),t.restore()}getBoundingDimension(){return{height:this.height,width:this.width}}recalculate(){}getBoundingRect(){const t=this.anchor,e=this.width/2,n=this.height/2,i=t[0]-e,s=t[1]-n,r=t[0]+e,o=t[1]+n,a=this._boundingrect;return a[0]=i,a[1]=s,a[2]=r,a[3]=o,a}},po="left",go="right",mo=class extends eo{constructor(t){super(t),this.type="Text",this.content=t.content||"",this.fontFamily=t.fontFamily||"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Tahoma,Arial,Noto Sans,PingFang SC,Microsoft YaHei,Hiragino Sans GB,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji",this.fontSize=t.fontSize||"14px",this.fontWeight=t.fontWeight||"",this.textColor=t.textColor||"white",this.placeholderColor=t.placeholderColor||t.textColor||"white",this.textAlign=t.textAlign||"center",this.textBaseline=t.textBaseline||"middle",this.lineHeight=t.lineHeight,this.indent=t.indent||0,this.backgroundColor=t.backgroundColor,this.editable=t.editable,this.definedWidth=t.definedWidth,this.minWidth=t.minWidth||0,this.maxWidth=t.maxWidth,this.ellipsis=t.ellipsis,this.placeholder=t.placeholder||"",this.emptyWhenInput=t.emptyWhenInput||!1,this.editting=!1,this.disabled=t.disabled,this.cursorColor=t.cursorColor||"#60CFC4",this.textRangeColor=t.textRangeColor||"#4E75EC1A",this._status={editing:!1,cursorshow:!0,cursoranime:null,lastElapsed:0,refreshElapsed:!1,cursorDragging:!1,shiftOn:!1,oldVal:"",inputElement:null},this._cursorOffset=0,this._textRange={enable:!1,rangefrom:null,rangeTo:null,initialRange:null},this.editable&&this._makeFunctional(),this.preCalculateText(),this.shadowCache()}get currentContent(){return this.content||this.placeholder}get isEmpty(){return!this.content}preCalculateText(){Fs((t=>{t.beginPath(),t.font=`${this.fontWeight} ${this.fontSize} ${this.fontFamily}`,t.textAlign=this.textAlign,t.textBaseline=this.textBaseline;const e=parseInt(this.fontSize),n=this.currentContent,{fontBoundingBoxAscent:i,fontBoundingBoxDescent:s,width:r}=t.measureText(n);if(this._textWidth=this.indent+r,this.definedWidth){if(this.ellipsis&&this._textWidth>this.definedWidth){const t=this._calculateOffset(this.definedWidth-12);this.ellipsisContent=n.substring(0,t)+"..."}else this.ellipsisContent=n;this.width=this.definedWidth}else if(this.maxWidth&&this.ellipsis){if(this._textWidth>this.maxWidth){const t=this.maxWidth/this._textWidth,e=Math.floor(n.length*t-3);this.ellipsisContent=n.substring(0,e)+"..."}else this.ellipsisContent=n;this.width=Math.min(this.maxWidth,this._textWidth)}else this.width=Math.max(this.minWidth,this._textWidth);const o=Math.abs(i)+Math.abs(s)||e;this._textHeight=o,this.lineHeight?this.height=this.lineHeight:this.height=o}))}shadowCache(){const t=window.devicePixelRatio,e=this.width*t,n=this.height*t,i=this.indent*t,s=parseInt(this.fontSize)*t;this._shadowCache=new fo({width:e,height:n,cache:t=>{t.translate(e/2,n/2);const r=`${this.fontWeight} ${s}px ${this.fontFamily}`;t.font=r,t.textAlign=this.textAlign,t.textBaseline=this.textBaseline,t.fillStyle=this.isEmpty?this.placeholderColor:this.textColor;let o=this.currentContent;if(this.ellipsisContent&&(o=this.ellipsisContent),o)if(this.textAlign===po){const n=e/2;t.fillText(o,i/2-n,0)}else if(this.textAlign===go){const n=e/2;t.fillText(o,n,0)}else t.fillText(o,i/2,0)}})}setConfig(t){Object.keys(t).forEach((e=>{void 0!==t[e]&&null!==t[e]&&(this[e]=t[e],this._rawConfigs[e]=t[e])})),this.preCalculateText(),this.shadowCache()}click(){if(!this._status.editing){let t=!0;if(this.dispatchEvent(new Jr("edit",{target:this,preventDefault(){t=!1}})),!t)return;const e=this._belongs._currentp,n=this._jflow;this._cursorOffset=e?this._positionToCursorOffset(e):0;const i=function(t,e){const n=document.createElement("input");n.setAttribute("style","\n        width: 100px;\n        position: absolute;\n        left: 0;\n        top: 0;\n        border:none;\n        opacity: 0;\n        z-index: -1;\n        contain: strict;"),n.setAttribute("tabindex",-1),n.setAttribute("aria-hidden",!0),n.setAttribute("spellcheck",!1),n.setAttribute("autocorrect","off");let i=!1,s={ctrlOn:!1};return n.addEventListener("beforeinput",(e=>{e.preventDefault(),e.data&&(i||t("Input",e.data))})),n.addEventListener("compositionstart",(e=>{t("compositionstart"),i=!0})),n.addEventListener("compositionupdate",(e=>{t("compositionupdate",e.data)})),n.addEventListener("compositionend",(e=>{t("compositionend",e.data),n.value="",i=!1})),n.addEventListener("keyup",(e=>{switch(e.key){case"Shift":t("Shift",!1);break;case"Meta":case"Control":s.ctrlOn=!1}})),n.addEventListener("keydown",(e=>{switch(e.code){case"Enter":t("Enter");break;case"Backspace":t("Backspace");break;case"ArrowLeft":t("ArrowLeft");break;case"ArrowRight":t("ArrowRight");break;case"ArrowDown":t("ArrowDown");break;case"ArrowUp":t("ArrowUp")}switch(e.key){case"Shift":t("Shift",!0);break;case"Meta":case"Control":s.ctrlOn=!0;break;case"a":s.ctrlOn&&t("CtrlA")}})),n.addEventListener("keyup",(t=>{e("KeyUp",t)})),n.addEventListener("keydown",(t=>{e("KeyDown",t)})),n.addEventListener("copy",(e=>{e.preventDefault(),e.stopPropagation(),t("COPY",null,e)})),n.addEventListener("cut",(e=>{e.preventDefault(),e.stopPropagation(),t("CUT",null,e)})),n.addEventListener("paste",(e=>{e.preventDefault(),e.stopPropagation(),t("PASTE",null,e)})),n}(this._controlCallback.bind(this),this._defaultCallback.bind(this));n.DOMwrapper.append(i),i.focus({preventScroll:!0}),n.setFocusInstance(this),Object.assign(this._status,{editing:!0,oldVal:this.content,inputElement:i,cursoranime:n.requestJFlowAnime((t=>{const e=this._status.lastElapsed;this._status.refreshElapsed&&(this._status.lastElapsed=t,this._status.refreshElapsed=!1),t-e>500&&(this._status.cursorshow=!this._status.cursorshow,this._status.lastElapsed=t)}))}),this.emptyWhenInput&&(this.content=""),this.syncShadowInputPosition()}}_makeFunctional(){const t=t=>{this._status.editing=!1,this._status.inputElement&&this._status.inputElement.remove(),this._belongs&&this._jflow.scheduleRender()};this.addEventListener("dblclick",(t=>{t.currentTarget===this&&this._status.editing&&this._selectFullRange()})),this.addEventListener("click",(t=>{if(t.currentTarget===this){if(this._status.editing){const t=this._belongs._currentp,e=this._positionToCursorOffset(t);if(this._status.shiftOn){const t=this._textRange.initialRange;Object.assign(this._textRange,{rangefrom:Math.min(e,t),rangeTo:Math.max(e,t),enable:!0}),this._cursorOffset=this._textRange.rangeTo,this._status.inputElement.focus({preventScroll:!0})}else this._cursorOffset=e,this._status.inputElement.focus({preventScroll:!0}),this._refreshCursor(),this.syncShadowInputPosition()}this.click()}})),this.addEventListener("blur",(e=>{t(),this.dispatchEvent(new Jr("change",{target:this,oldVal:this._status.oldVal,val:this.content})),this._textRange.enable=!1,this._status.cursoranime.cancel(),Object.assign(this._status,{editing:!1,cursorshow:!0,cursoranime:null,lastElapsed:0,refreshElapsed:!1,cursorDragging:!1,shiftOn:!1,oldVal:"",inputElement:null})})),this.addEventListener("instancePressStart",(t=>{if(this._status.editing&&!this._status.shiftOn){t.detail.bubbles=!1,t.detail.preventDefault();const e=this._belongs._currentp,n=this._positionToCursorOffset(e);this._textRange.initialRange=n;const i=t.detail.jflow;let s=!1;const r=(t=>{s=!0;const{offsetX:e,offsetY:n}=t,r=i._calculatePointBack([e,n]);i._stack.checkHit(r);const o=this._belongs._currentp,a=this._positionToCursorOffset(o),c=this._textRange.initialRange;this._status.editing=!1,Object.assign(this._textRange,{rangefrom:Math.min(a,c),rangeTo:Math.max(a,c),enable:!0})}).bind(this);document.addEventListener("pointermove",r),document.addEventListener("pointerup",(t=>{if(document.removeEventListener("pointermove",r),!s)return void(this._textRange.initialRange=null);const e=this._textRange.rangeTo;this._cursorOffset=e,this._status.editing=!0,this._status.inputElement.focus({preventScroll:!0}),this._textRange.initialRange=null}),{once:!0})}}))}_positionToCursorOffset(t){const[e]=t,n=this.width/2,[i]=this.anchor,s=e-(i-n);let r=0;return r=s>=this._textWidth?this.content.length:this._calculateOffset(s),r}_calculateOffset(t){const e=this.content,n=e.length-1,i=this._textWidth;if(0===i)return 0;const s=i;let r=Math.floor(t/s*n);return Fs((i=>{let o,a,c;i.font=`${this.fontSize} ${this.fontFamily}`;let l=e.substring(0,r),h=e.substring(r-1,r),u=e.substring(r,r+1),d=i.measureText(l).width,f=i.measureText(h).width,p=i.measureText(u).width;o=d-f/2,a=d+p/2;do{if(o<=t&&a>=t)break;if(o>t){const n=a-t;c=r,r-=n<100?1:Math.floor(n/a*c),l=e.substring(r,c),d-=i.measureText(l).width}else if(a<t){const a=t-o;c=r,r+=a<100?1:Math.floor(a/(s-o)*(n-c)),l=e.substring(c,r),d+=i.measureText(l).width}h=e.substring(r-1,r),u=e.substring(r,r+1),f=i.measureText(h).width,p=i.measureText(u).width,o=d-f/2,a=d+p/2}while(r>=0&&r<=n)})),r}_refreshCursor(){this._status.editing&&Object.assign(this._status,{cursorshow:!0,refreshElapsed:!0}),this._textRange.enable&&(this._textRange.enable=!1)}render(t){if(this._isMoving&&(t.globalAlpha=.6),!t.disableCache&&!this._status.editing&&this._jflow.scale*parseInt(this.fontSize)<8){const[e,n]=this.anchor;return t.save(),t.translate(e,n),t.beginPath(),t.drawImage(this._shadowCache.imageBuffer,-this.width/2,-this.height/2,this.width,this.height),t.translate(-e,-n),void t.restore()}const e=`${this.fontWeight} ${this.fontSize} ${this.fontFamily}`;t.font!==e&&(t.font=e),t.textAlign!==this.textAlign&&(t.textAlign=this.textAlign),t.textBaseline!==this.textBaseline&&(t.textBaseline=this.textBaseline),t.fillStyle=this.isEmpty?this.placeholderColor:this.textColor;let n=this.currentContent;if(this.ellipsisContent&&(n=this.ellipsisContent),n)if(this.textAlign===po){const e=this.width/2;t.fillText(n,this.anchor[0]-e+this.indent/2,this.anchor[1])}else if(this.textAlign===go){const e=this.width/2;t.fillText(n,this.anchor[0]+e,this.anchor[1])}else t.fillText(n,this.anchor[0]+this.indent/2,this.anchor[1]);const i=this.width/2,s=this._textHeight,[r,o]=this.anchor,a=r-i,c=o-s/2;if(this._status.cursorshow&&this._status.editing){const e=this._cursorOffset,n=this.content.substring(0,e),i=a+t.measureText(n).width,s=this._textHeight/2;t.beginPath(),t.moveTo(i,o-s),t.lineTo(i,o+s),t.lineWidth=2,t.strokeStyle=this.cursorColor,t.stroke()}if(this._textRange.enable){const{rangefrom:e,rangeTo:n}=this._textRange,i=this.content.substring(0,e),r=this.content.substring(e,n),o=a+t.measureText(i).width,l=t.measureText(r).width;t.beginPath(),t.rect(o,c,l,s),t.fillStyle=this.textRangeColor,t.fill()}}_inputControl(t,e){if(this._textRange.enable&&(this._clearTextRange(),"Backspace"===t))return this.dispatchEvent(new Jr("input",{target:this,oldVal:this._status.oldVal,val:this.content})),this.refresh(),void this.syncShadowInputPosition();const n=this._cursorOffset,i=this.content;let s,r=i.substring(0,n);s=this.cacheIdx?i.substring(this.cacheIdx[1]):i.substring(n);let o=!1;switch(t){case"Input":r+=e,this._cursorOffset+=e.length,this.content=r+s;break;case"compositionstart":this.cacheIdx=[r.length,r.length];break;case"compositionupdate":r=r.substring(0,this.cacheIdx[0]),r+=e,this.content=r+s,this._cursorOffset=this.cacheIdx[0]+e.length,this.cacheIdx[1]=this.cacheIdx[0]+e.length;break;case"compositionend":r=r.substring(0,this.cacheIdx[0]),this._cursorOffset=this.cacheIdx[0]+e.length,this.cacheIdx=null,r+=e,this.content=r+s;break;case"Enter":if(this.cacheIdx)return;let t=!0;this.dispatchEvent(new Jr("enterkeypressed",{target:this,handler:e=>{t=e},stopInput(){o=!0}})),t&&this._jflow.blur();break;case"Backspace":r=r.substring(0,r.length-1),this._cursorOffset=Math.max(0,this._cursorOffset-1),this.content=r+s}o||this.dispatchEvent(new Jr("input",{target:this,oldVal:this._status.oldVal,val:this.content})),this.refresh(),this.syncShadowInputPosition()}refresh(){this.preCalculateText(),this._belongs.recalculateUp(),this._jflow.scheduleRender()}syncShadowInputPosition(){if(this._status.editing){const t=this.width/2,e=this.height/2;let n=this.anchor[0]-t;const i=this._cursorOffset;Fs((t=>{t.beginPath(),t.font=`${this.fontSize} ${this.fontFamily}`;const e=this.content.substring(0,i);n+=t.measureText(e).width}));const s=this.calculateToRealWorld([n,e]),r=this._jflow.canvasMeta,o=Math.min(r.actual_width-120,s[0]);this._status.inputElement.style.transform=`translate(${o}px, ${s[1]}px)`}}_controlCallback(t,e,n){switch(this._status.editing&&Object.assign(this._status,{cursorshow:!0,refreshElapsed:!0}),t){case"Input":case"compositionstart":case"compositionupdate":case"compositionend":case"Enter":case"Backspace":this._inputControl(t,e);break;case"ArrowLeft":this._textRange.enable&&(this._textRange.enable=!1),this._onArrowLeft();break;case"ArrowRight":this._textRange.enable&&(this._textRange.enable=!1),this._onArrowRight();break;case"Shift":this._onShiftToggle(e);break;case"CtrlA":this._selectFullRange();break;case"COPY":this._copy(n);break;case"CUT":this._cut(n);break;case"PASTE":this._paste(n)}}_onArrowLeft(){this._cursorOffset=Math.max(0,this._cursorOffset-1),this._jflow.scheduleRender(),this.syncShadowInputPosition()}_onArrowRight(){this._cursorOffset=Math.min(this.content.length,this._cursorOffset+1),this._jflow.scheduleRender(),this.syncShadowInputPosition()}_onShiftToggle(t){this._status.shiftOn=t,this._textRange.initialRange=t?this._cursorOffset:null}_selectFullRange(){this._textRange={enable:!0,rangefrom:0,rangeTo:this.content.length},this._cursorOffset=this.content.length}_clearTextRange(){if(this._textRange.enable){const{rangefrom:t,rangeTo:e}=this._textRange,n=this.content,i=n.substring(0,t),s=n.substring(e);this.content=i+s,this._cursorOffset=i.length,this._textRange.enable=!1}}_getSelection(){if(this._textRange.enable){const{rangefrom:t,rangeTo:e}=this._textRange;return this.content.substring(t,e)}return null}_copy(t){const e=this._getSelection();e&&t.clipboardData.setData("text/plain",e)}_cut(t){const e=this._getSelection();e&&(t.clipboardData.setData("text/plain",e),this._clearTextRange(),this.refresh())}_paste(t){let e=(t.clipboardData||window.clipboardData).getData("text"),n=!1;if(this.dispatchEvent(new Jr("paste",{target:this,content:e,preventDefault(){n=!0},resolvePasteContent(t){e=t(e)}})),n)return;this._clearTextRange();const i=this._cursorOffset,s=this.content,r=s.substring(0,i),o=s.substring(i);this.content=r+e+o,this._cursorOffset=(r+e).length,this.refresh()}_defaultCallback(t,e){switch(t){case"KeyDown":this.dispatchEvent(new Jr("keydown",{target:this,key:e.key,code:e.code,rawEvent:e}));break;case"KeyUp":this.dispatchEvent(new Jr("keyup",{target:this,key:e.key,code:e.code,rawEvent:e}))}}destroy(){this._jflow._focus.instance===this&&this._jflow.blur()}},_o=class extends eo{constructor(t){super(t),this.image=t.image,this.image.onload=()=>{this._jflow._render()},this.imageBounding={width:t.imageWidth||t.width,height:t.imageHeight||t.height}}setConfig(t){Object.keys(t).forEach((e=>{void 0!==t[e]&&null!==t[e]&&(this[e]=t[e],this._rawConfigs[e]=t[e])})),t.image&&!t.image.complete&&(this.image.onload=()=>{this._jflow._render()}),this.imageBounding={width:t.imageWidth||t.width||this.imageBounding.width,height:t.imageHeight||t.height||this.imageBounding.height}}render(t){t.save(),this._isMoving&&(t.globalAlpha=.6),eo.prototype.render.call(this,t);const e=this.anchor[0]-this.width/2,n=this.anchor[1]-this.height/2;this.opacity<1&&(t.globalAlpha=this.opacity),this.image.complete&&t.drawImage(this.image,e,n,this.imageBounding.width,this.imageBounding.height),t.restore()}},vo=class extends eo{constructor(t){super(t),this.domFactory=t.createDocument,this._dom=null}getRealWorldPosition(){const t=this.getBoundingRect();return this.calculateToRealWorld(t.slice(0,2))}render(t){if(!this._dom&&this.domFactory)requestAnimationFrame((()=>{if(!this._dom){const t=document.createElement("div"),e=this.getRealWorldPosition(),n=this._jflow.scale;t.setAttribute("style",`\n                        position: absolute;\n                        width: ${this.width}px;\n                        height: ${this.height}px;\n                        transform-origin: left top;\n                        top: 0;\n                        left: 0;\n                        transform: translate(${e[0]}px, ${e[1]}px) scale(${n});`),this._dom=t,this._jflow.DOMwrapper.appendChild(t),this.domFactory(t)}}));else{const t=this.getRealWorldPosition(),e=this._jflow.scale;this._dom.style.transform=`translate(${t[0]}px, ${t[1]}px) scale(${e})`}super.render(t)}onEnterViewbox(){this._dom&&(this._dom.style.display="block")}onLeaveViewbox(){this._dom&&(this._dom.style.display="none")}destroy(){this._dom&&this._jflow.DOMwrapper.removeChild(this._dom),super.destroy()}},yo=class extends uo{constructor(t){super(t),this.fontFamily=t.fontFamily="-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Tahoma,Arial,Noto Sans,PingFang SC,Microsoft YaHei,Hiragino Sans GB,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji",this.fontSize=t.fontSize||"12px",this.content=t.content||"",this.lineDash=t.lineDash,this.approximate=t.approximate||6,this._cacheAngle=void 0,this._cachePoints=[],this._cacheBoundingbox={from:[],to:[]}}_calculateAnchorPoints(){const t=this.from.calculateIntersection(this.to.getCenter()),e=this.to.calculateIntersection(this.from.getCenter());this._cachePoints[0]=t,this._cachePoints[1]=e;const n=e[0]-t[0],i=e[1]-t[1],s=Math.atan2(i,n);this._cacheAngle=s}isInViewBox(t){const e=this.from.getBoundingRect(),n=this.to.getBoundingRect(),i=this._cacheBoundingbox;return Tr(i.from,e)&&!Tr(i.to,n)||(Pr(i.from,e),Pr(i.to,n),this._calculateAnchorPoints()),!0}render(t){const[e,n]=this._cachePoints,i=this._cacheAngle,s=n[0]-e[0],r=n[1]-e[1];if(t.fillStyle=t.strokeStyle=this.backgroundColor,t.beginPath(),this.content){t.textAlign="center",t.font=`${this.fontSize} ${this.fontFamily}`,t.textBaseline="middle";const{actualBoundingBoxLeft:i,actualBoundingBoxRight:o,fontBoundingBoxAscent:a,fontBoundingBoxDescent:c}=t.measureText(this.content),l=s/2+e[0],h=r/2+e[1];t.fillText(this.content,l,h);const u=Math.abs(i)+Math.abs(o)+20,d=1.5*(Math.abs(a)+Math.abs(c));t.beginPath();let f=new Path2D;f.rect(l-u/2,h-d/2,u,d);const p=Math.min(n[0],e[0])-10,g=Math.min(n[1],e[1])-10,m=Math.abs(s)+20,_=Math.abs(r)+20;f.rect(p,g,m,_),t.clip(f,"evenodd")}t.moveTo(e[0],e[1]),t.lineTo(n[0],n[1]),this.lineDash&&(t.save(),t.setLineDash(this.lineDash)),t.stroke(),this.lineDash&&t.restore(),t.translate(n[0],n[1]),t.rotate(i),t.moveTo(0,0),t.lineTo(-5,-4),t.lineTo(-5,4),t.lineTo(0,0),t.fill(),t.rotate(-i),t.translate(-n[0],-n[1])}isHit(t){if(!this._cachePoints)return!1;const[e,n]=this._cachePoints;return yr(t,e,n)<this.approximate}},wo=Math.PI/180;class bo extends uo{constructor(t){super(t),this.approximate=t.approximate||6,this.radius=t.radius||0,this.minSpanX=t.minSpanX||10,this.minSpanY=t.minSpanY||10,this.lineDash=t.lineDash,this.doubleLink=t.doubleLink,this.fontFamily=t.fontFamily="-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Tahoma,Arial,Noto Sans,PingFang SC,Microsoft YaHei,Hiragino Sans GB,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji",this.fontSize=t.fontSize||"12px",this.content=t.content||"",this.isSelf=!!t.isSelf,this.noArrow=!!t.noArrow,this._cacheAngle=[],this._cachePoints=[],this._cacheBoundingbox={from:[],to:[]}}_calculateAnchorPoints(){const t=this.from.getIntersectionsInFourDimension(),e=this.to.getIntersectionsInFourDimension(),n=this._cacheAngle;if(this.isSelf)kr(this._cachePoints,t[this.fromDir],e[pr.SELF],this.fromDir,this.toDir,this.minSpanX,this.minSpanY,!0),n[0]=this.fromDir,n[1]=this.toDir;else if(void 0!==this.fromDir&&void 0!==this.toDir)kr(this._cachePoints,t[this.fromDir],e[this.toDir],this.fromDir,this.toDir,this.minSpanX,this.minSpanY),n[0]=this.fromDir,n[1]=this.toDir;else{const i=wr(t,e);kr(this._cachePoints,i.fromP,i.toP,i.fromDir,i.toDir,this.minSpanX,this.minSpanY),n[0]=i.fromDir,n[1]=i.toDir}}isInViewBox(t){return!!this._static||(this._calculateAnchorPoints(),function(t,e){let n=t[0],i=t.length,s=1;const[r,o,a,c]=e;for(;s<i;){const e=t[s];if(n[0]===e[0]){if(n[0]<a&&n[0]>r&&!(n[1]>c&&e[1]>c||n[1]<o&&e[1]<o))return!0}else if(n[1]<c&&n[1]>o&&!(n[0]>a&&e[0]>a||n[0]<r&&e[0]<r))return!0;n=e,s++}return!1}(this._cachePoints,t))}render(t){const e=this.radius,n=this._cachePoints,i=n[0],s=n[n.length-1],r=(this._cacheAngle[1]+2)%4*90*wo;if(t.fillStyle=t.strokeStyle=this.backgroundColor,this.doubleLink){const e=(this._cacheAngle[0]+2)%4*90*wo;t.beginPath(),t.translate(i[0],i[1]),t.rotate(e),t.moveTo(5,0),t.lineTo(0,-4),t.lineTo(0,4),t.lineTo(5,0),t.fill(),t.rotate(-e),t.translate(-i[0],-i[1])}if(t.beginPath(),t.moveTo(i[0],i[1]),n.slice(1,n.length-1).forEach(((i,s)=>{if(this.radius){const r=n[s],o=n[s+2],{p1:a,p2:c}=function(t,e,n,i){const s=Br(e,t),r=Br(e,n),o=Cr(s),a=Cr(r);if(!o||!a)return{p1:null,p2:null};const c=Lr(s,i/o),l=Lr(r,i/a);return{p1:Br(e,c),p2:Br(e,l)}}(r,i,o,e);a&&c?(t.lineTo(a[0],a[1]),t.quadraticCurveTo(i[0],i[1],c[0],c[1])):t.lineTo(i[0],i[1])}else t.lineTo(i[0],i[1])})),t.lineTo(s[0],s[1]),this.lineDash&&(t.save(),t.setLineDash(this.lineDash)),t.stroke(),this.lineDash&&t.restore(),this.noArrow||(t.beginPath(),t.translate(s[0],s[1]),t.rotate(r),t.moveTo(0,0),t.lineTo(-5,-4),t.lineTo(-5,4),t.lineTo(0,0),t.fill(),t.rotate(-r),t.translate(-s[0],-s[1])),this.content)switch(t.beginPath(),t.font=`${this.fontSize} ${this.fontFamily}`,this.fromDir){case pr.BOTTOM:t.textAlign="left",t.fillText(this.content,i[0]+2,i[1]+10);break;case pr.RIGHT:t.textAlign="left",t.fillText(this.content,i[0]+10,i[1]-2)}}isHit(t){if(this._static)return!1;if(!this._cachePoints)return!1;const e=this._cachePoints;let n=e[0];const i=e.slice(1);do{const e=i.shift();if(e&&yr(t,n,e)<this.approximate)return!0;n=e}while(n);return!1}cloneStatic(){const t=new bo({});return Object.assign(t,{radius:this.radius,_cachePoints:this._cachePoints,_cacheAngle:this._cacheAngle,backgroundColor:this.backgroundColor,doubleLink:this.doubleLink,radius:this.radius,lineDash:this.lineDash,noArrow:this.noArrow,content:this.content,fontSize:this.fontSize,fontFamily:this.fontFamily,fromDir:this.fromDir,_static:!0}),t}}const xo=bo,So=Math.PI/180,ko=class extends uo{constructor(t){super(t),this.approximate=t.approximate||6,this.minSpanX=t.minSpanX||0,this.minSpanY=t.minSpanY||0,this.lineDash=t.lineDash,this.lineWidth=t.lineWidth||1,this.doubleLink=t.doubleLink,this.fontFamily=t.fontFamily="-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Tahoma,Arial,Noto Sans,PingFang SC,Microsoft YaHei,Hiragino Sans GB,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji",this.fontSize=t.fontSize||"12px",this.content=t.content||"",this.isSelf=!!t.isSelf}_calculateAnchorPoints(){const t=this.from.getIntersectionsInFourDimension(),e=this.to.getIntersectionsInFourDimension();if(this.isSelf){const n=xr(t[this.fromDir],e[pr.SELF],this.fromDir,pr.BOTTOM,this.minSpanX,this.minSpanY);this._cachePoints=[...t[this.fromDir],...n],this._cacheAngle=[this.fromDir,pr.BOTTOM]}else if(void 0!==this.fromDir&&void 0!==this.toDir){const n=xr(t[this.fromDir],e[this.toDir],this.fromDir,this.toDir,this.minSpanX,this.minSpanY);this._cachePoints=[...t[this.fromDir],...n],this._cacheAngle=[this.fromDir,this.toDir]}else{const n=wr(t,e),i=xr(n.fromP,n.toP,n.fromDir,n.toDir);this._cachePoints=[...n.fromP,...i],this._cacheAngle=[n.fromDir,n.toDir]}}render(t){this._calculateAnchorPoints();const e=this._cachePoints,n=Sr.apply(null,[1,...e]);if(t.fillStyle=t.strokeStyle=this.backgroundColor,t.lineWidth=this.lineWidth,this.doubleLink){const n=(this._cacheAngle[0]+2)%4*90*So;t.beginPath(),t.translate(e[0],e[1]),t.rotate(n),t.moveTo(5,0),t.lineTo(0,-4),t.lineTo(0,4),t.lineTo(5,0),t.fill(),t.rotate(-n),t.translate(-e[0],-e[1])}if(t.beginPath(),t.moveTo(e[0],e[1]),t.bezierCurveTo(...e.slice(2)),this.lineDash&&(t.save(),t.setLineDash(this.lineDash)),t.stroke(),this.lineDash&&t.restore(),t.beginPath(),t.translate(e[6],e[7]),t.rotate(n),t.moveTo(5,0),t.lineTo(0,-4),t.lineTo(0,4),t.lineTo(5,0),t.fill(),t.rotate(-n),t.translate(-e[6],-e[7]),this.content){t.beginPath();const n=e[0]>e[6];let[i,s,r]=function(t,e){const n=.5,i=.125*e[0]+.375*e[2]+.375*e[4]+.125*e[6],s=.125*e[1]+.375*e[3]+.375*e[5]+.125*e[7],r=n*n*(e[2]-e[0])+.5*(e[4]-e[2])+t*t*(e[6]-e[4]),o=n*n*(e[3]-e[1])+.5*(e[5]-e[3])+t*t*(e[7]-e[5]);return[i,s,Math.atan2(o,r)]}(.5,e);t.translate(i,s),t.rotate(r),n&&t.rotate(Math.PI),t.font=`${this.fontSize} ${this.fontFamily}`,t.textAlign="center",t.fillText(this.content,0,-(parseInt(this.fontSize)||12)/4),n&&t.rotate(Math.PI),t.rotate(-r),t.translate(-i,-s)}}isHit(t){if(!this._cachePoints)return!1;const e=function(t,e){const n=new fr(...e).project({x:t[0],y:t[1]});return vr(t,[n.x,n.y])}(t,this._cachePoints);return e<this.approximate}};class Bo{constructor(t={}){this.direction=t.direction||"vertical",this.gap=t.gap??5,this.alignment=t.alignment||"center",this.justify=t.justify||"center",this._rawConfigs=t}reflow(t){const e=t._stack.filter((t=>t.visible&&!t.absolutePosition)),n=t._stack.filter((t=>t.visible&&t.absolutePosition)),i=t.width-t.padding.left-t.padding.right;if("vertical"===this.direction){let s=0,r=0,o=0,a=0;const c=e.concat(n);c.forEach(((t,e)=>{"block"===t.display&&(t.width=0,t.resetChildrenPosition(),t.reflow(),t._getBoundingGroupRect())})),e.forEach(((t,e)=>{const{width:n,height:i}=t.getBoundingDimension(),c=e>0?this.gap:0;"outstretch"!==t.display&&(o=Math.max(n,o)),a+=i+c,s+=i/2+c+r,r=i/2,t.anchor=[0,s]})),c.forEach(((e,n)=>{if("block"===e.display)e.resetChildrenPosition(),e.width=o,e.reflow();else if("outstretch"===e.display){const n=t._belongs.width-t._belongs.padding.left-t._belongs.padding.right;e.resetChildrenPosition(),e.width=Math.max(n,o),e.reflow()}})),o=Math.max(i,o),a/=2,"start"===this.alignment&&e.forEach(((t,e)=>{const{width:n}=t.getBoundingDimension();t.anchor[0]=-(o-n)/2,t.anchor[1]-=a})),"end"===this.alignment&&e.forEach(((t,e)=>{const{width:n}=t.getBoundingDimension();t.anchor[0]=(o-n)/2,t.anchor[1]-=a})),"center"===this.alignment&&e.forEach(((t,e)=>{const{width:n}=t.getBoundingDimension();t.anchor[1]-=a}))}if("horizontal"===this.direction){let t=0,n=0,s=0,r=0,o=0;if(e.forEach(((e,i)=>{const{width:a,height:c}=e.getBoundingDimension(),l=i>0?this.gap:0;s=Math.max(c,s),r+=a+l,o+=a,t+=a/2+l+n,n=a/2,e.anchor=[t,0]})),"start"===this.justify){const t=i/2;e.forEach(((e,n)=>{e.anchor[0]-=t}))}if("end"===this.justify){const t=i/2-r;e.forEach(((e,n)=>{e.anchor[0]+=t}))}if("center"===this.justify){const t=r/2;e.forEach(((e,n)=>{e.anchor[0]-=t}))}if("space-between"===this.justify&&e.length>1){const t=Math.max(i,r),n=(t-r)/(e.length-1),s=t/2;e.forEach(((t,e)=>{t.anchor[0]+=n*e-s}))}"start"===this.alignment&&e.forEach(((t,e)=>{const{height:n}=t.getBoundingDimension();t.anchor[1]=-(s-n)/2})),"end"===this.alignment&&e.forEach(((t,e)=>{const{height:n}=t.getBoundingDimension();t.anchor[1]=(s-n)/2}))}if(n.length){"block"===t.display?t.getBoundingDimension():t._getBoundingGroupRect();const e=t.width/2,i=t.height/2,s=(t.padding.top-t.padding.bottom)/2,r=(t.padding.left-t.padding.right)/2;n.forEach((t=>{t.anchor=this._resolveAbsoluteAnchor(t.absolutePosition,t,e,i,r,s)}))}}_resolveAbsoluteAnchor(t,e,n,i,s,r){const{top:o,right:a,bottom:c,left:l,centerX:h,centerY:u}=t,{width:d,height:f}=e.getBoundingDimension(),p=d/2,g=f/2;let m=0,_=0;return"number"==typeof o&&(m=o+g-i-r),"number"==typeof a&&(_=n-a-p-s),"number"==typeof c&&(m=i-c-g-r),"number"==typeof l&&(_=l+p-n-s),"number"==typeof h&&(_=h),"number"==typeof u&&(m=u),[_,m]}clone(){return new Bo(this._rawConfigs)}}const Co=Bo,Lo="input",Eo="control",To="input",Po="compositionstart",Ro="compositionupdate",Oo="compositionend",Ao="enter",Mo="delete",Io="backspace",jo="arrowLeft",Do="arrowRight",Vo="arrowUp",$o="arrowDown",No="undo",Fo="redo",zo="shift_down",Wo="shift_up",Ho="ctrla",Uo="startedit",Xo="editclick",Yo="shiftonclick",Go="doubleclick";class qo extends EventTarget{_inputElement=null;constructor(t){super(),this._inputElement=function(t){const e=document.createElement("input");e.setAttribute("style","\n        width: 100px;\n        position: absolute;\n        left: 0;\n        top: 0;\n        border:none;\n        opacity: 0;\n        z-index: -1;\n        contain: strict;"),e.setAttribute("tabindex",-1),e.setAttribute("aria-hidden",!0),e.setAttribute("spellcheck",!1),e.setAttribute("autocorrect","off");let n=!1,i={ctrlOn:!1,shiftOn:!1};return e.addEventListener("beforeinput",(e=>{e.preventDefault(),e.data&&(n||t(To,e.data))})),e.addEventListener("compositionstart",(e=>{t(Po),n=!0})),e.addEventListener("compositionupdate",(e=>{t(Ro,e.data)})),e.addEventListener("compositionend",(i=>{t(Oo,i.data),e.value="",n=!1})),e.addEventListener("keyup",(e=>{if(!n)switch(e.key){case"Shift":t(Wo),i.shiftOn=!1;break;case"Meta":case"Control":i.ctrlOn=!1}})),e.addEventListener("keydown",(e=>{if(!n){switch(e.code){case"Enter":t(Ao);break;case"Backspace":t(Io);break;case"Delete":t(Mo);break;case"ArrowLeft":t(jo);break;case"ArrowRight":t(Do);break;case"ArrowDown":t($o);break;case"ArrowUp":t(Vo)}switch(e.key){case"Shift":t(zo),i.shiftOn=!0;break;case"Meta":case"Control":i.ctrlOn=!0;break;case"a":i.ctrlOn&&t(Ho);break;case"c":i.ctrlOn&&t("ctrlc");break;case"v":i.ctrlOn&&t("ctrlv");break;case"x":i.ctrlOn&&t("ctrlx");break;case"y":i.ctrlOn&&(e.preventDefault(),t(Fo));break;case"z":i.ctrlOn&&i.shiftOn?t(Fo):i.ctrlOn&&t(No)}}})),e}(this.controlCallback.bind(this)),t.append(this._inputElement),this._inputElement.focus()}controlCallback(t,e){switch(t){case To:case Po:case Ro:case Oo:case Ao:case Io:case Mo:this.dispatchEvent(new CustomEvent(Lo,{detail:{kind:t,data:e}}));break;case jo:case Do:case Vo:case $o:case Ho:case zo:case Wo:case No:case Fo:this.dispatchEvent(new CustomEvent(Eo,{detail:{kind:t}}))}}focus(){this._inputElement.focus({preventScroll:!0})}syncPosition(t,e){this._inputElement.style.transform=`translate(${t}px, ${e}px)`}destroy(){this._inputElement.remove()}}const Jo=qo;class Ko{_lines=[];get(t){return this._lines[t]}getLineAbove(t){let e=0;const n=this._lines;for(;e<n.length&&!(n[e].reduceHeight>t);)e++;return Math.min(e,n.length-1)}truncate(t){const e=Zo.create(t);return this._lines=[e],e}push(t){this._lines.push(t)}forEach(t){this._lines.forEach(t)}length(){return this._lines.length}}class Zo{width=0;anchorY=0;height=0;reduceHeight=0;_elements=[];static create(t){return new Zo(t)}constructor(t={}){Object.assign(this,t)}_elements=[];get(t){return this._elements[t]}length(){return this._elements.length}insert(t,e){this._elements.splice(t,0,e)}push(t){this._elements.push(t)}tail(){return this._elements[this._elements.length-1]}copy(){return this._elements.slice()}getColumnNearest(t,e,n,i){const s=this._elements;if(t>=this.width){const t=s.length-1,e=s[t];let n=0;return"text"===e.type&&(n=e.source.length),[t,n]}{let r=0,o=0,a=0,c=null;for(;r<s.length-1;){o=a;const n=s[r];if("text"!==n.type){const t=c&&"text"===c.type?2*e:e;a+=n.width+t}else a+=n.width;if(a>t){c=n;break}c=n,r++}a<=t&&(o=a);const l=s[r];if("text"===l.type){const e=function(t,e,n,i){const s=e.source,r=s.length-1;if(0===e.width)return 0;const o=e.width;let a=Math.floor(t/o*r);return Fs((e=>{let c,l,h;e.font=`${n} ${i}`;let u=s.substring(0,a),d=s.substring(a-1,a),f=s.substring(a,a+1),p=e.measureText(u).width,g=e.measureText(d).width,m=e.measureText(f).width;c=p-g/2,l=p+m/2;do{if(c<=t&&l>=t)break;if(c>t){const n=l-t;h=a,a-=n<100?1:Math.floor(n/l*h),u=s.substring(a,h),p-=e.measureText(u).width}else if(l<t){const n=t-c;h=a,a+=n<100?1:Math.floor(n/(o-c)*(r-h)),u=s.substring(h,a),p+=e.measureText(u).width}d=s.substring(a-1,a),f=s.substring(a,a+1),g=e.measureText(d).width,m=e.measureText(f).width,c=p-g/2,l=p+m/2}while(a>=0&&a<=r)})),a}(t-o,l,n,i);return[r,e]}return t-o>c.width/2?[r+1,0]:[r,0]}}forEach(t){this._elements.forEach(t)}}class Qo{static create(t){const e=new Qo;return e.from(t),e}_textElements=[];_records=[];_caretRecord=null;insertBefore(t,e){const n=this.findIndex(t);this.inersetAt(n,e)}insertAfter(t,e){const n=this.findIndex(t);this.get(n+1)&&e.setNeedWrap(t.needWrap||t.isTail),this.inersetAt(n+1,e)}findIndex(t){return this._textElements.findIndex((e=>e===t))}get(t){return this._textElements[t]}from(t){this._textElements=t}inersetAt(t,e){this.splice(t,0,e)}push(t){this.splice(this.length(),0,t)}remove(t){this.splice(t,1)}splice(){const t=this._textElements.splice(...arguments);this._records.push({op:"splice",args:arguments,removed:t})}copy(){return this._textElements.slice()}isEmpty(){return 1===this._textElements.length&&""===this._textElements[0].source}forEach(t){this._textElements.forEach(t)}tail(){return this._textElements[this._textElements.length-1]}filter(t){return this._textElements.filter(t)}length(){return this._textElements.length}startRecord(){return this._caretRecord={before:null,after:null},this._records=[],this._records}getRecord(){return this._records}recordBeforeCaret(t){this._caretRecord.before=t.toRange()}recordAfterCaret(t){this._caretRecord.after=t.toRange()}getCaretRecord(){return this._caretRecord}collectRecords(){return this._records}}class ta{needWrap=!1;width=0;reduceWidth=0;height=0;anchorX=0;anchorY=0;dirty=!0;isTail=!1;constructor(t,e){this.type=t,this.source=e}setSource(t,e){const n=this.source;this.source=t,this.dirty=!0,e&&e.push({op:"setSource",args:[this,t,n]})}setNeedWrap(t,e){const n=this.needWrap;this.needWrap=t,n!==t&&e&&e.push({op:"setNeedWrap",args:[this,t,n]})}shift(t,e){if("text"===this.type){const n=this.source.length,i=t+e;return i<0?"prev":i>n?"next":"self"}return e>0?"next":e<0?"prev":void 0}tailOffset(){return"text"===this.type?this.needWrap||this.isTail?this.source.length:Math.max(0,this.source.length-1):0}headOffset(){return 0}}function ea(t){return 1===t.length&&"setSource"===t[0].op}class na{static length=50;_undo=[];_redo=[];_editor=null;write(t,e){if(0===t.length)return;if(ea(t)){const n=t[0],i=this.getLastUndo();if(i&&ea(i._batch)){const t=i._batch[0];if(t.args[0]===n.args[0])return t.args[1]=n.args[1],void(i._caretMetaTo=e.after)}}const n=new ia(t);n._caretMetaFrom=e.before,n._caretMetaTo=e.after,this._undo.push(n),this._undo.length>na.length&&this._undo.splice(0,1),this._redo.length&&(this._redo=[])}getLastUndo(){return this._undo[this._undo.length-1]}undo(){const t=this._undo.pop();return t&&(t.undo(this._editor),this._redo.push(t)),t}redo(){let t=this._redo.pop();for(;t&&t.SKIP_REDO;)t=this._redo.pop();return t&&(t.redo(this._editor),this._undo.push(t)),t}}class ia{_batch=[];_caretMetaFrom=null;_caretMetaTo=null;constructor(t){this._batch=t}updateCaretMetaTo(t){this._caretMetaTo=t}undo(t){this._batch.slice().reverse().forEach((e=>{switch(e.op){case"range":const[n,i]=e.args,s=t._range;s.setInitialRange(n),s.setRange(i),s.enable();break;case"setSource":const[r,o,a]=e.args;r.source=a,r.dirty=!0;break;case"setNeedWrap":const[c,l,h]=e.args;c.needWrap=h,c.dirty=!0;break;case"splice":const u=t._flattenTxtElem,[d,f,...p]=e.args,g=e.removed;let m=0;p&&(m=p.length),u.splice(d,m,...g)}})),t._caret.fromRange(this._caretMetaFrom)}redo(t){this._batch.forEach((e=>{switch(e.op){case"setSource":const[n,i,s]=e.args;n.source=i,n.dirty=!0;break;case"setNeedWrap":const[r,o,a]=e.args;r.needWrap=o,r.dirty=!0;break;case"splice":t._flattenTxtElem.splice(...e.args)}})),t._caret.fromRange(this._caretMetaTo)}}const sa=class{static create(t){return new this(t)}constructor(t){this._editor=t}exec(){}};class ra extends sa{static name=jo;exec(){const t=this._editor;t._range.disable();const e=t._flattenTxtElem,n=t._caret,i=n.getRow(),s=n.getColumn(),[r,o]=s,a=t._area.get(i),c=a.get(r),l=e.findIndex(c);switch(c.shift(o,-1)){case"prev":if(r>0){const t=a.get(r-1);n.setColumn([r-1,t.tailOffset()])}else if(l>0){const s=i-1,r=t._area.get(s).length()-1,o=e.get(l-1).tailOffset();n.setRow(s),n.setColumn([r,o])}break;case"self":n.setColumn(1,o-1)}n.refresh(),t.syncShadowInputPosition(),t._jflow._render()}}class oa extends sa{static name=Do;exec(){const t=this._editor;t._range.disable();const e=t._flattenTxtElem,n=t._caret,i=n.getRow(),s=n.getColumn(),[r,o]=s,a=t._area.get(i),c=a.get(r),l=e.findIndex(c);switch(c.shift(o,1,l===e.length()-1)){case"next":if(r<a.length()-1){const t=a.get(r+1);"text"===c.type&&"text"!==t.type?n.setColumn([r+2,t.headOffset()]):n.setColumn([r+1,t.headOffset()])}else if(l<e.length()-1){const t=i+1,s=e.get(l+1).headOffset();n.setRow(t),n.setColumn([0,s])}break;case"self":n.setColumn(1,o+1)}n.refresh(),t.syncShadowInputPosition(),t._jflow._render()}}class aa extends sa{static name=Vo;exec(){this._editor._range.disable();const t=this._editor._caret.getRow()-1;t>-1&&this._handler(t)}}class ca extends sa{static name=$o;exec(){this._editor._range.disable();const t=this._editor._caret.getRow()+1;t<this._editor._area.length()&&this._handler(t)}}const la={_handler(t){const e=this._editor,n=e._caret,i=n.getRow(),s=n.getColumn(),[r,o]=s,a=e._area;let c=a.get(i).get(r),l=c.reduceWidth;o>0&&(l+=e.measureTextWidth(c.source.substring(0,o)));const h=a.get(t).getColumnNearest(l,e.elementSpace,e.fontSize,e.fontFamily);n.setRow(t),n.setColumn(h),n.refresh(),e.syncShadowInputPosition(),e._jflow._render()}};function ha(t,e,n,i){if(!t)return[n,!1];if("text"===t.type&&"text"===e.type){const n=t.source.length;return t.setSource(t.source+e.source,i),t.setNeedWrap(e.needWrap,i),[n,!0]}return[n,!1]}Object.assign(aa.prototype,la),Object.assign(ca.prototype,la);class ua extends sa{static name=Lo;cacheIdx=null;exec(t,e){const n=this._editor,i=n._range,s=n._caret,r=n._flattenTxtElem,o=n._undoredo,a=r.startRecord();if(r.recordBeforeCaret(s),i.isEnable()&&(i.delete(n,a),t===Io||t===Mo))return r.collectRecords(),r.recordAfterCaret(s),this._editor.refresh(),void o.write(a,r.getCaretRecord());const c=s.getRow();let[l,h]=s.getColumn();const u=n._area,d=u.get(c);let f=d.get(l),p=d.get(l-1),g="";if("text"===f.type)g=f.source;else if("text"===p?.type)g=p.source,f=p,h=g.length,s.setColumn([l-1,g.length]);else{const t=new ta("text","");r.insertBefore(f,t),f=t}let m,_=g.substring(0,h);switch(m=this.cacheIdx?g.substring(this.cacheIdx[1]):g.substring(h),t){case To:if(/\r?\n/.test(e)){let t=e.split(/\r?\n/);t=t.replace(/\t/,"");let n=r.findIndex(f),i=t.shift();f.setSource(_+i,a);let o=c+1;for(n++;t.length>1;){const e=new ta("text",t.shift());e.setNeedWrap(!0,a),o++,r.inersetAt(n,e),n++}i=t.shift();const l=r.get(n);if(l&&"text"===l.type)l.setSource(i+l.source,a);else{const t=new ta("text",i);r.inersetAt(n,t)}s.setRow(o),s.setColumn([0,i.length])}else _+=e,s.setColumn(1,s.getColumn(1)+e.length),f.setSource(_+m,a);break;case Po:this.cacheIdx=[_.length,_.length];break;case Ro:_=_.substring(0,this.cacheIdx[0]),_+=e,f.setSource(_+m,a);const t=this.cacheIdx[0]+e.length;s.setColumn(1,t),this.cacheIdx[1]=t;break;case Oo:_=_.substring(0,this.cacheIdx[0]),s.setColumn(1,this.cacheIdx[0]+e.length),this.cacheIdx=null,_+=e,f.setSource(_+m,a);break;case Ao:f.setSource(_,a),f.setNeedWrap(!0,a);const n=new ta("text",m);r.insertAfter(f,n),s.setRow(c+1),s.setColumn([0,0]);break;case Io:switch(f.shift(h,-1)){case"prev":let t=r.findIndex(f);if(l>0){r.splice(t-1,1),t-=1;const[e,n]=ha(r.get(t-1),f,0,a);n&&r.remove(t),s.setColumn([l-(e>0?2:1),e])}else if(t>0){const e=c-1,n=u.get(e).length()-1,[i,o]=ha(r.get(t-1),f,0,a);o&&r.remove(t),s.setRow(e),s.setColumn([n,i])}break;case"self":_=_.substring(0,_.length-1),s.setColumn(1,s.getColumn(1)-1),f.setSource(_+m,a)}break;case Mo:switch(f.shift(h,1)){case"next":let t=r.findIndex(f);if(l<d.length()-1){r.splice(t+1,1);const e=r.get(t+1),[n,i]=ha(f,e,f.source.length,a);i&&r.remove(t+1),s.setColumn([l,n])}else if(t<r.length()-1){const e=r.get(t+1),[n,i]=ha(f,e,f.source.length,a);i&&r.remove(t+1),s.setColumn([l,n])}break;case"self":m=m.substring(1),f.setSource(_+m,a)}}r.collectRecords(),r.recordAfterCaret(s),o.write(a,r.getCaretRecord()),this._editor.refresh()}}class da extends sa{static name=Uo;exec(){const t=this._editor;if(!this._startEdit())return;const e=t._jflow;t.moveCaretByHitPoint(),t.createShadowInput(),t._caret.animate(e),t.syncShadowInputPosition()}_startEdit(){let t=!0;const e=this._editor;return e.dispatchEvent(new Jr("edit",{target:e,preventDefault(){t=!1}})),t}}class fa extends sa{static name=Xo;exec(){const t=this._editor;t.moveCaretByHitPoint(),t._caret.refresh(),t.syncShadowInputPosition(),t._range.disable()}}class pa extends sa{static name=Go;exec(){const t=this._editor;t.moveCaretByHitPoint();const e=t._caret,n=t._range,i=t._area,s=e.getRow(),r=i.get(s),o=r.length()-1;n.setInitialRange([s,0,0]),n.setRange([s,o,r.tail().tailOffset()]),n.handleCaret(e),n.enable(),t.syncShadowInputPosition()}}class ga extends sa{static name=Wo;exec(){this._editor._range.setInitialRange(null),this._editor.toggleShift(!1)}}class ma extends sa{static name=zo;exec(){const t=this._editor._range,e=this._editor._caret;t.setInitialRange(e.toRange()),this._editor.toggleShift(!0)}}class _a extends sa{static name=Yo;exec(){const t=this._editor;t.moveCaretByHitPoint();const e=this._editor._caret,n=this._editor._range;n.setRange(e.toRange()),n.enable(),n.handleCaret(e),e.refresh(),t.syncShadowInputPosition()}}class va extends sa{static name=Ho;exec(){const t=this._editor,e=t._caret,n=t._range,i=t._area,s=i.length()-1,r=i.get(s),o=r.length()-1;n.setInitialRange([0,0,0]),n.setRange([s,o,r.tail().tailOffset()]),n.handleCaret(e),n.enable(),t.syncShadowInputPosition()}}class ya extends sa{static name=No;exec(){this._editor._range.disable(),this._editor._undoredo.undo(),this._editor.refresh()}}class wa extends sa{static name=Fo;exec(){this._editor._range.disable(),this._editor._undoredo.redo(),this._editor.refresh()}}class ba extends Ir{get currentLineHeight(){return this.lineHeight||parseInt(this.fontSize)}constructor(t){super(t),this.initStack(t),this.initLayout(t),this._undoredo=new na,this._undoredo._editor=this,this._caret=new class{_row=0;_column=[0,0];_status={show:!0,anime:null,lastElapsed:0,refreshElapsed:!1};setRow(t){this._row=t}setColumn(t,e){void 0!==e?this._column[t]=e:this._column=t}getRow(){return this._row}getColumn(t){return void 0!==t?this._column[t]:this._column}animate(t){this._status.anime=t.requestJFlowAnime((t=>{const e=this._status.lastElapsed;this._status.refreshElapsed&&(this._status.lastElapsed=t,this._status.refreshElapsed=!1),t-e>500&&(this._status.show=!this._status.show,this._status.lastElapsed=t)}))}cancelAnimate(){this._status.anime.cancel(),Object.assign(this._status,{show:!0,anime:null,lastElapsed:0})}isShow(){return this._status.show}refresh(){Object.assign(this._status,{show:!0,refreshElapsed:!0})}toRange(){return[this._row,...this._column]}fromRange(t){this._row=t[0],this._column=t.slice(1)}},this._range=new class{_enable=!1;_rangeFrom=null;_rangeTo=null;_initialRange=null;setInitialRange(t){this._initialRange=t}getRangeFrom(){return this._rangeFrom}getRangeTo(){return this._rangeTo}isEnable(){return this._enable}enable(){this._enable=!0}disable(){this._enable=!1}handleCaret(t){const[e,n,i]=this._rangeTo;t.setRow(e),t.setColumn([n,i])}setRange(t){const e=this._initialRange;this._compareRange(e,t)?(this._rangeFrom=e,this._rangeTo=t):(this._rangeFrom=t,this._rangeTo=e)}_compareRange(t,e){return!(t[0]>e[0]||t[0]===e[0]&&t[1]>e[1]||t[0]===e[0]&&t[1]===e[1]&&t[2]>e[2])}delete(t,e){if(this._enable){const n=t._area,i=t._caret,s=this._rangeFrom,r=this._rangeTo,o=n.get(s[0]).get(s[1]),a=n.get(r[0]).get(r[1]);let[c,l,h]=s;if(e.push({op:"range",args:[s.slice(),r.slice()]}),o===a){const t=o.source;o.setSource(t.substring(0,s[2])+t.substring(r[2]),e),o.dirty=!0}else{const n=t._flattenTxtElem;let i,u,d="",f="";const p=n.findIndex(o),g=n.findIndex(a);let m=!1;if("text"===o.type?d=o.source.substring(0,s[2]):i=n.get(p-1),"text"===a.type?(f=a.source.substring(r[2]),m=a.needWrap):u=n.get(g-1),i)if(n.splice(p,g-p+1),"text"===i.type)i.needWrap?c-=1:l-=1,h=i.source.length,i.setSource(i.source+f,e),i.dirty=!0,i.setNeedWrap(m,e);else{const t=new ta("text",d+f);t.setNeedWrap(m,e),n.splice(p,0,t)}else if(n.splice(p,g-p),u){const t=new ta("text",d);n.splice(p,0,t)}else a.setSource(d+f,e),a.dirty=!0;0===n.length()&&n.push(new ta("text",""))}this.disable(),i.setRow(c),i.setColumn([l,h])}}},this._shadowInput=void 0,this.textColor=t.textColor||"transparent",this.fontFamily=t.fontFamily||"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Helvetica,Tahoma,Arial,Noto Sans,PingFang SC,Microsoft YaHei,Hiragino Sans GB,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji",this.fontSize=t.fontSize||"28px",this.fontWeight=t.fontWeight||"",this.elementSpace=t.elementSpace||5,this.lineSpace=t.lineSpace||5,this.placeholder=t.placeholder||"请输入",this.placeholderColor=t.placeholderColor||"#eee",this.cursorColor=t.cursorColor||"#60CFC4",this.textRangeColor=t.textRangeColor||"#4E75EC1A",this.minWidth=t.minWidth||0,this.resolver=()=>{const e=t.resolver();return 0!==e.length&&"text"===e[e.length-1].type||e.push(new ta("text","")),e},this._area=new Ko,this._flattenTxtElem=Qo.create(this.resolver()),this._status={editing:!1,dragover:!1},this.commands=new Map,this.registCommand(da),this.registCommand(fa),this.registCommand(ga),this.registCommand(ma),this.registCommand(_a),this.registCommand(ua),this.registCommand(ra),this.registCommand(oa),this.registCommand(aa),this.registCommand(ca),this.registCommand(va),this.registCommand(pa),this.registCommand(ya),this.registCommand(wa),this._makeFunctional(),this._cacheViewBox=[]}registCommand(t){this.commands.has(t.name)||this.commands.set(t.name,t.create(this))}_makeFunctional(){this.addEventListener("dblclick",(t=>{t.currentTarget===this&&(t.detail.bubbles=!1,this._status.editing&&this.execCommand(Go))})),this.addEventListener("click",(t=>{if(t.currentTarget!==this)return;let e;t.detail.bubbles=!1,e=this._status.editing?this._status.shiftOn?Yo:Xo:Uo,this.execCommand(e)})),this.addEventListener("blur",(t=>{this._status.editing=!1,this._shadowInput&&this._shadowInput.destroy(),this._belongs&&this._jflow._render(),this.dispatchEvent(new Jr("change",{target:this,textElements:this._flattenTxtElem.copy()})),this._range.disable(),this._caret.cancelAnimate()})),this.addEventListener("instancePressStart",(t=>{if(this._status.editing&&!this._status.shiftOn){t.detail.bubbles=!1,t.detail.preventDefault();const e=this._currentp,n=this._positionToCursorOffset(e),i=this._range;i.setInitialRange([n.row,...n.column]);const s=t.detail.jflow;let r=!1;const o=(t=>{this._status.editing=!1,r=!0;const{offsetX:e,offsetY:n}=t,o=s._calculatePointBack([e,n]);s._stack.checkHit(o);const a=this._currentp,c=this._positionToCursorOffset(a);i.setRange([c.row,...c.column]),i.enable()}).bind(this);document.addEventListener("pointermove",o),document.addEventListener("pointerup",(t=>{document.removeEventListener("pointermove",o),i.setInitialRange(null),r&&(i.handleCaret(this._caret),this._status.editing=!0,this._shadowInput.focus())}),{once:!0})}})),this.addEventListener("dragenter",(()=>{this.moveCaretByHitPoint(),this._status.dragover=!0})),this.addEventListener("dragover",(()=>{this.moveCaretByHitPoint()})),this.addEventListener("dragleave",(()=>{this._status.dragover=!1}));const t=(t=>{if(!this._status.dragover)return;t.detail.bubbles=!1,this._status.dragover=!1;const e=this._caret,n=e.getRow(),i=e.getColumn(),s=this._area.get(n);let[r,o]=i;const a=s.get(r),c=s.get(r-1);let l=this._flattenTxtElem,h=l.findIndex(a);"text"!==a.type&&"text"===c?.type&&(o=c.source.length,h=l.findIndex(c));const u=l.length();this.dispatchEvent(new Jr("insert",{...t.detail,type:t.type,textElements:l.copy(),idx:h,offset:o})),l=this._flattenTxtElem,this._status.editing&&(l.length()>u&&e.setColumn([r+l.length()-u,0]),this._shadowInput.focus()),this._status.editing&&this._caret.refresh(),this.syncShadowInputPosition(),this._range.disable()}).bind(this);this.addEventListener("pressEnd",t),this.addEventListener("drop",t)}toggleShift(t){this._status.shiftOn=t}execCommand(t){this.commands.get(t).exec()}createShadowInput(){const t=this._jflow;this._shadowInput=new Jo(t.DOMwrapper),this._shadowInput.addEventListener(Eo,(t=>{const e=t.detail.kind;this.execCommand(e)})),this._shadowInput.addEventListener(Lo,(t=>{const e=t.detail.kind,n=t.detail.data;this.commands.get(Lo).exec(e,n)})),this._status.editing=!0,t.setFocusInstance(this)}moveCaretByHitPoint(){const t=this._currentp,e=this._caret,{row:n,column:i}=this._positionToCursorOffset(t);e.setRow(n),e.setColumn(i)}refresh(){this.recalculateUp(),this.syncShadowInputPosition(),this._jflow._render()}refreshTextElements(){this._flattenTxtElem=Qo.create(this.resolver())}_positionToCursorOffset(t){const[e,n]=t,i=this._area,s=e+this.width/2,r=n+this.height/2,o=i.getLineAbove(r);return{row:o,column:i.get(o).getColumnNearest(s,this.elementSpace,this.fontSize,this.fontFamily)}}_caretToPosition(){const t=this._caret.getRow(),e=this._caret.getColumn(),n=this._area.get(t),[i,s]=e,r=n.get(i),o=this._flattenTxtElem.findIndex(r),a=this._flattenTxtElem.get(o-1);let c,l=this.currentLineHeight/2;if("text"===r.type){const t=r.source.substring(0,s);Fs((e=>{e.beginPath(),e.font=`${this.fontSize} ${this.fontFamily}`,c=r.anchorX-r.width/2+e.measureText(t).width}))}else c=r.anchorX-r.width/2,l=Math.max(l,r.height/2);return 0===s&&a&&"text"!==a.type&&(l=Math.max(l,a.height/2)),[c,l,n.anchorY,a,r]}syncShadowInputPosition(){if(this._status.editing){const[t,e,n]=this._caretToPosition(),i=this.calculateToRealWorld([t,n+e]),s=this._jflow.canvasMeta,r=Math.min(s.actual_width-120,i[0]);this._shadowInput.syncPosition(r,i[1]),this._shadowInput.focus()}}render(t){t.save(),this._isMoving?t.globalAlpha=.6:1!==this.opacity&&(t.globalAlpha=this.opacity);const[e,n]=this.anchor,i=this._jflow,s=this._area;t.translate(e,n);const r=this._flattenTxtElem;if(r.isEmpty())return t.beginPath(),t.font=`${this.fontWeight} ${this.fontSize} ${this.fontFamily}`,t.textAlign="center",t.textBaseline="middle",t.fillStyle=this.placeholderColor,t.fillText(this.placeholder,0,0),this._randerCursor(t),t.translate(-e,-n),void t.restore();t.beginPath(),t.font=`${this.fontWeight} ${this.fontSize} ${this.fontFamily}`,t.textAlign="center",t.textBaseline="middle",t.fillStyle=this.textColor,s.forEach((e=>{e.forEach((e=>{"text"===e.type&&t.fillText(e.source,e.anchorX,e.anchorY)}))})),r.forEach((e=>{if("text"!==e.type){const n=i.getRenderNodeBySource(e.source);n.visible&&(t.save(),n.render(t),t.restore())}})),this._randerCursor(t),this._renderRange(t),t.translate(-e,-n),t.restore()}_randerCursor(t){if(this._caret.isShow()&&(this._status.editing||this._status.dragover)){const[e,n,i]=this._caretToPosition();t.beginPath(),t.moveTo(e,i-n),t.lineTo(e,i+n),t.lineWidth=2,t.strokeStyle=this.cursorColor,t.stroke()}}_renderRange(t){const e=this._range;if(e.isEnable()){const n=this._area,i=this.textRangeColor,s=this.height,r=this.width,o=this.lineSpace,[a,c,l]=e.getRangeFrom(),[h,u,d]=e.getRangeTo();if(a===h){if(c===u&&l==d)return;const e=n.get(a);let r=a===n.length()-1?0:o;const h=e.reduceHeight-r-e.height-s/2,f=e.height,p=this._measureElementOffsetX(e.get(c),l,t),g=this._measureElementOffsetX(e.get(u),d,t);t.beginPath(),t.rect(p,h,g-p,f),t.fillStyle=i,t.fill()}else{let e=a,f=!0;for(;e<=h;){const a=n.get(e);let p=e===n.length()-1?0:o;const g=a.reduceHeight-p-a.height-s/2,m=a.height;if(f){const e=a.get(c),n=this._measureElementOffsetX(e,l,t),s=a.tail(),r=s.anchorX+s.width/2;t.beginPath(),t.rect(n,g,r-n,m),t.fillStyle=i,t.fill()}else if(e===h){const e=a.get(u),n=this._measureElementOffsetX(e,d,t);t.beginPath(),t.rect(-r/2,g,e.reduceWidth+(n-e.anchorX+e.width/2),m),t.fillStyle=i,t.fill()}else t.beginPath(),t.rect(-r/2,g,a.width,m),t.fillStyle=i,t.fill();f=!1,e++}}}}_measureElementOffsetX(t,e,n){return"text"!==t.type||0===e?t.anchorX-t.width/2:t.anchorX-t.width/2+n.measureText(t.source.substring(0,e)).width}measureTextWidth(t){let e;return Fs((n=>{n.font=`${this.fontSize} ${this.fontFamily}`,e=n.measureText(t).width})),e}getBoundingDimension(){return{width:this.width,height:this.height}}getBoundingRect(){const t=this.anchor,e=this.width/2,n=this.height/2,i=t[0]-e,s=t[1]-n,r=t[0]+e,o=t[1]+n,a=this._boundingrect;return a[0]=i,a[1]=s,a[2]=r,a[3]=o,a}_getViewBox(){const t=this._belongs.getCacheViewBox(),e=this._cacheViewBox;return this._calculatePointBackWithPoint(t[0],t[1],e,0,1),this._calculatePointBackWithPoint(t[2],t[3],e,2,3),this._cacheViewBox}getCacheViewBox(){return this._cacheViewBox}calculateToCoordination(t){const[e,n]=t,[i,s]=this.anchor,r=[e+i,n+s];return this._belongs&&this._belongs.calculateToCoordination?this._belongs.calculateToCoordination(r):r}calculateToRealWorld(t){const[e,n]=t,[i,s]=this.anchor,r=[e+i,n+s];if(this._belongs&&this._belongs.calculateToRealWorld)return this._belongs.calculateToRealWorld(r)}_calculatePointBack(t){const[e,n]=t,[i,s]=this.anchor;return[e-i,n-s]}_calculatePointBackWithPoint(t,e,n,i,s){n[i]=t-this.anchor[0],n[s]=e-this.anchor[1]}isHit(t,e){const n=this._calculatePointBack(t),i=this._jflow;this._currentp=n;let s=[];this._flattenTxtElem.forEach((t=>{if("text"!==t.type){const e=i.getRenderNodeBySource(t.source);e.visible&&s.push(e)}}));const r=this._stack.checkHit(n,e,(t=>s.includes(t)));if(r)return r;const o=this.anchor,a=this.width/2,c=this.height/2;return t[0]>o[0]-a&&t[0]<o[0]+a&&t[1]>o[1]-c&&t[1]<o[1]+c}clone(){return new fo({width:this.width,height:this.height,cache:t=>{const[e,n]=this.anchor;t.translate(-e+this.width/2,-n+this.height/2),this.render(t)}})}destroy(){this._jflow._focus.instance===this&&this._jflow.blur()}}Object.assign(ba.prototype,Fr),Object.assign(ba.prototype,zr),Object.assign(ba.prototype,{_getBoundingGroupRect(){},resetChildrenPosition(){},reflow(){let t=this.currentLineHeight;const e=this._flattenTxtElem,n=this._area;if(e.isEmpty()){let i=0;const s=e.get(0);return Fs((t=>{t.font=`${this.fontSize} ${this.fontFamily}`,i=t.measureText(this.placeholder).width})),n.truncate({height:t,reduceHeight:t}).insert(0,s),Object.assign(s,{anchorX:-i/2,height:t,isTail:!0}),this.width=i,void(this.height=t)}const i=this._jflow;Fs((t=>{t.font=`${this.fontSize} ${this.fontFamily}`,e.forEach((e=>{"text"===e.type&&e.dirty&&(e.width=t.measureText(e.source).width,e.dirty=!1)}))}));const s=new Ko;s.truncate({height:t});let r=s.get(0),o=0,a=0,c=null;const l=this.lineSpace,h=this.elementSpace;e.forEach((e=>{if(r.push(e),e.reduceWidth=r.width,"text"===e.type)e.height=t,r.width+=e.width,e.needWrap&&(o+=r.height+l,r.reduceHeight=o,a=Math.max(r.width,a),r=Zo.create({height:t}),s.push(r));else{const t=i.getRenderNodeBySource(e.source);e.height=t.height,r.height=Math.max(r.height,t.height);const n=c&&"text"!==c.type?h:2*h;r.width+=t.width+n}c=e})),e.tail().isTail=!0,o+=r.height,r.reduceHeight=o,a=Math.max(this.minWidth,Math.max(r.width,a));const u=a/2;let d=-o/2,f=0;s.forEach((t=>{const{height:e,reduceHeight:n}=t,s=d+f+e/2;t.anchorY=s;let r=-u,o=null;t.forEach((t=>{if("text"===t.type)t.anchorY=s,t.anchorX=r+t.width/2,r+=t.width;else{const e=i.getRenderNodeBySource(t.source),n=!o||"text"===o.type,a=n?2*h:h;t.width=e.width,t.anchorY=s,t.anchorX=r+t.width/2+(n?a/2:0),e.anchor=[t.anchorX,t.anchorY],r+=t.width+a}o=t})),f=n})),this._area=s,this.width=a,this.height=o}});const xa=ba,Sa=Qr(eo),ka=Qr(no),Ba=Qr(so),Ca=Qr(ro,{shapeShift:(t,e)=>[t+.28865*e,e]}),La=Qr(class extends ro{constructor(t){super(t)}render(t){t.save(),this._isMoving&&(t.globalAlpha=.6),t.beginPath();const[e,n]=this.anchor,i=this.width/2,s=this.height/2,r=i/1.732,o=n-s,a=n+s,c=n-s+r,l=n+s-r,h=e-i,u=e+i;t.moveTo(e,o),t.lineTo(u,c),t.lineTo(u,l),t.lineTo(e,a),t.lineTo(h,l),t.lineTo(h,c),t.closePath(),t.fillStyle=this.backgroundColor,this.shadowColor&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),t.fill(),this.borderWidth&&(t.lineWidth=this.borderWidth,t.strokeStyle=this.borderColor,t.stroke()),t.restore(),this._cachePoints=[[e,o],[u,c],[u,l],[e,a],[h,l],[h,c]]}},{shapeShift:(t,e)=>[t,e+.5773*t]}),Ea=Qr(io),Ta=Qr(to,{shapeShift(t,e,n){const i=Math.ceil(Math.sqrt(t*t+e*e)/2);n.radius=i;const s=2*i;return[s,s]}});class Pa extends EventTarget{constructor(t){super(),this.uniqueName="jflow",this.eventAdapter=new class{constructor(t={}){this.plugin=function(){let t={pointerDown:!1,dirty:!1};return{canvas:{wheel:function(t,e){t.preventDefault();let{offsetX:n,offsetY:i,deltaX:s,deltaY:r}=t;t.ctrlKey?(r=-r,e.zoomHandler(n,i,s,r,t)):e.panHandler(-s,-r,t)},pointerdown:function(e,n){const{offsetX:i,offsetY:s,deltaY:r,button:o}=e;0===o&&(t.pointerDown=!0,n.pressStartHandler(i,s,e))},pointermove:function(e,n){const{offsetX:i,offsetY:s}=e;t.pointerDown&&(t.dirty=!0),n.pressMoveHandler(i,s,e)},pointerup:function(e,n){e.preventDefault();const{offsetX:i,offsetY:s,button:r}=e;0===r&&t.pointerDown&&t.dirty&&(t.pointerDown=!1,t.dirty=!1,n.pressUpHanlder(!1,e))},contextmenu:function(t,e){t.preventDefault(),t.stopPropagation();const{offsetX:n,offsetY:i}=t;e.contextMenuHanlder(n,i,t)},dblclick:function(t,e){t.preventDefault(),t.stopPropagation();const{offsetX:n,offsetY:i}=t;e.dblclickHandler(n,i,t)},click:function(e,n){e.preventDefault(),e.stopPropagation();const{offsetX:i,offsetY:s}=e;t.dirty||(t.pointerDown=!1,t.dirty=!1,n.clickHanlder(i,s,e))}},document:{pointerup:function(t,e){e.pressUpHanlder(!0,t)}}}}(),this.use(t),this.canvasHandlers=[],this.documentHandlers=[]}use(t={}){const{canvas:e,document:n}=t;if(e)for(let t in e)e.hasOwnProperty(t)&&(this.plugin.canvas[t]=e[t]);if(n)for(let t in n)n.hasOwnProperty(t)&&(this.plugin.document[t]=n[t])}apply(t){const{canvas:e,document:n}=this.plugin,i=t.canvas;for(let n in e){const s=e[n];function r(e){s(e,t)}i.addEventListener(n,r),this.canvasHandlers.push({eventName:n,handlerWrapperd:r})}for(let e in n){let i,s={};function r(e){i(e,t)}"function"==typeof n[e]?i=n[e]:(i=n[e].handler,Object.assign(s,n[e].options)),document.addEventListener(e,r,s),this.documentHandlers.push({eventName:e,handlerWrapperd:r,options:s})}}unload(t){const e=t.canvas;this.canvasHandlers.forEach((({eventName:t,handlerWrapperd:n})=>{e.removeEventListener(t,n)})),this.documentHandlers.forEach((({eventName:t,handlerWrapperd:e,options:n})=>{console.log("unload",t),document.removeEventListener(t,e,n)}))}}(t.eventAdapter),this.initNodeWeakMap(),this.initAnime(),this.initStack(t),this.initLayout(t),this.ctx=null,this.canvas=null,this.dpr=1,this.padding=20,this.position=null,this.scale=null,this.initialZoom=t.initialZoom,this.initialPosition=t.setInitialPosition,this.maxZoom=t.maxZoom||3,this.minZoom=t.minZoom||.5,this.NodeRenderTop=!!t.NodeRenderTop,this.worldMargin=t.worldMargin,this.draggingbehavior=Object.assign({panInBorder:{enable:!0,padding:20,deltamovement:8,allowMovingTargetInPan:!0}},t.draggingbehavior||{}),this.scrollBarBehavior=Object.assign({enable:!0},t.scrollBarBehavior||{}),this.offeset=null,this._lastState={x:null,y:null,dragging:!1,processing:!1},this._lastDragState={target:null,targetLink:null,processing:!1},this._target={instance:null,link:null,moving:null,isInstanceDirty:!1,isLinkDirty:!1,cache:{stack:null,belongs:null,point:null},meta:{x:void 0,y:void 0,initialX:void 0,initialY:void 0},status:{dragovering:!1,dragging:!1,processing:!1,movingState:!1}},this._focus={instance:null},this._dragOverTarget=null,this.allowDrop=t.allowDrop,this._tempNode=null,this._tempLink=null,this.mode=gr.DEFAULT,this._allowMovingTarget=!0,this.canvasMeta={},this._cacheViewBox=[]}setMovingTargets(t){Object.assign(this._target,{moving:t})}setTempDraggingInstance(t){t._belongs=this,this._tempNode=t,Object.assign(this._target,{moving:[this._tempNode],dragging:!0})}removeTempDraggingInstance(){if(this._tempNode){const t=this._tempNode.anchor;return this._tempNode=null,t}}preventDefaultDragging(){this._allowMovingTarget=!1}allowDefaultDragging(){this._allowMovingTarget=!0}$mount(t){const{canvas:e,ctx:n,scale:i,width:s,height:r,raw_width:o,raw_height:a,left:c,top:l}=Ds(t);this.reflow(),this.ctx=n,this.DOMwrapper=t,this.canvas=e,this.canvas.setAttribute("data-jflow",!0),this.canvas.$jflow=this,this.canvasMeta={width:o,height:a,actual_width:s,actual_height:r},this.dpr=i,this._getBoundingGroupRect();const h=this.padding,{width:u,height:d,x:f,y:p}=this.bounding_box,g={x:h,y:h,width:s-2*h,height:r-2*h},m={x:0,y:0,offsetX:0,offsetY:0},_=g.width/u,v=g.height/d,y=_<=v?"x":"y";let w;w=this.initialZoom?this.initialZoom:Math.min(_,v),this.scale=w,w>this.maxZoom&&(this.maxZoom=w),w<this.minZoom&&(this.minZoom=w);const b=f*w,x=p*w,S=g.width,k=g.height;if(this.initialPosition){const{x:t,y:e}=this.initialPosition(b,x,S,k,g.x,g.y,s,r,f,p,u,d);m.x=t,m.y=e}else m.x="x"===y?g.x:(S-u*w)/2+h,m.y="y"===y?g.y:(k-d*w)/2+h;m.offsetX=m.x-b,m.offsetY=m.y-x,this.position=m,this._readyToRender=!0,this.scrollBarBehavior.enable&&this.initScrollBar(this.scrollBarBehavior),this.__render(),this._createEventHandler(),zs((t=>{this.dpr=t,this.resizeCanvas(),this.scheduleRender()}),(t=>{this.destroyDprListener=t}))}setLinkingMode(t,e,n){const i=this.getRenderNodeBySource(t);this._tempNode=new jr,this._tempLink=e(n?{from:this._tempNode,to:i}:{from:i,to:this._tempNode}),this.sendMessage({instance:t}),this.mode=gr.LINKING}isInLinkingMode(){return this.mode===gr.LINKING}setLinkingLink(t){this.mode===gr.LINKING&&this._tempLink.setConfig(t)}resetLinkingLink(){this.mode===gr.LINKING&&this._tempLink.setConfig({to:this._tempNode})}clearTemp(){this._tempNode&&(this._tempNode.destroy(),this._tempNode=null),this._tempLink&&(this._tempLink.destroy(),this._tempLink=null),this._render()}preventClearTemp(){this._preventClearTemp=!0}resizeCanvas(){if(this.canvas&&this.DOMwrapper){const{width:t,height:e,raw_width:n,raw_height:i}=function(t,e){const{width:n,height:i,left:s,top:r}=e.getBoundingClientRect();t.style.width=n+"px",t.style.height=i+"px";const o=window.devicePixelRatio;return t.width=Math.floor(n*o),t.height=Math.floor(i*o),{width:n,height:i,raw_width:t.width,raw_height:t.height}}(this.canvas,this.DOMwrapper);this.canvasMeta={width:n,height:i,actual_width:t,actual_height:e}}}setFocusInstance(t){this._focus.instance=t}focusOn(t){const e=this._calculatePointBack([this.canvasMeta.actual_width/2,this.canvasMeta.actual_height/2]);let n=t.anchor;t._belongs.calculateToCoordination&&(n=t._belongs.calculateToCoordination(n));const i=(e[0]-n[0])*this.scale,s=(e[1]-n[1])*this.scale;this._recalculatePosition(i,s),this._render()}_getBoundingGroupRect(){const t=this._stack.getBoundingRectPoints();if(this.bounding_box){this.bounding_box=mr(t);const{x:e,y:n}=this.bounding_box,i=this.scale;this.position.x=this.position.offsetX+e*i,this.position.y=this.position.offsetY+n*i}else this.bounding_box=mr(t)}_createEventHandler(){const t=this.canvas;let e;this.eventAdapter.apply(this);const n=()=>{this.eventAdapter.unload(this),this.destroyDprListener()};if(e=n,this.allowDrop){const i=this._onDragover.bind(this),s=this._onDrop.bind(this),r=this._onDragLeave.bind(this);t.addEventListener("dragstart",(t=>{t.preventDefault()})),t.addEventListener("dragover",i),t.addEventListener("drop",s),t.addEventListener("dragleave",r),e=()=>{n(),t.removeEventListener("dragover",i),t.removeEventListener("drop",s),t.removeEventListener("dragleave",r)}}this.destroy=e}_targetLockOn(t,e){let n=this._calculatePointBack(t);const i=n;this._currentp=n;let s=this._stack;const r=this._getViewBox(),o=s.checkHit(n,(t=>this._target.status.dragging&&t===this._getMovingTarget()),(t=>Er(r,t.getBoundingRect())));let a,c=this._linkStack;if(o&&o._belongs!==this||(a=c.checkHit(n,(t=>{if(!this._target.status.dragging)return!1;const e=this._getMovingTarget();return t.from===e||t.to===e}))),a||(a=c.checkHit(n,(t=>!t.ON_TOP))),Object.assign(this._target,{instance:o,link:a,isInstanceDirty:o===this._target.instance,isLinkDirty:a===this._target.link}),Object.assign(this._target.cache,{stack:s,belongs:this,point:n,topLayerPoint:i}),Object.assign(this._target.meta,{x:t[0],y:t[1]}),"pressStart"===e&&!this._target.status.dragging&&!this._target.status.dragovering){let t=o;for(;t&&t._belongs.lock&&t!==this;)t=t._belongs;this.setMovingTargets(t&&[t]),t&&o.bubbleEvent(new Jr("afterResolveMovingTarget",{event:e,target:t,jflow:this,bubbles:!0}))}return["pressStart","click","dblclick","contextclick"].includes(e)&&this._focus.instance&&this._focus.instance!==o&&(this._focus.instance.dispatchEvent(new Jr("blur",{relatedTarget:o})),this._focus.instance=null),this._target}blur(){this._focus.instance&&(this._focus.instance.dispatchEvent(new Jr("blur",{relatedTarget:null})),this._focus.instance=null)}_getMovingTarget(){return this._target.moving&&this._target.moving[0]}_processDragOver(t,e){if(this._dragOverTarget!==t){const n=this.readMessage()?.instance;this._dragCurrentData=n;const{point:i}=this._target.cache;if(this._dragOverTarget){const t=this._dragOverTarget;t.dispatchEvent(new Jr("dragleave",{event:e,instance:t,target:n,jflow:this,point:i}))}t&&t.dispatchEvent(new Jr("dragenter",{event:e,instance:t,target:n,jflow:this,point:i})),this._dragOverTarget=t}else this._dragOverTarget&&this._dragOverTarget.dispatchEvent(new Jr("dragover",{event:e,instance:t,jflow:this,target:this._dragCurrentData}));this._processPanInBorder()}_processPanInBorder(){if(this.draggingbehavior?.panInBorder?.enable&&(this.draggingbehavior.panInBorder.timer||(this.draggingbehavior.panInBorder.timer=Date.now()),Date.now()-this.draggingbehavior.panInBorder.timer>500)){const[t,e,n,i]=this._cacheViewBox,[s,r]=this._currentp,{padding:o,deltamovement:a}=this.draggingbehavior.panInBorder;let c=0,l=0;s<t+o&&(c=a),s>n-o&&(c=-a),r<e+o&&(l=a),r>i-o&&(l=-a),this.__processOverAnime&&this.__processOverAnime.cancel(),c||l?this.__processOverAnime=this.requestJFlowAnime((()=>{this.panHandler(c,l)})):this.draggingbehavior.panInBorder.timer=null}}_onDragover(t){if(t.preventDefault(),t.stopPropagation(),this._lastDragState.processing)return;this._lastDragState.processing=!0;const{offsetX:e,offsetY:n}=t;Object.assign(this._target.status,{dragovering:!0}),this._targetLockOn([e,n]);const i=this._target.instance||this._target.link;this._processDragOver(i,t),this._target.isLinkDirty||this._target.isInstanceDirty?Promise.resolve().then((()=>{this._render(),this._target.isLinkDirty=!1,this._target.isInstanceDirty=!1,this._lastDragState.processing=!1})):this._lastDragState.processing=!1}_cancelPanInBorder(){this.__processOverAnime&&this.__processOverAnime.cancel(),this.draggingbehavior?.panInBorder&&(this.draggingbehavior.panInBorder.timer=null)}_onDragLeave(){this._cancelPanInBorder()}_onDrop(t){this._cancelPanInBorder();const e=this.consumeMessage()?.instance;if(this._dragOverTarget){const e=this._dragOverTarget;e.dispatchEvent(new Jr("dragoverend",{event:t,instance:e})),this._dragOverTarget=null}const{link:n,instance:i}=this._target,{point:s,belongs:r}=this._target.cache;n?n.dispatchEvent(new Jr("drop",{event:t,instance:e,link:n,jflow:this,belongs:r,point:s})):i?i.bubbleEvent(new Jr("drop",{event:t,instance:e,jflow:this,target:i,point:s,bubbles:!0})):this.dispatchEvent(new Jr("drop",{event:t,instance:e,jflow:this,target:i,point:s})),requestAnimationFrame((()=>{this.cancelDrop()}))}cancelDrop(){this._target.instance=null,this._target.link=null,Object.assign(this._target.status,{dragovering:!1})}zoomHandler(t,e,n,i,s){if(this._zooming)return;this._zooming=!0;const{width:r,height:o,x:a,y:c}=this.bounding_box,{actual_width:l,actual_height:h}=this.canvasMeta;let u=this.minZoom;if(this.worldMargin){const t=this.worldMargin,e=r+2*t,n=o+2*t;u=Math.max(u,Math.max(l/e,h/n))}let d=this.scale;d*=i>0?1.05:1/1.05,d=Math.min(this.maxZoom,Math.max(u,d));var f=d-this.scale,p=r*this.scale,g=o*this.scale,m=r*f,_=o*f,v=-(t-this.position.x)/p,y=-(e-this.position.y)/g;this.scale=d,this._recalculatePosition(v*m,y*_),this.dispatchEvent(new Jr("zoompan",{deltaX:0,deltaY:0})),this.scheduleRender((()=>{this._zooming=!1}))}panHandler(t,e,n){if(this._panning)return;this._panning=!0;const{dragging:i}=this._target.status;if(i){const n=this._target.moving;n&&this.draggingbehavior.panInBorder.allowMovingTargetInPan&&n.forEach((n=>{n.anchor[0]+=-t/this.scale,n.anchor[1]+=-e/this.scale}))}this._recalculatePosition(t,e),this.dispatchEvent(new Jr("zoompan",{deltaX:t,deltaY:e})),this.scheduleRender((()=>{this._panning=!1}))}pressStartHandler(t,e,n){if(this.checkScrollDragging())return;Object.assign(this._target.meta,{initialX:t,initialY:e});const{link:i,instance:s}=this._targetLockOn([t,e],"pressStart");if(this.mode===gr.LINKING)return;if(Object.assign(this._target.status,{dragging:!0,processing:!1}),this._target.moving){const t=this._getMovingTarget();t.dispatchEvent(new Jr("pressStart",{event:n,instance:t,jflow:this}))}const r=this._resolveLockOnTarget(i,s);r&&r.bubbleEvent(new Jr("instancePressStart",{event:n,target:r,jflow:this,bubbles:!0,preventDefault:()=>{this._preventPressSequeence=!0,this._clearTarget(),document.addEventListener("pointerup",(t=>{t.preventDefault(),t.stopPropagation(),this._preventPressSequeence=!1}),{once:!0})}})),this._preventPressSequeence||this.dispatchEvent(new Jr("jflowPressStart",{event:n,jflow:this}))}pressMoveHandler(t,e,n){if(this._preventPressSequeence)return;if(this.checkScrollDragging())return;const{dragging:i,processing:s}=this._target.status,{x:r,y:o}=this._target.meta;if(!i){if(this.checkScrollBarHover(t,e))return;this.resetScrollBarHover()}if(!i&&!s){const{link:i,instance:s}=this._targetLockOn([t,e]),r=this._resolveLockOnTarget(i,s);if(r?r.bubbleEvent(new Jr("instancemousemove",{event:n,instance:r,jflow:this,bubbles:!0})):this.dispatchEvent(new Jr("instancemousemove",{event:n,instance:null,jflow:this})),this.mode===gr.LINKING)return this._tempNode.anchor=this._currentp,this.scheduleRender((()=>{this._target.isLinkDirty=!1,this._target.isInstanceDirty=!1,this._target.status.processing=!1})),void this._processPanInBorder()}if(this.dispatchEvent(new Jr("canvasmousemove",{event:n,jflow:this})),!i)return;if(s)return;const a=this._target.moving;this._target.status.movingState=!0,this._target.status.processing=!0;const c=t-r,l=e-o;a?this._allowMovingTarget&&a.forEach((t=>{t.anchor[0]+=c/this.scale,t.anchor[1]+=l/this.scale})):(this._recalculatePosition(c,l),this.dispatchEvent(new Jr("zoompan",{deltaX:c,deltaY:l})));const{instance:h,link:u}=this._targetLockOn([t,e]);this._processDragOver(h||u,n),this.scheduleRender((()=>{this._target.isLinkDirty=!1,this._target.isInstanceDirty=!1,this._target.status.processing=!1}))}pressUpHanlder(t,e){if(!this._preventPressSequeence){if(this.__processOverAnime&&this.__processOverAnime.cancel(),this._cancelPanInBorder(),this._target.meta,this.mode===gr.LINKING){const t=this._target.instance,n=this.consumeMessage();let i=!1;const s=()=>{i=!0};if(t)t.bubbleEvent(new Jr("link",{event:e,target:t,jflow:this,payload:n,bubbles:!0,link:this._tempLink,preventDefault:s}));else{const{offsetX:t,offsetY:i}=e;this.dispatchEvent(new Jr("link",{event:e,jflow:this,payload:n,anchor:this._calculatePointBack([t,i]),link:this._tempLink,preventDefault:s}))}if(i)return;return this._clearTarget(),this._preventClearTemp||(this._tempNode&&(this._tempNode.destroy(),this._tempNode=null),this._tempLink&&(this._tempLink.destroy(),this._tempLink=null)),this._preventClearTemp=!1,this.mode=gr.DEFAULT,void this._render()}if(this._target.moving){let t=!1;if(this._layout.static&&(t=this.staticCheck(this._getMovingTarget())),!t&&this._target.link){const{point:t,belongs:n}=this._target.cache,i=this._target.link,s=this._getMovingTarget();i.dispatchEvent(new Jr("drop",{event:e,instance:s,link:i,jflow:this,belongs:n})),this._target.link=null,this._target.instance=null}this._target.moving&&(this._target.instance?this._target.instance.bubbleEvent(new Jr("pressEnd",{event:e,instance:this._getMovingTarget(),jflow:this,target:this._target.instance,bubbles:!0})):this.dispatchEvent(new Jr("pressEnd",{event:e,instance:this._getMovingTarget(),jflow:this}))),this._target.moving=null,this.removeTempDraggingInstance(),this._render()}this._clearTarget()}}clickHanlder(t,e,n){const{link:i,instance:s,meta:r}=this._targetLockOn([t,e],"click");if(Math.abs(r.initialX-r.x)<1&&Math.abs(r.initialY-r.y)<1){if(n.target!==this.canvas)return this._clearTarget(),void Object.assign(this._target.meta,{initialX:void 0,initialY:void 0});const{topLayerPoint:t}=this._target.cache,e=this._resolveLockOnTarget(i,s);if(e){const i=e;i.bubbleEvent(new Jr("click",{event:n,jflow:this,target:i,topLayerPoint:t,bubbles:!0}))}else this.dispatchEvent(new Jr("click",{event:n,jflow:this,topLayerPoint:t}));this._clearTarget(),Object.assign(this._target.meta,{initialX:void 0,initialY:void 0})}}contextMenuHanlder(t,e,n){const{link:i,instance:s}=this._targetLockOn([t,e],"contextclick"),{topLayerPoint:r}=this._target.cache,o=this._resolveLockOnTarget(i,s);if(o){const t=o;t.bubbleEvent(new Jr("contextclick",{event:n,jflow:this,target:t,topLayerPoint:r,bubbles:!0}))}else this.dispatchEvent(new Jr("contextclick",{event:n,jflow:this,topLayerPoint:r}))}dblclickHandler(t,e,n){const{link:i,instance:s}=this._targetLockOn([t,e],"dblclick"),{topLayerPoint:r}=this._target.cache,o=this._resolveLockOnTarget(i,s);if(o){const t=o;t.bubbleEvent(new Jr("dblclick",{event:n,jflow:this,target:t,topLayerPoint:r,bubbles:!0}))}else this.dispatchEvent(new Jr("dblclick",{event:n,jflow:this,topLayerPoint:r}))}_resolveLockOnTarget(t,e){return t?.ON_TOP?t:e||t}_clearTarget(){Object.assign(this._target.meta,{x:void 0,y:void 0}),Object.assign(this._target.status,{dragging:!1,processing:!1,movingState:!1}),Object.assign(this._target,{instance:null,link:null,moving:null})}_recalculatePosition(t,e,n){const{x:i,y:s,width:r,height:o}=this.bounding_box,{actual_width:a,actual_height:c}=this.canvasMeta;if(void 0===n&&(n=this.scale),this.worldMargin){const l=this.worldMargin,h=(i+r+l)*n-a,u=(i-l)*n,d=i*n,f=this.position.x+t-d;this.position.offsetX=Math.min(Math.max(-h,f),-u),this.position.x=this.position.offsetX+d;const p=(s+o+l)*n-c,g=(s-l)*n,m=s*n,_=this.position.y+e-m;this.position.offsetY=Math.min(Math.max(-p,_),-g),this.position.y=this.position.offsetY+m}else this.position.x+=t,this.position.y+=e,this.position.offsetX=this.position.x-i*n,this.position.offsetY=this.position.y-s*n}calculateToRealWorld(t){const e=this.scale,n=this.position;return[t[0]*e+n.offsetX,t[1]*e+n.offsetY]}_calculatePointBack(t){const e=this.scale,n=this.position;return[(t[0]-n.offsetX)/e,(t[1]-n.offsetY)/e]}_calculatePointBackWithPoint(t,e,n,i,s){const r=this.scale,o=this.position;n[i]=(t-o.offsetX)/r,n[s]=(e-o.offsetY)/r}_calculateDistance(t){return this.scale*t}_resetTransform(){const{width:t,height:e}=this.canvasMeta,n=this.position,i=this.scale,s=this.ctx;s.setTransform(),s.clearRect(0,0,t,e),s.scale(this.dpr,this.dpr),s.transform(i,0,0,i,n.offsetX,n.offsetY)}resetTransform(t){const e=this.position,n=this.scale;t.setTransform(),t.scale(this.dpr,this.dpr),t.transform(n,0,0,n,e.offsetX,e.offsetY)}_getViewBox(){const t=this._cacheViewBox;return this._calculatePointBackWithPoint(0,0,t,0,1),this._calculatePointBackWithPoint(this.canvasMeta.actual_width,this.canvasMeta.actual_height,t,2,3),t}setNodeToTopLayer(t){const e=this._stack.findIndex((e=>e===t));if(-1!==e){const[t]=this._stack.splice(e,1);this._stack.push(t)}}getCacheViewBox(){return this._cacheViewBox}_render(){this.scheduleRender()}__render(){if(!this._readyToRender)return;this.runAnimeFrame(),this._resetTransform();const t=this.ctx;this.dispatchEvent(new Jr("beforeJflowRender",{ctx:t}));const e=this._getViewBox();this.NodeRenderTop?(this._linkStack.render(t,(t=>!t.ON_TOP&&t.isInViewBox(e))),this._stack.render(t,(t=>{const n=Er(e,t.getBoundingRect());return t._isInViewBox=n,n})),this._linkStack.render(t,(t=>t.ON_TOP&&t.isInViewBox(e)))):(this._stack.render(t,(t=>{const n=Er(e,t.getBoundingRect());return t._isInViewBox=n,n})),this._linkStack.render(t,(t=>t.isInViewBox(e)))),this._tempNode&&(t.save(),this._tempNode.render(t),t.restore()),this._tempLink&&(t.save(),this._tempLink.isInViewBox(e),this._tempLink.render(t),t.restore()),this.dispatchEvent(new Jr("afterJflowRender",{ctx:t})),this.renderScrollBar(t)}}Object.assign(Pa.prototype,Wr),Object.assign(Pa.prototype,Fr),Object.assign(Pa.prototype,zr),Object.assign(Pa.prototype,Vr),Object.assign(Pa.prototype,Hr),Object.assign(Pa.prototype,Ur),Object.assign(Pa.prototype,Gr),Object.assign(Pa.prototype,Yr);const Ra=Pa,Oa={provide(){return{addToStack:this.addToStack,removeFromStack:this.removeFromStack}},data:()=>({stack:[]}),methods:{addToStack(t,e){this._jflowInstance.addToStack(t),e&&t._jflow.setRenderNodeBySource(e,t)},removeFromStack(t){this._jflowInstance.removeFromStack(t)},onStackChangeHandler(){this._jflowInstance.recalculate(),this._jflowInstance.reflow()}}},Aa={mixins:[Oa],provide(){return{renderJFlow:this.renderJFlow,getJFlow:this.getInstance,addToLinkStack:this.addToLinkStack,removeFromLinkStack:this.removeFromLinkStack}},props:{configs:{type:Object,default:function(){return{}}},loading:Boolean,genVueComponentKey:{type:Function}},data:()=>({renderNodes:[],renderLinks:[]}),render:function(t){return this.renderNodes.length?t("div",[...this.renderNodes.map((({type:t,source:e,layoutNode:n})=>{if(!this.$scopedSlots[t]){if(!this.$scopedSlots.jflowcommon)return null;t="jflowcommon"}if(n.__vnode__)return n.__vnode__;const[i]=this.$scopedSlots[t]({source:e,layoutNode:n});return this.genVueComponentKey&&(i.key=this.genVueComponentKey(e)),n.__vnode__=i,i})).filter((t=>!!t)),...this.renderLinks.map((t=>{let e=t.type||"plainlink";if(!this.$scopedSlots[e])return null;if(t.__vnode__)return t.__vnode__;const[n]=this.$scopedSlots[e]({configs:t});if(this.genVueComponentKey){const e=this.genVueComponentKey(t.from.source),i=this.genVueComponentKey(t.to.source),s=t.part;n.key=`${e}-${i}-${s}`}return t.__vnode__=n,n}))]):t("div",this.$slots.default)},created(){this._jflowInstance=new Ra(this.configs),this.$emit("update:loading",!0),this.genNodeLinkMeta(),this.syncNodeLink()},mounted(){this.mountJFlow()},beforeDestroy(){this._jflowInstance?.destroy()},methods:{mountJFlow(){this._jflowInstance.$mount(this.$el),Object.keys(this.$listeners).map((t=>{const e=this.$listeners[t].bind(this);this._jflowInstance.addEventListener(t,e)})),console.log("update:loading",!1),this.$emit("update:loading",!1)},genNodeLinkMeta(){this.nodes=this._jflowInstance._layout.flowStack.map((t=>{const{type:e,layoutNode:n,source:i}=t,s=this._jflowInstance.source_Layout_Render_NodeMap;let r;return r=s.has(i)?s.get(i):s.set(i),r.layoutNode=n,t})),this.links=this._jflowInstance._layout.flowLinkStack.slice()},syncNodeLink(){this.renderNodes=this.nodes.slice(),this.renderLinks=this.links.slice()},reflow(t,e){this.genNodeLinkMeta(),this.syncNodeLink(),this.$nextTick((()=>{t&&t(),this._jflowInstance.recalculate(),this._jflowInstance.scheduleRender((()=>{e&&e()}))}))},getInstance(){return this._jflowInstance},renderJFlow(){this.__renderInSchedule__||(this.__renderInSchedule__=!0,this.$nextTick((()=>{this._jflowInstance._render(),this.__renderInSchedule__=!1})))},addToLinkStack(t,e,n){this._jflowInstance.addToLinkStack(t),e&&n&&t._jflow.addLinkNodeBySource(e,n,t)},removeFromLinkStack(t,e,n){this._jflowInstance.removeFromLinkStack(t),e&&n&&t._jflow.removeLinkNodeBySource(e,n,t)}}};var Ma=i(243),Ia=i.n(Ma);function ja(t){const n="string"==typeof t?e[t]:t;return{inject:["addToStack","removeFromStack"],props:{configs:{type:Object,default:function(){return{}}},visible:{type:Boolean,default:!0},source:{type:Object}},watch:{configs(t,e){const n=Ia()(t,e);0!==Object.keys(n).length&&this._jflowInstance.setConfig(t)},$listeners(t,e){let n=[],i=[];const s=Object.keys(t).map((e=>({event:e,handler:t[e]}))),r=Object.keys(e).map((t=>({event:t,handler:e[t]})));s.forEach((t=>{const e=t.handler;r.find((t=>t.handler===e))||n.push(t)})),r.forEach((t=>{const e=t.handler;s.find((t=>t.handler===e))||i.push(t)})),n.forEach((t=>{this._jflowInstance.addEventListener(t.event,t.handler)})),i.forEach((t=>{this._jflowInstance.removeEventListener(t.event,t.handler)}))},visible(t){this._jflowInstance.visible=t},source(t){this._jflowInstance._jflow.setRenderNodeBySource(t,this._jflowInstance)}},render:function(t){return null},created(){this._jflowInstance=new n(this.configs),this._jflowInstance.visible=this.visible,this.bindListeners(),this.addToStack(this._jflowInstance,this.source)},destroyed(){this._jflowInstance.destroy(),this.removeFromStack(this._jflowInstance)},methods:{bindListeners(){Object.keys(this.$listeners).map((t=>{const e=this.$listeners[t];this._jflowInstance.addEventListener(t,e)}))}}}}function Da(t,n){const i="string"==typeof t?e[t]:t;return{inject:["addToLinkStack","removeFromLinkStack","getJFlow"],props:{configs:{type:Object,default:function(){return{}}},from:Object,to:Object},render:function(t){return null},created(){const t=this.getJFlow(),e=t.getRenderNodeBySource(this.from),n=t.getRenderNodeBySource(this.to);this.createInstance(e,n)},mounted(){this.unwatch=this.$watch((()=>[this.from,this.to,this.configs]),(()=>{this.refreshConfig()}))},methods:{createInstance(t,e){t&&e&&(this._jflowInstance=new i({...this.configs,from:t,to:e}),this.bindListeners(),this.addToLinkStack(this._jflowInstance,this.from,this.to))},refreshConfig(){const t=this.getJFlow(),e=t.getRenderNodeBySource(this.from),n=t.getRenderNodeBySource(this.to);this._jflowInstance?this._jflowInstance.setConfig({...this.configs,from:e,to:n}):this.createInstance(e,n)},bindListeners(){Object.keys(this.$listeners).map((t=>{const e=this.$listeners[t];this._jflowInstance.addEventListener(t,e)}))}},destroyed(){this.unwatch(),this._jflowInstance&&this.removeFromLinkStack(this._jflowInstance,this.from,this.to)}}}function Va(t){const n="string"==typeof t?e[t]:t;return{mixins:[Oa],inject:{addToBelongStack:{from:"addToStack"},removeFromBelongStack:{from:"removeFromStack"},renderJFlow:{from:"renderJFlow"}},render:function(t){return t("jflow-group",this.$slots.default)},props:{configs:{type:Object,default:function(){return{}}},visible:{type:Boolean,default:!0},source:{type:Object}},watch:{configs(t,e){JSON.stringify(t)!==JSON.stringify(e)&&this._jflowInstance.setConfig(t)},$listeners(t,e){let n=[],i=[];const s=Object.keys(t).map((e=>({event:e,handler:t[e]}))),r=Object.keys(e).map((t=>({event:t,handler:e[t]})));s.forEach((t=>{const e=t.handler;r.find((t=>t.handler===e))||n.push(t)})),r.forEach((t=>{const e=t.handler;s.find((t=>t.handler===e))||i.push(t)})),n.forEach((t=>{this._jflowInstance.addEventListener(t.event,t.handler)})),i.forEach((t=>{this._jflowInstance.removeEventListener(t.event,t.handler)}))},visible(t){this._jflowInstance.visible=t},source(t){this._jflowInstance._jflow.setRenderNodeBySource(t,this._jflowInstance)}},created(){this._jflowInstance=new n(this.configs),this._jflowInstance.visible=this.visible,Object.keys(this.$listeners).map((t=>{const e=this.$listeners[t].bind(this);this._jflowInstance.addEventListener(t,e)})),this.addToBelongStack(this._jflowInstance,this.source)},mounted(){this._jflowInstance.recalculate()},updated(){this._jflowInstance.recalculateUp()},destroyed(){this._jflowInstance.destroy(),this.removeFromBelongStack(this._jflowInstance)}}}const $a={mixins:[Oa],inject:{addToBelongStack:{from:"addToStack"},removeFromBelongStack:{from:"removeFromStack"},renderJFlow:{from:"renderJFlow"}},data:()=>({nodes:[]}),props:{configs:{type:Object,default:function(){return{}}},visible:{type:Boolean,default:!0},source:{type:Object},genVueComponentKey:{type:Function}},watch:{configs(t,e){JSON.stringify(t)!==JSON.stringify(e)&&this._jflowInstance.setConfig(t)},$listeners(t,e){let n=[],i=[];const s=Object.keys(t).map((e=>({event:e,handler:t[e]}))),r=Object.keys(e).map((t=>({event:t,handler:e[t]})));s.forEach((t=>{const e=t.handler;r.find((t=>t.handler===e))||n.push(t)})),r.forEach((t=>{const e=t.handler;s.find((t=>t.handler===e))||i.push(t)})),n.forEach((t=>{this._jflowInstance.addEventListener(t.event,t.handler)})),i.forEach((t=>{this._jflowInstance.removeEventListener(t.event,t.handler)}))},visible(t){this._jflowInstance.visible=t},source(t){this._jflowInstance._jflow.setRenderNodeBySource(t,this._jflowInstance)}},created(){this._jflowInstance=new xa(this.configs),this._jflowInstance.visible=this.visible,Object.keys(this.$listeners).map((t=>{const e=this.$listeners[t].bind(this);this._jflowInstance.addEventListener(t,e)})),this.addToBelongStack(this._jflowInstance,this.source),this.genTextElementMeta()},mounted(){this._jflowInstance.recalculate()},updated(){this._jflowInstance.recalculateUp()},destroyed(){this._jflowInstance.destroy(),this.removeFromBelongStack(this._jflowInstance)},render:function(t){return this.nodes.length?t("div",this.nodes.map((t=>{let{type:e,source:n}=t;if(!this.$scopedSlots[e]){if(!this.$scopedSlots.jflowcommon)return;e="jflowcommon"}if(t.__vnode__)return t.__vnode__;const[i]=this.$scopedSlots[e]({source:n,textElement:t});return this.genVueComponentKey&&(i.key=this.genVueComponentKey(n)),t.__vnode__=i,i}))):t("jflow-group",this.$slots.default)},methods:{genTextElementMeta(){this.nodes=this._jflowInstance._flattenTxtElem.filter((t=>"text"!==t.type))},reflow(){this._jflowInstance.refreshTextElements(),this.genTextElementMeta(),this.$nextTick((()=>{this._jflowInstance.refresh()}))}}},Na=[{name:"Jflow",component:Aa},{name:"Group",component:Va("Group")},...["CapsuleGroup","CapsuleVerticalGroup","DiamondGroup","DiamondVerticalGroup","RhombusGroup","PointGroup","ScrollGroup"].map((t=>({name:t,component:Va(t)}))),...["Point","Rectangle","Capsule","Diamond","Rhombus","Text","Icon","ShadowDom","TextEditor"].map((t=>({name:t,component:ja(t)}))),...["Link","PolyLink","BezierLink"].map((t=>({name:t,component:Da(t)}))),{name:"TextGroup",component:$a}];customElements.define("jflow-group",class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}});const Fa={install:(t,e={})=>{let n="j";e&&e.prefix&&(n=e.prefix),Na.forEach((e=>{t.component(`${n}${e.name}`,e.component)})),e.customInstance&&Object.keys(e.customInstance).forEach((i=>{t.component(`${n}${i}`,ja(e.customInstance[i]))})),e.customGroups&&Object.keys(e.customGroups).forEach((i=>{t.component(`${n}${i}`,Va(e.customGroups[i]))})),e.customLink&&Object.keys(e.customLink).forEach((i=>{t.component(`${n}${i}`,Da(e.customLink[i]))}))}};function za(t,e,n,i,s,r,o,a){var c,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),i&&(l.functional=!0),r&&(l._scopeId="data-v-"+r),o?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},l._ssrRegister=c):s&&(c=a?function(){s.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:s),c)if(l.functional){l._injectStyles=c;var h=l.render;l.render=function(t,e){return c.call(e),h(t,e)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,c):[c]}return{exports:t,options:l}}window.$jflow_version="0.1.0";var Wa=za({props:{node:Object,odd:Boolean},computed:{groupConfig:()=>({layout:new Co({direction:"horizontal",gap:5}),paddingTop:4,paddingBottom:4,margin:2,paddingLeft:10,backgroundColor:"transparent",borderWidth:0})}},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("j-group",t._g({attrs:{source:t.node,configs:t.groupConfig}},t.$listeners),[n("j-text",{attrs:{configs:{fontSize:"12px",minWidth:110,textAlign:"left",textColor:"#1C1E21",content:t.node.name+"<"+("string"==typeof t.node.ref?t.node.ref:t.node.ref.name)+">"}}})],1)}),[],!1,null,null,null);const Ha=za({components:{"er-property":Wa.exports},props:{node:Object},data(){return console.log(this.node),{folded:!1,configs:{layout:new Co({direction:"vertical",gap:0}),borderColor:"#A3BF69",backgroundColor:"#ECF2E1",borderWidth:2,borderRadius:0},bodyConfigs:{layout:new Co({direction:"vertical",gap:0,alignment:"start"}),display:"block",backgroundColor:"#fff",borderRadius:0,borderColor:"#A3BF69",borderWidth:2},headerConfigs:{layout:new Co({direction:"horizontal",gap:0,alignment:"center"}),paddingTop:2,paddingBottom:2,paddingLeft:15,paddingRight:15},propertyConfig:{layout:new Co({direction:"vertical",gap:0,alignment:"start"}),border:{bottom:{borderColor:"#A3BF69",borderWidth:2}}}}}},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("j-group",t._g({attrs:{source:t.node,configs:t.configs}},t.$listeners),[n("j-group",{attrs:{configs:t.headerConfigs}},[n("j-text",{attrs:{configs:{fontSize:"16px",fontWeight:"bold",textColor:"#1C1E21",textAlign:"center",content:t.node.name}}})],1),t._v(" "),n("j-group",{attrs:{configs:t.bodyConfigs}},[n("j-group",{attrs:{configs:t.propertyConfig}},[t.node.properties&&t.node.properties.length?t._l(t.node.properties,(function(t){return n("er-property",{key:t.name,attrs:{node:t}})})):t._e(),t._v(" "),t.node.param&&t.node.param.length?[n("j-text",{attrs:{configs:{fontSize:"12px",textColor:"#1C1E21",textAlign:"left",content:"params:"}}}),t._v(" "),t._l(t.node.param,(function(t){return n("er-property",{key:t.name,attrs:{node:t}})}))]:t._e(),t._v(" "),t.node.return&&t.node.return.length?[n("j-text",{attrs:{configs:{fontSize:"12px",textColor:"#1C1E21",textAlign:"left",content:"returns:"}}}),t._v(" "),t._l(t.node.return,(function(t){return n("er-property",{key:t.name,attrs:{node:t}})}))]:t._e()],2)],1)],1)}),[],!1,null,null,null).exports,Ua=za({inject:["hoverNode"],props:{node:Object},data(){let t,e,n="18px";return"entity"===this.node.concept&&(t="#37371F",e="#fff"),(this.node.isStructure||"structure"===this.node.concept)&&(t="#EA9010",e="#fff"),"logic"===this.node.concept&&(t="#90BE6D",e="#000"),"viewlogic"===this.node.concept&&(t="#C9E3AC",e="#000"),"viewevents"===this.node.concept&&(t="#CECE5A",e="#000"),"view"===this.node.concept&&(t="#EAEFBD",e="#000",n="18px"),{folded:!1,textColor:e,textSize:n,configs:{layout:new Co({direction:"vertical",gap:0}),borderColor:"#A3BF69",backgroundColor:t,borderWidth:2,borderRadius:0,padding:10}}},methods:{toggleLink(t){console.log(t),this.hoverNode(this.node,t)}}},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("j-custom-group",t._g({attrs:{source:t.node,configs:t.configs},on:{mouseenter:function(){return t.toggleLink(!0)},mouseleave:function(){return t.toggleLink(!1)}}},t.$listeners),[n("j-text",{attrs:{configs:{fontSize:t.textSize,textColor:t.textColor,content:t.node.name}}})],1)}),[],!1,null,null,null).exports;class Xa{constructor(t){this.type="Property",this.source=t,this.name=t.name,this.refName=t.ref.name}}class Ya{constructor(t,e){this.type=e,this.source=t,this.name=t.name,this.properties=(t.properties||[]).map((t=>new Xa(t)))}}const Ga={euclidean:function(t,e){for(var n=0,i=0;i<t.length;i++)n+=Math.pow(e[i]-t[i],2);return Math.sqrt(n)},manhattan:function(t,e){for(var n=0,i=0;i<t.length;i++)n+=Math.abs(e[i]-t[i]);return n},max:function(t,e){for(var n=0,i=0;i<t.length;i++)n=Math.max(n,Math.abs(e[i]-t[i]));return n}};var qa=function(t,e,n){this.distance=t,this.linkage=e,this.threshold=null==n?1/0:n};qa.prototype={cluster:function(t,e,n){this.clusters=[],this.dists=[],this.mins=[],this.index=[];for(var i=0;i<t.length;i++){var s={value:t[i],key:i,index:i,size:1};this.clusters[i]=s,this.index[i]=s,this.dists[i]=[],this.mins[i]=0}for(i=0;i<this.clusters.length;i++)for(var r=0;r<=i;r++){var o=i==r?1/0:this.distance(this.clusters[i].value,this.clusters[r].value);this.dists[i][r]=o,this.dists[r][i]=o,o<this.dists[i][this.mins[i]]&&(this.mins[i]=r)}var a=this.mergeClosest();for(i=0;a;)n&&i++%e==0&&n(this.clusters),a=this.mergeClosest();return this.clusters.forEach((function(t){delete t.key,delete t.index})),this.clusters},mergeClosest:function(){for(var t=0,e=1/0,n=0;n<this.clusters.length;n++){var i=this.clusters[n].key;(a=this.dists[i][this.mins[i]])<e&&(t=i,e=a)}if(e>=this.threshold)return!1;var s=this.index[t],r=this.index[this.mins[t]],o={left:s,right:r,key:s.key,size:s.size+r.size};for(this.clusters[s.index]=o,this.clusters.splice(r.index,1),this.index[s.key]=o,n=0;n<this.clusters.length;n++){var a,c=this.clusters[n];s.key==c.key?a=1/0:"single"==this.linkage?(a=this.dists[s.key][c.key],this.dists[s.key][c.key]>this.dists[r.key][c.key]&&(a=this.dists[r.key][c.key])):"complete"==this.linkage?(a=this.dists[s.key][c.key],this.dists[s.key][c.key]<this.dists[r.key][c.key]&&(a=this.dists[r.key][c.key])):a="average"==this.linkage?(this.dists[s.key][c.key]*s.size+this.dists[r.key][c.key]*r.size)/(s.size+r.size):this.distance(c.value,s.value),this.dists[s.key][c.key]=this.dists[c.key][s.key]=a}for(n=0;n<this.clusters.length;n++){var l=this.clusters[n].key;if(this.mins[l]==s.key||this.mins[l]==r.key){e=l;for(var h=0;h<this.clusters.length;h++){var u=this.clusters[h].key;this.dists[l][u]<this.dists[l][e]&&(e=u)}this.mins[l]=e}this.clusters[n].index=n}return delete s.key,delete r.key,delete s.index,delete r.index,!0}};function Ja(t,e){t.right&&Ja(t.right,e),t.value&&e(t.value),t.left&&Ja(t.left,e)}let Ka=0;let Za=0,Qa=[],tc=[],ec=[],nc=[],ic=[],sc=[];function rc(t){const e={id:Za++,concept:"view",source:t,name:t.name,logics:[],events:[]};t.logics.map((n=>{return i=`${t.name}/${n.name}`,s=n,r=e,void ic.push({id:Za++,concept:"viewlogic",name:i,param:s.param.slice(),return:s.return.slice(),refByView:[r],refByViewLogic:[]});var i,s,r})),t.events.map((n=>{return i=`${t.name}/${n.element}@${n.event}`,s=n,r=e,void sc.push({id:Za++,concept:"viewevents",name:i,event:s,refByView:[r]});var i,s,r})),ec.push(e)}function oc(t){nc.push({level:0,id:Za++,concept:"logic",source:t,name:t.name,param:t.param.slice(),return:t.return.slice(),refByLogic:[],refByView:[],refByViewLogic:[],refByViewEvent:[]})}function ac(t){return{id:Za++,concept:"property",source:t,ref:t.ref,name:t.name}}function cc(t){Qa.push({level:0,id:Za++,concept:"structure",source:t,name:t.structure,properties:t.properties.map(ac),refByStructure:[],refByLogic:[],refByView:[],refByViewLogic:[],refByViewEvent:[]})}function lc(t){tc.push({level:0,id:Za++,concept:"entity",source:t,name:t.entity,refByStructure:[],refByLogic:[],refByView:[],refByViewLogic:[],refByViewEvent:[]})}function hc(t,e){return t[0]!=t[2]&&t[1]!=t[3]&&e[0]!=e[2]&&e[1]!=e[3]&&!(t[2]<=e[0]||t[3]<=e[1]||t[0]>=e[2]||t[1]>=e[3])}function uc(t,e,n){t.style.width=e+"px",t.style.height=n+"px";const i=window.devicePixelRatio;return t.width=Math.floor(e*i),t.height=Math.floor(n*i),{width:e,height:n,raw_width:t.width,raw_height:t.height,scale:i}}const dc={name:"jflow-er-diagram",components:{"j-er-node-comp":Ha,"j-plain-node":Ua},provide(){return{recordAsIndex:this.recordAsIndex,hoverNode:this.hoverNode}},data:()=>({jflowloading:!0,configs:{allowDrop:!0,layout:{},initialZoom:1,minZoom:1e-4,NodeRenderTop:!0},searchContent:"",filterContent:"",showProperty:!1,curData:null,currJSON:'{\n\t"entities": [\n\t\t{\n\t\t\t"entity": "app.dataSources.defaultDS.entities.Student",\n\t\t\t"refByLogic": [\n\t\t\t\t"app.logics.loadSssTableView",\n\t\t\t\t"app.logics.loadStudentTableView"\n\t\t\t],\n\t\t\t"refByView": [\n\t\t\t\t"pc",\n\t\t\t\t"pc/sss",\n\t\t\t\t"pc/dashboard/student"\n\t\t\t],\n\t\t\t"refByViewLogic": [],\n\t\t\t"refByViewEvent": [\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/sss",\n\t\t\t\t\t"element": "link2",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/sss",\n\t\t\t\t\t"element": "button3",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/sss",\n\t\t\t\t\t"element": "button4",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/dashboard/student",\n\t\t\t\t\t"element": "link2",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/dashboard/student",\n\t\t\t\t\t"element": "button3",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/dashboard/student",\n\t\t\t\t\t"element": "button4",\n\t\t\t\t\t"event": "click"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refBySturcture": [],\n\t\t\t"refByOther": []\n\t\t},\n\t\t{\n\t\t\t"entity": "app.dataSources.defaultDS.entities.School",\n\t\t\t"refByLogic": [\n\t\t\t\t"app.logics.loadSchoolTableView",\n\t\t\t\t"app.logics.loadSssSelectSchool",\n\t\t\t\t"app.logics.loadSssTableView",\n\t\t\t\t"app.logics.loadStudentSelectSchool",\n\t\t\t\t"app.logics.loadStudentTableView"\n\t\t\t],\n\t\t\t"refByView": [\n\t\t\t\t"pc/dashboard/school"\n\t\t\t],\n\t\t\t"refByViewLogic": [],\n\t\t\t"refByViewEvent": [\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/dashboard/school",\n\t\t\t\t\t"element": "link2",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/dashboard/school",\n\t\t\t\t\t"element": "button3",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/dashboard/school",\n\t\t\t\t\t"element": "button4",\n\t\t\t\t\t"event": "click"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refBySturcture": [],\n\t\t\t"refByOther": [\n\t\t\t\t"defaultDS"\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t"entity": "app.dataSources.defaultDS.entities.LCAPLogicViewMapping",\n\t\t\t"refByLogic": [],\n\t\t\t"refByView": [],\n\t\t\t"refByViewLogic": [],\n\t\t\t"refByViewEvent": [],\n\t\t\t"refBySturcture": [],\n\t\t\t"refByOther": []\n\t\t},\n\t\t{\n\t\t\t"entity": "app.dataSources.defaultDS.entities.LCAPUser",\n\t\t\t"refByLogic": [\n\t\t\t\t"app.logics.LCAPGetAllUsers",\n\t\t\t\t"app.logics.LCAPGetUserByUserId",\n\t\t\t\t"app.logics.LCAPGetUserList",\n\t\t\t\t"app.logics.LCAPGetUserTableView"\n\t\t\t],\n\t\t\t"refByView": [\n\t\t\t\t"pc/permission_center/userManagement"\n\t\t\t],\n\t\t\t"refByViewLogic": [\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/addRoleUser",\n\t\t\t\t\t"logic": "getUsersListFromNumis"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/userManagement",\n\t\t\t\t\t"logic": "submit"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByViewEvent": [\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/addRoleUser",\n\t\t\t\t\t"element": "uButton2",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/userManagement",\n\t\t\t\t\t"element": "button5",\n\t\t\t\t\t"event": "click"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refBySturcture": [],\n\t\t\t"refByOther": [\n\t\t\t\t"defaultDS"\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t"entity": "app.dataSources.defaultDS.entities.LCAPRolePerMapping",\n\t\t\t"refByLogic": [\n\t\t\t\t"app.logics.LCAPGetPermissionByRoleId",\n\t\t\t\t"app.logics.LCAPGetResourceListByRoleId",\n\t\t\t\t"app.logics.LCAPGetRolePermissionList",\n\t\t\t\t"app.logics.LCAPGetScopeResourceByRoleId",\n\t\t\t\t"app.logics.LCAPGetUserResources"\n\t\t\t],\n\t\t\t"refByView": [\n\t\t\t\t"pc/permission_center/roleManagement"\n\t\t\t],\n\t\t\t"refByViewLogic": [],\n\t\t\t"refByViewEvent": [\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/roleManagement",\n\t\t\t\t\t"element": "uLink2",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/roleManagement",\n\t\t\t\t\t"element": "uButton6",\n\t\t\t\t\t"event": "click"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refBySturcture": [],\n\t\t\t"refByOther": []\n\t\t},\n\t\t{\n\t\t\t"entity": "app.dataSources.defaultDS.entities.LCAPPerResMapping",\n\t\t\t"refByLogic": [\n\t\t\t\t"app.logics.LCAPGetMappingByPermissionIdAndResourceId",\n\t\t\t\t"app.logics.LCAPGetResourceListByRoleId",\n\t\t\t\t"app.logics.LCAPGetScopeResourceByRoleId",\n\t\t\t\t"app.logics.LCAPGetUserResources"\n\t\t\t],\n\t\t\t"refByView": [],\n\t\t\t"refByViewLogic": [],\n\t\t\t"refByViewEvent": [\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/resourceManagement",\n\t\t\t\t\t"element": "uButton2",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/resourceManagement",\n\t\t\t\t\t"element": "uButton4",\n\t\t\t\t\t"event": "click"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refBySturcture": [],\n\t\t\t"refByOther": []\n\t\t},\n\t\t{\n\t\t\t"entity": "app.dataSources.defaultDS.entities.LCAPUserRoleMapping",\n\t\t\t"refByLogic": [\n\t\t\t\t"app.logics.LCAPGetMappingIdByRoleIdAndUserId",\n\t\t\t\t"app.logics.LCAPGetRoleBindUserList",\n\t\t\t\t"app.logics.LCAPGetUserResources",\n\t\t\t\t"app.logics.LCAPIsAlreadBindUserIdList",\n\t\t\t\t"app.logics.LCAPLoadUserRoleMappingTableView",\n\t\t\t\t"app.logics.LCAPRoleBindUsers",\n\t\t\t\t"app.logics.LCAPUnBindUsers",\n\t\t\t\t"app.logics.loadAddRoleUserTableView"\n\t\t\t],\n\t\t\t"refByView": [\n\t\t\t\t"pc/permission_center/addRoleUser"\n\t\t\t],\n\t\t\t"refByViewLogic": [\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/addRoleUser",\n\t\t\t\t\t"logic": "submit"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/addRoleUser",\n\t\t\t\t\t"logic": "modify"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByViewEvent": [\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/addRoleUser",\n\t\t\t\t\t"element": "uLink1",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/addRoleUser",\n\t\t\t\t\t"element": "uButton2",\n\t\t\t\t\t"event": "click"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refBySturcture": [],\n\t\t\t"refByOther": []\n\t\t},\n\t\t{\n\t\t\t"entity": "app.dataSources.defaultDS.entities.LCAPRole",\n\t\t\t"refByLogic": [\n\t\t\t\t"app.logics.LCAPIsExistRoleId",\n\t\t\t\t"app.logics.LCAPIsRoleNameRepeated",\n\t\t\t\t"app.logics.LCAPLoadAddRoleUserSelectLCAPRole",\n\t\t\t\t"app.logics.LCAPLoadRoleManagementTableView",\n\t\t\t\t"app.logics.LCAPLoadUserRoleMappingTableView",\n\t\t\t\t"app.logics.loadAddRoleUserTableView"\n\t\t\t],\n\t\t\t"refByView": [\n\t\t\t\t"pc/permission_center/roleManagement"\n\t\t\t],\n\t\t\t"refByViewLogic": [\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/addRoleUser",\n\t\t\t\t\t"logic": "modify"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/roleManagement",\n\t\t\t\t\t"logic": "submit"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/roleManagement",\n\t\t\t\t\t"logic": "modify"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/roleManagement",\n\t\t\t\t\t"logic": "remove"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByViewEvent": [\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/roleManagement",\n\t\t\t\t\t"element": "uButton9",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/roleManagement",\n\t\t\t\t\t"element": "uButton2",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/roleManagement",\n\t\t\t\t\t"element": "uButton6",\n\t\t\t\t\t"event": "click"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refBySturcture": [],\n\t\t\t"refByOther": [\n\t\t\t\t"defaultDS"\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t"entity": "app.dataSources.defaultDS.entities.LCAPPermission",\n\t\t\t"refByLogic": [\n\t\t\t\t"app.logics.LCAPGetPermissionByRoleId",\n\t\t\t\t"app.logics.LCAPGetResourceListByRoleId",\n\t\t\t\t"app.logics.LCAPGetRolePermissionList",\n\t\t\t\t"app.logics.LCAPGetScopeResourceByRoleId",\n\t\t\t\t"app.logics.LCAPLoadPermissionManagementTableView"\n\t\t\t],\n\t\t\t"refByView": [\n\t\t\t\t"pc/permission_center/roleManagement"\n\t\t\t],\n\t\t\t"refByViewLogic": [\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/roleManagement",\n\t\t\t\t\t"logic": "getRolePermission"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByViewEvent": [\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/resourceManagement",\n\t\t\t\t\t"element": "uButton2",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/resourceManagement",\n\t\t\t\t\t"element": "uButton4",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/roleManagement",\n\t\t\t\t\t"element": "uLink2",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/roleManagement",\n\t\t\t\t\t"element": "uButton6",\n\t\t\t\t\t"event": "click"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refBySturcture": [],\n\t\t\t"refByOther": [\n\t\t\t\t"defaultDS"\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t"entity": "app.dataSources.defaultDS.entities.LCAPResource",\n\t\t\t"refByLogic": [\n\t\t\t\t"app.logics.LCAPGetResourceListByRoleId",\n\t\t\t\t"app.logics.LCAPGetScopeResourceByRoleId",\n\t\t\t\t"app.logics.LCAPGetUserResources",\n\t\t\t\t"app.logics.LCAPLoadPermissionResourceListView",\n\t\t\t\t"app.logics.LCAPLoadResourceTableView"\n\t\t\t],\n\t\t\t"refByView": [\n\t\t\t\t"pc/permission_center/resourceManagement"\n\t\t\t],\n\t\t\t"refByViewLogic": [\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/resourceManagement",\n\t\t\t\t\t"logic": "addResource"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/resourceManagement",\n\t\t\t\t\t"logic": "loadResourceByRoleId"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/resourceManagement",\n\t\t\t\t\t"logic": "remove"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByViewEvent": [],\n\t\t\t"refBySturcture": [],\n\t\t\t"refByOther": [\n\t\t\t\t"defaultDS"\n\t\t\t]\n\t\t}\n\t],\n\t"logics": [\n\t\t{\n\t\t\t"name": "app.logics.loadSssTableView",\n\t\t\t"param": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "page"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "size"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.String",\n\t\t\t\t\t"name": "sort"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.String",\n\t\t\t\t\t"name": "order"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "app.dataSources.defaultDS.entities.Student",\n\t\t\t\t\t"name": "filter"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"return": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "{ list: nasl.collection.List<{ student: app.dataSources.defaultDS.entities.Student, school: app.dataSources.defaultDS.entities.School }>, total: nasl.core.Long }",\n\t\t\t\t\t"name": "result"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByLogic": [],\n\t\t\t"refByView": [],\n\t\t\t"refByViewLogic": [\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/sss",\n\t\t\t\t\t"logic": "load"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByViewEvent": [],\n\t\t\t"refByOther": []\n\t\t},\n\t\t{\n\t\t\t"name": "app.logics.loadSssSelectSchool",\n\t\t\t"param": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "page"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "size"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"return": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "{ list: nasl.collection.List<{ school: app.dataSources.defaultDS.entities.School }>, total: nasl.core.Long }",\n\t\t\t\t\t"name": "result"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByLogic": [],\n\t\t\t"refByView": [],\n\t\t\t"refByViewLogic": [\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/sss",\n\t\t\t\t\t"logic": "loadSelectSchool"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByViewEvent": [],\n\t\t\t"refByOther": []\n\t\t},\n\t\t{\n\t\t\t"name": "app.logics.logictestdebug",\n\t\t\t"param": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.String",\n\t\t\t\t\t"name": "varstr"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"return": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.collection.List<nasl.core.String>",\n\t\t\t\t\t"name": "varlist"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByLogic": [],\n\t\t\t"refByView": [],\n\t\t\t"refByViewLogic": [],\n\t\t\t"refByViewEvent": [\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/dashboard/testdebug",\n\t\t\t\t\t"element": "button2",\n\t\t\t\t\t"event": "click"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByOther": []\n\t\t},\n\t\t{\n\t\t\t"name": "app.logics.loadSchoolTableView",\n\t\t\t"param": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "page"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "size"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.String",\n\t\t\t\t\t"name": "sort"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.String",\n\t\t\t\t\t"name": "order"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "app.dataSources.defaultDS.entities.School",\n\t\t\t\t\t"name": "filter"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"return": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "{ list: nasl.collection.List<{ school: app.dataSources.defaultDS.entities.School }>, total: nasl.core.Long }",\n\t\t\t\t\t"name": "result"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByLogic": [],\n\t\t\t"refByView": [],\n\t\t\t"refByViewLogic": [\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/dashboard/school",\n\t\t\t\t\t"logic": "load"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByViewEvent": [],\n\t\t\t"refByOther": []\n\t\t},\n\t\t{\n\t\t\t"name": "app.logics.loadStudentTableView",\n\t\t\t"param": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "page"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "size"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.String",\n\t\t\t\t\t"name": "sort"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.String",\n\t\t\t\t\t"name": "order"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "app.dataSources.defaultDS.entities.Student",\n\t\t\t\t\t"name": "filter"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"return": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "{ list: nasl.collection.List<{ student: app.dataSources.defaultDS.entities.Student, school: app.dataSources.defaultDS.entities.School }>, total: nasl.core.Long }",\n\t\t\t\t\t"name": "result"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByLogic": [],\n\t\t\t"refByView": [],\n\t\t\t"refByViewLogic": [\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/dashboard/student",\n\t\t\t\t\t"logic": "load"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByViewEvent": [\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/dashboard/testvariable",\n\t\t\t\t\t"element": "button1",\n\t\t\t\t\t"event": "click"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByOther": []\n\t\t},\n\t\t{\n\t\t\t"name": "app.logics.loadStudentSelectSchool",\n\t\t\t"param": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "page"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "size"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"return": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "{ list: nasl.collection.List<{ school: app.dataSources.defaultDS.entities.School }>, total: nasl.core.Long }",\n\t\t\t\t\t"name": "result"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByLogic": [],\n\t\t\t"refByView": [],\n\t\t\t"refByViewLogic": [\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/dashboard/student",\n\t\t\t\t\t"logic": "loadSelectSchool"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByViewEvent": [],\n\t\t\t"refByOther": []\n\t\t},\n\t\t{\n\t\t\t"name": "app.logics.LCAPGetUserList",\n\t\t\t"param": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.String",\n\t\t\t\t\t"name": "queryParam"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"return": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "{ list: nasl.collection.List<{ lCAPUser: app.dataSources.defaultDS.entities.LCAPUser }>, total: nasl.core.Long }",\n\t\t\t\t\t"name": "result"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByLogic": [],\n\t\t\t"refByView": [],\n\t\t\t"refByViewLogic": [],\n\t\t\t"refByViewEvent": [],\n\t\t\t"refByOther": []\n\t\t},\n\t\t{\n\t\t\t"name": "app.logics.LCAPGetUserByUserId",\n\t\t\t"param": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.String",\n\t\t\t\t\t"name": "userId"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"return": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "app.dataSources.defaultDS.entities.LCAPUser",\n\t\t\t\t\t"name": "result"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByLogic": [],\n\t\t\t"refByView": [],\n\t\t\t"refByViewLogic": [],\n\t\t\t"refByViewEvent": [\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/addRoleUser",\n\t\t\t\t\t"element": "uButton2",\n\t\t\t\t\t"event": "click"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByOther": []\n\t\t},\n\t\t{\n\t\t\t"name": "app.logics.LCAPGetAllUsers",\n\t\t\t"param": [],\n\t\t\t"return": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "{ list: nasl.collection.List<{ lCAPUser: app.dataSources.defaultDS.entities.LCAPUser }>, total: nasl.core.Long }",\n\t\t\t\t\t"name": "result"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByLogic": [],\n\t\t\t"refByView": [],\n\t\t\t"refByViewLogic": [\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/addRoleUser",\n\t\t\t\t\t"logic": "getUsersListFromNumis"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/userManagement",\n\t\t\t\t\t"logic": "getUserNameList"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByViewEvent": [],\n\t\t\t"refByOther": []\n\t\t},\n\t\t{\n\t\t\t"name": "app.logics.LCAPGetUserTableView",\n\t\t\t"param": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "page"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "size"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.String",\n\t\t\t\t\t"name": "sort"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.String",\n\t\t\t\t\t"name": "order"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "app.dataSources.defaultDS.entities.LCAPUser",\n\t\t\t\t\t"name": "filter"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"return": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "{ list: nasl.collection.List<{ lCAPUser: app.dataSources.defaultDS.entities.LCAPUser }>, total: nasl.core.Long }",\n\t\t\t\t\t"name": "result"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByLogic": [],\n\t\t\t"refByView": [],\n\t\t\t"refByViewLogic": [\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/userManagement",\n\t\t\t\t\t"logic": "load"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByViewEvent": [],\n\t\t\t"refByOther": []\n\t\t},\n\t\t{\n\t\t\t"name": "app.logics.LCAPRoleBindUsers",\n\t\t\t"param": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "app.structures.LCAPRoleBindUsersBody",\n\t\t\t\t\t"name": "roleBindUsersBody"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"return": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "resultBindNum"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByLogic": [],\n\t\t\t"refByView": [],\n\t\t\t"refByViewLogic": [],\n\t\t\t"refByViewEvent": [],\n\t\t\t"refByOther": []\n\t\t},\n\t\t{\n\t\t\t"name": "app.logics.LCAPLoadPermissionManagementTableView",\n\t\t\t"param": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "page"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "size"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.String",\n\t\t\t\t\t"name": "sort"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.String",\n\t\t\t\t\t"name": "order"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "app.dataSources.defaultDS.entities.LCAPPermission",\n\t\t\t\t\t"name": "filter"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"return": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "{ list: nasl.collection.List<{ lCAPPermission: app.dataSources.defaultDS.entities.LCAPPermission }>, total: nasl.core.Long }",\n\t\t\t\t\t"name": "result"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByLogic": [],\n\t\t\t"refByView": [],\n\t\t\t"refByViewLogic": [],\n\t\t\t"refByViewEvent": [],\n\t\t\t"refByOther": []\n\t\t},\n\t\t{\n\t\t\t"name": "app.logics.LCAPIsExistRoleId",\n\t\t\t"param": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "roleId"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"return": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Boolean",\n\t\t\t\t\t"name": "result"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByLogic": [\n\t\t\t\t"app.logics.LCAPRoleBindUsers",\n\t\t\t\t"app.logics.LCAPUnBindUsers"\n\t\t\t],\n\t\t\t"refByView": [],\n\t\t\t"refByViewLogic": [],\n\t\t\t"refByViewEvent": [],\n\t\t\t"refByOther": []\n\t\t},\n\t\t{\n\t\t\t"name": "app.logics.LCAPLoadPermissionResourceListView",\n\t\t\t"param": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "page"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "size"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"return": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "{ list: nasl.collection.List<{ lCAPResource: app.dataSources.defaultDS.entities.LCAPResource }>, total: nasl.core.Long }",\n\t\t\t\t\t"name": "result"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByLogic": [],\n\t\t\t"refByView": [],\n\t\t\t"refByViewLogic": [\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/resourceManagement",\n\t\t\t\t\t"logic": "loadListView"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByViewEvent": [],\n\t\t\t"refByOther": []\n\t\t},\n\t\t{\n\t\t\t"name": "app.logics.LCAPGetMappingByPermissionIdAndResourceId",\n\t\t\t"param": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "permissionId"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "resourceId"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"return": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.collection.List<nasl.core.Long>",\n\t\t\t\t\t"name": "mappingIdList"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByLogic": [],\n\t\t\t"refByView": [],\n\t\t\t"refByViewLogic": [],\n\t\t\t"refByViewEvent": [\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/resourceManagement",\n\t\t\t\t\t"element": "uButton2",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/resourceManagement",\n\t\t\t\t\t"element": "uButton4",\n\t\t\t\t\t"event": "click"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByOther": []\n\t\t},\n\t\t{\n\t\t\t"name": "app.logics.LCAPGetScopeResourceByRoleId",\n\t\t\t"param": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "roleId"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"return": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "{ list: nasl.collection.List<{ lCAPRolePerMapping: app.dataSources.defaultDS.entities.LCAPRolePerMapping, lCAPPermission: app.dataSources.defaultDS.entities.LCAPPermission, lCAPPerResMapping: app.dataSources.defaultDS.entities.LCAPPerResMapping, lCAPResource: app.dataSources.defaultDS.entities.LCAPResource }>, total: nasl.core.Long }",\n\t\t\t\t\t"name": "result"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByLogic": [],\n\t\t\t"refByView": [],\n\t\t\t"refByViewLogic": [\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/resourceManagement",\n\t\t\t\t\t"logic": "loadResourceByRoleId"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByViewEvent": [],\n\t\t\t"refByOther": []\n\t\t},\n\t\t{\n\t\t\t"name": "app.logics.loadAddRoleUserTableView",\n\t\t\t"param": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "page"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "size"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.String",\n\t\t\t\t\t"name": "sort"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.String",\n\t\t\t\t\t"name": "order"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"return": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "{ list: nasl.collection.List<{ lCAPUserRoleMapping: app.dataSources.defaultDS.entities.LCAPUserRoleMapping, lCAPRole: app.dataSources.defaultDS.entities.LCAPRole }>, total: nasl.core.Long }",\n\t\t\t\t\t"name": "result"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByLogic": [],\n\t\t\t"refByView": [],\n\t\t\t"refByViewLogic": [],\n\t\t\t"refByViewEvent": [],\n\t\t\t"refByOther": []\n\t\t},\n\t\t{\n\t\t\t"name": "app.logics.LCAPGetRoleBindUserList",\n\t\t\t"param": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "inputRoleId"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"return": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.collection.List<{ lCAPUserRoleMapping: app.dataSources.defaultDS.entities.LCAPUserRoleMapping }>",\n\t\t\t\t\t"name": "result"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByLogic": [\n\t\t\t\t"app.logics.LCAPIsAlreadBindUserIdList"\n\t\t\t],\n\t\t\t"refByView": [],\n\t\t\t"refByViewLogic": [\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/addRoleUser",\n\t\t\t\t\t"logic": "roleAddUserReduplicate"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByViewEvent": [],\n\t\t\t"refByOther": []\n\t\t},\n\t\t{\n\t\t\t"name": "app.logics.LCAPLoadRoleManagementTableView",\n\t\t\t"param": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "page"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "size"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.String",\n\t\t\t\t\t"name": "sort"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.String",\n\t\t\t\t\t"name": "order"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "app.dataSources.defaultDS.entities.LCAPRole",\n\t\t\t\t\t"name": "filter"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"return": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "{ list: nasl.collection.List<{ lCAPRole: app.dataSources.defaultDS.entities.LCAPRole }>, total: nasl.core.Long }",\n\t\t\t\t\t"name": "result"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByLogic": [],\n\t\t\t"refByView": [],\n\t\t\t"refByViewLogic": [\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/roleManagement",\n\t\t\t\t\t"logic": "load"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByViewEvent": [],\n\t\t\t"refByOther": []\n\t\t},\n\t\t{\n\t\t\t"name": "app.logics.LCAPUnBindUsers",\n\t\t\t"param": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "app.structures.LCAPRoleBindUsersBody",\n\t\t\t\t\t"name": "unBindUsersBody"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"return": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "resultUnBindUsers"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByLogic": [],\n\t\t\t"refByView": [],\n\t\t\t"refByViewLogic": [],\n\t\t\t"refByViewEvent": [],\n\t\t\t"refByOther": []\n\t\t},\n\t\t{\n\t\t\t"name": "app.logics.LCAPLoadUserRoleMappingTableView",\n\t\t\t"param": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "page"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "size"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.String",\n\t\t\t\t\t"name": "sort"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.String",\n\t\t\t\t\t"name": "order"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "app.dataSources.defaultDS.entities.LCAPUserRoleMapping",\n\t\t\t\t\t"name": "filter"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"return": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "{ list: nasl.collection.List<{ lCAPUserRoleMapping: app.dataSources.defaultDS.entities.LCAPUserRoleMapping, lCAPRole: app.dataSources.defaultDS.entities.LCAPRole }>, total: nasl.core.Long }",\n\t\t\t\t\t"name": "result"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByLogic": [],\n\t\t\t"refByView": [],\n\t\t\t"refByViewLogic": [\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/addRoleUser",\n\t\t\t\t\t"logic": "load"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByViewEvent": [],\n\t\t\t"refByOther": []\n\t\t},\n\t\t{\n\t\t\t"name": "app.logics.LCAPGetRolePermissionList",\n\t\t\t"param": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "inputRoleId"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"return": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "{ list: nasl.collection.List<{ lCAPRolePerMapping: app.dataSources.defaultDS.entities.LCAPRolePerMapping, lCAPPermission: app.dataSources.defaultDS.entities.LCAPPermission }>, total: nasl.core.Long }",\n\t\t\t\t\t"name": "result"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByLogic": [],\n\t\t\t"refByView": [],\n\t\t\t"refByViewLogic": [],\n\t\t\t"refByViewEvent": [\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/roleManagement",\n\t\t\t\t\t"element": "uLink2",\n\t\t\t\t\t"event": "click"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByOther": []\n\t\t},\n\t\t{\n\t\t\t"name": "app.logics.LCAPLoadAddRoleUserSelectLCAPRole",\n\t\t\t"param": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "page"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "size"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"return": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "{ list: nasl.collection.List<{ lCAPRole: app.dataSources.defaultDS.entities.LCAPRole }>, total: nasl.core.Long }",\n\t\t\t\t\t"name": "result"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByLogic": [],\n\t\t\t"refByView": [],\n\t\t\t"refByViewLogic": [],\n\t\t\t"refByViewEvent": [],\n\t\t\t"refByOther": []\n\t\t},\n\t\t{\n\t\t\t"name": "app.logics.LCAPGetUserResources",\n\t\t\t"param": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.String",\n\t\t\t\t\t"name": "userId"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"return": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.collection.List<app.structures.LCAPGetResourceResult>",\n\t\t\t\t\t"name": "result"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByLogic": [],\n\t\t\t"refByView": [],\n\t\t\t"refByViewLogic": [],\n\t\t\t"refByViewEvent": [],\n\t\t\t"refByOther": [\n\t\t\t\t"LCAPGetResourceResult"\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t"name": "app.logics.LCAPGetPermissionByRoleId",\n\t\t\t"param": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "roleId"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"return": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.collection.List<app.dataSources.defaultDS.entities.LCAPPermission>",\n\t\t\t\t\t"name": "permissionList"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByLogic": [],\n\t\t\t"refByView": [],\n\t\t\t"refByViewLogic": [\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/roleManagement",\n\t\t\t\t\t"logic": "getRolePermission"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByViewEvent": [\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/resourceManagement",\n\t\t\t\t\t"element": "uButton2",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/resourceManagement",\n\t\t\t\t\t"element": "uButton4",\n\t\t\t\t\t"event": "click"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByOther": []\n\t\t},\n\t\t{\n\t\t\t"name": "app.logics.LCAPGetResourceListByRoleId",\n\t\t\t"param": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "roleId"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"return": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.collection.List<app.dataSources.defaultDS.entities.LCAPResource>",\n\t\t\t\t\t"name": "resultResourceList"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByLogic": [],\n\t\t\t"refByView": [],\n\t\t\t"refByViewLogic": [],\n\t\t\t"refByViewEvent": [],\n\t\t\t"refByOther": []\n\t\t},\n\t\t{\n\t\t\t"name": "app.logics.LCAPGetMappingIdByRoleIdAndUserId",\n\t\t\t"param": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "roleId"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.String",\n\t\t\t\t\t"name": "userId"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"return": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "result"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByLogic": [\n\t\t\t\t"app.logics.LCAPUnBindUsers"\n\t\t\t],\n\t\t\t"refByView": [],\n\t\t\t"refByViewLogic": [],\n\t\t\t"refByViewEvent": [],\n\t\t\t"refByOther": []\n\t\t},\n\t\t{\n\t\t\t"name": "app.logics.LCAPIsAlreadBindUserIdList",\n\t\t\t"param": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.String",\n\t\t\t\t\t"name": "newUserId"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "inputRoleId"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"return": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Boolean",\n\t\t\t\t\t"name": "result"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByLogic": [\n\t\t\t\t"app.logics.LCAPRoleBindUsers",\n\t\t\t\t"app.logics.LCAPUnBindUsers"\n\t\t\t],\n\t\t\t"refByView": [],\n\t\t\t"refByViewLogic": [],\n\t\t\t"refByViewEvent": [],\n\t\t\t"refByOther": []\n\t\t},\n\t\t{\n\t\t\t"name": "app.logics.LCAPLoadResourceTableView",\n\t\t\t"param": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "page"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "size"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.String",\n\t\t\t\t\t"name": "sort"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.String",\n\t\t\t\t\t"name": "order"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"return": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "{ list: nasl.collection.List<{ lCAPResource: app.dataSources.defaultDS.entities.LCAPResource }>, total: nasl.core.Long }",\n\t\t\t\t\t"name": "result"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByLogic": [],\n\t\t\t"refByView": [],\n\t\t\t"refByViewLogic": [\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/resourceManagement",\n\t\t\t\t\t"logic": "load"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByViewEvent": [],\n\t\t\t"refByOther": []\n\t\t},\n\t\t{\n\t\t\t"name": "app.logics.LCAPIsRoleNameRepeated",\n\t\t\t"param": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.String",\n\t\t\t\t\t"name": "roleName"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"return": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Boolean",\n\t\t\t\t\t"name": "isExist"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByLogic": [],\n\t\t\t"refByView": [],\n\t\t\t"refByViewLogic": [\n\t\t\t\t{\n\t\t\t\t\t"view": "pc/permission_center/roleManagement",\n\t\t\t\t\t"logic": "isRoleNameRepeated"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByViewEvent": [],\n\t\t\t"refByOther": []\n\t\t}\n\t],\n\t"structures": [\n\t\t{\n\t\t\t"structure": "app.structures.LCAPGetResourceResult",\n\t\t\t"properties": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.String",\n\t\t\t\t\t"name": "resourceValue"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.String",\n\t\t\t\t\t"name": "resourceType"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByLogic": [\n\t\t\t\t"app.logics.LCAPGetUserResources"\n\t\t\t],\n\t\t\t"refByView": [],\n\t\t\t"refByViewLogic": [],\n\t\t\t"refByViewEvent": [],\n\t\t\t"refBySturcture": [],\n\t\t\t"refByOther": [\n\t\t\t\t"LCAPGetResourceResult"\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t"structure": "app.structures.LCAPRoleBindUsersBody",\n\t\t\t"properties": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t"name": "roleId"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.collection.List<nasl.core.String>",\n\t\t\t\t\t"name": "userIdList"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByLogic": [\n\t\t\t\t"app.logics.LCAPRoleBindUsers",\n\t\t\t\t"app.logics.LCAPUnBindUsers"\n\t\t\t],\n\t\t\t"refByView": [],\n\t\t\t"refByViewLogic": [],\n\t\t\t"refByViewEvent": [],\n\t\t\t"refBySturcture": [],\n\t\t\t"refByOther": []\n\t\t},\n\t\t{\n\t\t\t"structure": "app.structures.PostRequest",\n\t\t\t"properties": [\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.http.HttpResponse<nasl.core.String>",\n\t\t\t\t\t"name": "response"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.core.String",\n\t\t\t\t\t"name": "status"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"ref": "nasl.collection.Map<nasl.core.String,nasl.core.String>",\n\t\t\t\t\t"name": "requestInfo"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refByLogic": [],\n\t\t\t"refByView": [],\n\t\t\t"refByViewLogic": [],\n\t\t\t"refByViewEvent": [\n\t\t\t\t{\n\t\t\t\t\t"view": "m",\n\t\t\t\t\t"element": "m",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"view": "pc",\n\t\t\t\t\t"element": "pc",\n\t\t\t\t\t"event": "click"\n\t\t\t\t}\n\t\t\t],\n\t\t\t"refBySturcture": [],\n\t\t\t"refByOther": []\n\t\t}\n\t],\n\t"views": [\n\t\t{\n\t\t\t"name": "pc/sss",\n\t\t\t"logics": [\n\t\t\t\t{\n\t\t\t\t\t"name": "load",\n\t\t\t\t\t"param": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t"ref": "nasl.ui.DataSourceParams",\n\t\t\t\t\t\t\t"name": "params"\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\t"return": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t"ref": "{ list: nasl.collection.List<{ student: app.dataSources.defaultDS.entities.Student, school: app.dataSources.defaultDS.entities.School }>, total: nasl.core.Long }",\n\t\t\t\t\t\t\t"name": "result"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"name": "loadSelectSchool",\n\t\t\t\t\t"param": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t"ref": "nasl.ui.DataSourceParams",\n\t\t\t\t\t\t\t"name": "params"\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\t"return": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t"ref": "{ list: nasl.collection.List<{ school: app.dataSources.defaultDS.entities.School }>, total: nasl.core.Long }",\n\t\t\t\t\t\t\t"name": "result"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t],\n\t\t\t"events": [\n\t\t\t\t{\n\t\t\t\t\t"element": "sss",\n\t\t\t\t\t"event": "created"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "button2",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "button1",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "button3",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "button4",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "link1",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "link2",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "uNavbarMenuItem2",\n\t\t\t\t\t"event": "click"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t"name": "pc/login",\n\t\t\t"logics": [\n\t\t\t\t{\n\t\t\t\t\t"name": "onSuccess",\n\t\t\t\t\t"param": [],\n\t\t\t\t\t"return": []\n\t\t\t\t}\n\t\t\t],\n\t\t\t"events": []\n\t\t},\n\t\t{\n\t\t\t"name": "pc/index",\n\t\t\t"logics": [],\n\t\t\t"events": []\n\t\t},\n\t\t{\n\t\t\t"name": "pc/dashboard",\n\t\t\t"logics": [],\n\t\t\t"events": [\n\t\t\t\t{\n\t\t\t\t\t"element": "dropdown_item1",\n\t\t\t\t\t"event": "click"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t"name": "pc/dashboard/testapi",\n\t\t\t"logics": [],\n\t\t\t"events": []\n\t\t},\n\t\t{\n\t\t\t"name": "pc/dashboard/testvariable",\n\t\t\t"logics": [],\n\t\t\t"events": [\n\t\t\t\t{\n\t\t\t\t\t"element": "button1",\n\t\t\t\t\t"event": "click"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t"name": "pc/dashboard/testlayout",\n\t\t\t"logics": [],\n\t\t\t"events": []\n\t\t},\n\t\t{\n\t\t\t"name": "pc/dashboard/student",\n\t\t\t"logics": [\n\t\t\t\t{\n\t\t\t\t\t"name": "load",\n\t\t\t\t\t"param": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t"ref": "nasl.ui.DataSourceParams",\n\t\t\t\t\t\t\t"name": "params"\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\t"return": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t"ref": "{ list: nasl.collection.List<{ student: app.dataSources.defaultDS.entities.Student, school: app.dataSources.defaultDS.entities.School }>, total: nasl.core.Long }",\n\t\t\t\t\t\t\t"name": "result"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"name": "loadSelectSchool",\n\t\t\t\t\t"param": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t"ref": "nasl.ui.DataSourceParams",\n\t\t\t\t\t\t\t"name": "params"\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\t"return": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t"ref": "{ list: nasl.collection.List<{ school: app.dataSources.defaultDS.entities.School }>, total: nasl.core.Long }",\n\t\t\t\t\t\t\t"name": "result"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t],\n\t\t\t"events": [\n\t\t\t\t{\n\t\t\t\t\t"element": "student",\n\t\t\t\t\t"event": "created"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "button2",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "button1",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "button3",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "button4",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "link1",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "link2",\n\t\t\t\t\t"event": "click"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t"name": "pc/dashboard/school",\n\t\t\t"logics": [\n\t\t\t\t{\n\t\t\t\t\t"name": "load",\n\t\t\t\t\t"param": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t"ref": "nasl.ui.DataSourceParams",\n\t\t\t\t\t\t\t"name": "params"\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\t"return": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t"ref": "{ list: nasl.collection.List<{ school: app.dataSources.defaultDS.entities.School }>, total: nasl.core.Long }",\n\t\t\t\t\t\t\t"name": "result"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t],\n\t\t\t"events": [\n\t\t\t\t{\n\t\t\t\t\t"element": "school",\n\t\t\t\t\t"event": "created"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "button2",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "button1",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "button3",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "button4",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "link1",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "link2",\n\t\t\t\t\t"event": "click"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t"name": "pc/dashboard/testdebug",\n\t\t\t"logics": [],\n\t\t\t"events": [\n\t\t\t\t{\n\t\t\t\t\t"element": "button1",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "button2",\n\t\t\t\t\t"event": "click"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t"name": "pc/permission_center",\n\t\t\t"logics": [],\n\t\t\t"events": [\n\t\t\t\t{\n\t\t\t\t\t"element": "dropdown_item1",\n\t\t\t\t\t"event": "click"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t"name": "pc/permission_center/addRoleUser",\n\t\t\t"logics": [\n\t\t\t\t{\n\t\t\t\t\t"name": "getRoleNameByRoleId",\n\t\t\t\t\t"param": [],\n\t\t\t\t\t"return": []\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"name": "create",\n\t\t\t\t\t"param": [],\n\t\t\t\t\t"return": []\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"name": "roleAddUserReduplicate",\n\t\t\t\t\t"param": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t"ref": "nasl.core.String",\n\t\t\t\t\t\t\t"name": "inputUserId"\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t\t\t"name": "inputRoleId"\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\t"return": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t"ref": "nasl.core.Boolean",\n\t\t\t\t\t\t\t"name": "result"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"name": "submit",\n\t\t\t\t\t"param": [],\n\t\t\t\t\t"return": []\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"name": "modify",\n\t\t\t\t\t"param": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t"ref": "nasl.ui.Current<{ lCAPUserRoleMapping: app.dataSources.defaultDS.entities.LCAPUserRoleMapping, lCAPRole: app.dataSources.defaultDS.entities.LCAPRole }>",\n\t\t\t\t\t\t\t"name": "current"\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\t"return": []\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"name": "getUsersListFromNumis",\n\t\t\t\t\t"param": [],\n\t\t\t\t\t"return": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t"ref": "nasl.collection.List<{ lCAPUser: app.dataSources.defaultDS.entities.LCAPUser }>",\n\t\t\t\t\t\t\t"name": "result"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"name": "load",\n\t\t\t\t\t"param": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t"ref": "nasl.ui.DataSourceParams",\n\t\t\t\t\t\t\t"name": "params"\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\t"return": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t"ref": "{ list: nasl.collection.List<{ lCAPUserRoleMapping: app.dataSources.defaultDS.entities.LCAPUserRoleMapping, lCAPRole: app.dataSources.defaultDS.entities.LCAPRole }>, total: nasl.core.Long }",\n\t\t\t\t\t\t\t"name": "result"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t],\n\t\t\t"events": [\n\t\t\t\t{\n\t\t\t\t\t"element": "addRoleUser",\n\t\t\t\t\t"event": "created"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "uButton1",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "uButton2",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "uButton3",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "uLink1",\n\t\t\t\t\t"event": "click"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t"name": "pc/permission_center/resourceManagement",\n\t\t\t"logics": [\n\t\t\t\t{\n\t\t\t\t\t"name": "addResource",\n\t\t\t\t\t"param": [],\n\t\t\t\t\t"return": []\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"name": "load",\n\t\t\t\t\t"param": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t"ref": "nasl.ui.DataSourceParams",\n\t\t\t\t\t\t\t"name": "params"\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\t"return": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t"ref": "{ list: nasl.collection.List<{ lCAPResource: app.dataSources.defaultDS.entities.LCAPResource }>, total: nasl.core.Long }",\n\t\t\t\t\t\t\t"name": "result"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"name": "loadResourceByRoleId",\n\t\t\t\t\t"param": [],\n\t\t\t\t\t"return": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t"ref": "nasl.collection.List<app.dataSources.defaultDS.entities.LCAPResource>",\n\t\t\t\t\t\t\t"name": "result"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"name": "remove",\n\t\t\t\t\t"param": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t"ref": "nasl.ui.Current<{ lCAPResource: app.dataSources.defaultDS.entities.LCAPResource }>",\n\t\t\t\t\t\t\t"name": "current"\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\t"return": []\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"name": "loadListView",\n\t\t\t\t\t"param": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t"ref": "nasl.ui.DataSourceParams",\n\t\t\t\t\t\t\t"name": "params"\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\t"return": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t"ref": "{ list: nasl.collection.List<{ lCAPResource: app.dataSources.defaultDS.entities.LCAPResource }>, total: nasl.core.Long }",\n\t\t\t\t\t\t\t"name": "result"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t],\n\t\t\t"events": [\n\t\t\t\t{\n\t\t\t\t\t"element": "uButton1",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "uButton2",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "uButton3",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "uButton4",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "uButton5",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "uLink1",\n\t\t\t\t\t"event": "click"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t"name": "pc/permission_center/roleManagement",\n\t\t\t"logics": [\n\t\t\t\t{\n\t\t\t\t\t"name": "submit",\n\t\t\t\t\t"param": [],\n\t\t\t\t\t"return": []\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"name": "getRolePermission",\n\t\t\t\t\t"param": [],\n\t\t\t\t\t"return": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t"ref": "nasl.collection.List<app.dataSources.defaultDS.entities.LCAPPermission>",\n\t\t\t\t\t\t\t"name": "result"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"name": "modify",\n\t\t\t\t\t"param": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t"ref": "nasl.ui.Current<{ lCAPRole: app.dataSources.defaultDS.entities.LCAPRole }>",\n\t\t\t\t\t\t\t"name": "current"\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\t"return": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t"ref": "nasl.core.Long",\n\t\t\t\t\t\t\t"name": "resultRoleId"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"name": "load",\n\t\t\t\t\t"param": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t"ref": "nasl.ui.DataSourceParams",\n\t\t\t\t\t\t\t"name": "params"\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\t"return": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t"ref": "{ list: nasl.collection.List<{ lCAPRole: app.dataSources.defaultDS.entities.LCAPRole }>, total: nasl.core.Long }",\n\t\t\t\t\t\t\t"name": "result"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"name": "isRoleNameRepeated",\n\t\t\t\t\t"param": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t"ref": "nasl.core.String",\n\t\t\t\t\t\t\t"name": "roleName"\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\t"return": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t"ref": "nasl.core.Boolean",\n\t\t\t\t\t\t\t"name": "result"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"name": "create",\n\t\t\t\t\t"param": [],\n\t\t\t\t\t"return": []\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"name": "remove",\n\t\t\t\t\t"param": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t"ref": "nasl.ui.Current<{ lCAPRole: app.dataSources.defaultDS.entities.LCAPRole }>",\n\t\t\t\t\t\t\t"name": "current"\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\t"return": []\n\t\t\t\t}\n\t\t\t],\n\t\t\t"events": [\n\t\t\t\t{\n\t\t\t\t\t"element": "roleManagement",\n\t\t\t\t\t"event": "created"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "uButton1",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "uButton2",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "uButton3",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "uButton4",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "uButton5",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "uButton6",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "uButton7",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "uButton8",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "uButton9",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "uButton10",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "uLink2",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "uLink4",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "uLink5",\n\t\t\t\t\t"event": "click"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t"name": "pc/permission_center/userManagement",\n\t\t\t"logics": [\n\t\t\t\t{\n\t\t\t\t\t"name": "load",\n\t\t\t\t\t"param": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t"ref": "nasl.ui.DataSourceParams",\n\t\t\t\t\t\t\t"name": "params"\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\t"return": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t"ref": "{ list: nasl.collection.List<{ lCAPUser: app.dataSources.defaultDS.entities.LCAPUser }>, total: nasl.core.Long }",\n\t\t\t\t\t\t\t"name": "result"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"name": "submit",\n\t\t\t\t\t"param": [],\n\t\t\t\t\t"return": []\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"name": "getUserNameList",\n\t\t\t\t\t"param": [],\n\t\t\t\t\t"return": [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t"ref": "{ list: nasl.collection.List<{ lCAPUser: app.dataSources.defaultDS.entities.LCAPUser }>, total: nasl.core.Long }",\n\t\t\t\t\t\t\t"name": "result"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t],\n\t\t\t"events": [\n\t\t\t\t{\n\t\t\t\t\t"element": "userManagement",\n\t\t\t\t\t"event": "created"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "button2",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "button5",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "button6",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "button1",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "button3",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "button4",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "link1",\n\t\t\t\t\t"event": "click"\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\t"element": "link2",\n\t\t\t\t\t"event": "click"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t"name": "pc/noAuth",\n\t\t\t"logics": [],\n\t\t\t"events": []\n\t\t},\n\t\t{\n\t\t\t"name": "pc/notFound",\n\t\t\t"logics": [],\n\t\t\t"events": []\n\t\t},\n\t\t{\n\t\t\t"name": "m/login",\n\t\t\t"logics": [],\n\t\t\t"events": []\n\t\t},\n\t\t{\n\t\t\t"name": "m/user",\n\t\t\t"logics": [],\n\t\t\t"events": [\n\t\t\t\t{\n\t\t\t\t\t"element": "logoutButton",\n\t\t\t\t\t"event": "click"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t"name": "m/index",\n\t\t\t"logics": [],\n\t\t\t"events": [\n\t\t\t\t{\n\t\t\t\t\t"element": "iconv1",\n\t\t\t\t\t"event": "click"\n\t\t\t\t}\n\t\t\t]\n\t\t},\n\t\t{\n\t\t\t"name": "m/noAuth",\n\t\t\t"logics": [],\n\t\t\t"events": []\n\t\t},\n\t\t{\n\t\t\t"name": "m/notFound",\n\t\t\t"logics": [],\n\t\t\t"events": []\n\t\t}\n\t]\n}',total:0,count:0,highlightNodes:new Set,currentHoverNode:null}),computed:{statistics(){return this.curData?`entities: ${this.curData.entities.length}, structures: ${this.curData.structures.length}, logics: ${this.curData.logics.length}, views: ${this.curData.views.length}`:""}},watch:{searchContent(t){let e=this.searchTool.currentMeta?.target;e&&this.toggleLinkHighlight(e,!1),this.searchTool.request(t),this.searchTool.toggleFirstSeach(!0),this.total=this.searchTool.total;const n=this.getJFlowInstance();n.scheduleRender((()=>{this.count=this.searchTool.current})),this.minimapTool.renderMap(n),e=this.searchTool.currentMeta?.target,e&&this.toggleLinkHighlight(e,!0,"#525FE1")},jflowloading(t){if(!t){const t=this.getJFlowInstance(),e=new class{meta=[];result=[];currIdx=0;_anime=null;_firstSearch=!1;registToJflow(t){t.addEventListener("afterJflowRender",(e=>{const n=e.detail.ctx;this.highlight(n,t)})),this.jflowInstance=t}index(t){const{structures:e,views:n,viewLogics:i,viewEvents:s,logics:r,entities:o}=t;function a(t){return t.map((t=>({key:t.name,target:t})))}this.meta=[...a(o),...a(e),...a(r),...a(i),...a(s),...a(n)]}request(t){t.trim()?this.result=this.meta.filter((({key:e})=>e.toLowerCase().includes(t.toLowerCase()))):this.result=[]}get total(){return this.result.length}get current(){return this.currIdx+1}get currentMeta(){return this.result[this.currIdx]}toggleFirstSeach(t){this._firstSearch=t}next(t,e){this.currIdx=(this.currIdx+1)%this.total;const n=this.result[this.currIdx],i=t.getRenderNodeBySource(n.target),s=i.getBoundingRect();if(hc(i._belongs._getViewBox(),s))t.scheduleRender(),e&&e();else{const n=t._calculatePointBack([t.canvasMeta.actual_width/2,t.canvasMeta.actual_height/2]);let s=i.anchor;i._belongs.calculateToCoordination&&(s=node._belongs.calculateToCoordination(s));const r=(n[0]-s[0])*t.scale,o=(n[1]-s[1])*t.scale,a=250,c=t.position,l={x:c.x+r,y:c.y+o};let h=0;t._panning=!0,t._zooming=!0,this._anime&&t._cancelAnime(this._anime);const u=t.requestJFlowAnime((n=>{if(n>a){t._panning=!1,t._zooming=!1;const n=t.position;t._recalculatePosition(l.x-n.x,l.y-n.y),e&&e(),u.cancel()}else{const s=(i=n/a,Math.sin(i*Math.PI/2)),c=s-h;h=s,t._recalculatePosition(r*c,o*c),e&&e()}var i}));this._anime=u}}highlight(t,e){this._firstSearch&&(this.currIdx=0),this.result.forEach(((n,i)=>{const s=e.getRenderNodeBySource(n.target),r=s.getBoundingRect();this._firstSearch&&hc(s._belongs._getViewBox(),r)&&(this.currIdx=i+1,this._firstSearch=!1),function(t,e,n){const[i,s,r,o]=e;t.save(),t.fillStyle=n?"rgba(255, 0, 0, 0.5)":"rgba(255, 117, 236, 0.5)",t.beginPath(),t.rect(i,s,r-i,o-s),t.fill(),t.stroke(),t.restore()}(t,r,this.currIdx===i)}))}};e.index(this.curData),e.registToJflow(t),this.searchTool=e;const n=new class{miniMap=null;cacheMinimapCtx=null;_cacheMapImageData=null;constructor(t,e={}){this.miniMap=function(t){const e=document.createElement("canvas"),n=e.getContext("2d");return t&&(t.style.position="relative",t.style.overflow="hidden",t.append(e)),{canvas:e,ctx:n}}(t),Object.assign(this.miniMap,e)}refreshCacheMinimapCtx(){const t=document.createElement("canvas");t.width=this.miniMap.raw_width,t.height=this.miniMap.raw_height,this.cacheMinimapCtx=t.getContext("2d")}registToJflow(t){t.addEventListener("zoompan",(e=>{this.renderMap&&this.renderMap(t)})),this.miniMap.canvas.addEventListener("pointerdown",(e=>{let{offsetX:n,offsetY:i}=e;this._onMoveMap&&this._onMoveMap(t,n,i);const s=e=>{let{offsetX:n,offsetY:i}=e;this._onMoveMap&&this._onMoveMap(t,n,i)};document.addEventListener("pointermove",s),document.addEventListener("pointerup",(()=>{document.removeEventListener("pointermove",s)}),{once:!0})}))}capture(t){t._getBoundingGroupRect();const{width:e,height:n,x:i,y:s}=t.bounding_box,r=e/n,o=300;if(r>1){const t=o/r;Object.assign(this.miniMap,uc(this.miniMap.canvas,o,t))}else{const t=o*r;Object.assign(this.miniMap,uc(this.miniMap.canvas,t,o))}this.refreshCacheMinimapCtx();const{width:a,height:c,raw_width:l,raw_height:h,scale:u,padding:d}=this.miniMap,f=2*d,p=(a-f)/e,g=(c-f)/n,m=Math.min(p,g);let _=0,v=0;v=(c-n*m)/2-s*m,_=(a-e*m)/2-i*m;const y=this.cacheMinimapCtx;y.setTransform(),y.clearRect(0,0,l,h),y.scale(u,u),y.transform(m,0,0,m,_,v);const w=[i,s,e,n],b=t._stack[0].__proto__.__proto__.beforeRender;t._stack[0].__proto__.__proto__.beforeRender=function(){return!0};const x=Math.min(1/m,5);t.NodeRenderTop?(t._linkStack.render(y,(t=>(t.isInViewBox(w),t.lineWidth=x,!0))),t._stack.render(y)):(t._stack.render(y),t._linkStack.render(y,(t=>(t.isInViewBox(w),!0)))),t._linkStack.forEach((t=>{t.lineWidth=1})),this._cacheMapImageData=y.getImageData(0,0,l,h),Object.assign(this.miniMap,{m_x:_,m_y:v,r:m}),t._stack[0].__proto__.__proto__.beforeRender=b,this.renderMap(t)}renderMap(t){const{m_x:e,m_y:n,r:i,raw_width:s,raw_height:r,scale:o,ctx:a}=this.miniMap;a.save(),a.setTransform(),a.clearRect(0,0,s,r),a.scale(o,o),a.putImageData(this._cacheMapImageData,0,0),a.transform(i,0,0,i,e,n),this.miniMap.renderExtra&&this.miniMap.renderExtra(a);const[c,l,h,u]=t._getViewBox();a.beginPath(),a.rect(c,l,h-c,u-l),a.setTransform(),a.rect(0,0,s,r),a.clip("evenodd"),a.fillStyle="rgba(0,0,0,0.2)",a.fillRect(0,0,s,r),a.restore()}_onMoveMap(t,e,n){const{m_x:i,m_y:s,r}=this.miniMap,[o,a,c,l]=t._getViewBox(),h=[((c-o)/2+o)*r+i,((l-a)/2+a)*r+s];t._recalculatePosition((h[0]-e)/r*t.scale,(h[1]-n)/r*t.scale),t._render(),this.renderMap(t)}}(this.$refs.minimap,{padding:5,renderExtra(n){e.highlight(n,t)}});n.registToJflow(t),n.capture(t),this.minimapTool=n}}},methods:{getJFlowInstance(){try{return this.$refs.jflow.getInstance()}catch(t){throw"jflow has been destroyed!"}},onkeydown(t){if("Enter"===t.code){console.log("Enter");const t=this.getJFlowInstance();let e=this.searchTool.currentMeta?.target;e&&this.toggleLinkHighlight(e,!1),this.searchTool.next(t,(()=>{this.minimapTool.renderMap(t)})),this.count=this.searchTool.current,e=this.searchTool.currentMeta?.target,e&&this.toggleLinkHighlight(e,!0,"#525FE1")}},hoverNode(t,e){this.currentHoverNode&&this.toggleLinkHighlight(this.currentHoverNode,!1),this.currentHoverNode=t,this.toggleLinkHighlight(t,e,"#F86F03")},toggleLinkHighlight(t,e,n){const i=this.getJFlowInstance(),s=i.getSourceRenderMeta(t);s.jflowFromLinks.forEach((t=>{t.backgroundColor=e?n:"#000",t.lineWidth=e?5:1})),s.jflowToLinks.forEach((t=>{t.backgroundColor=e?n:"#000",t.lineWidth=e?5:1})),i.scheduleRender()},onZoompan(){},genVueComponentKey:t=>t.id,rerender(){this.configs.layout.reOrder(this.curData),this.$refs.jflow.reflow()},toggleView(){this.configs.layout.toggleView(),this.rerender()},toggleLogic(){this.configs.layout.toggleLogic(),this.rerender()},toggleStructure(){this.configs.layout.toggleStructure(),this.rerender()},toggleLcap(){this.configs.layout.toggleLcap(),this.rerender()},toggleFilterMultiRef(){this.configs.layout.toggleFilterMultiRef(),this.rerender()},togglePrimary(){this.configs.layout.togglePrimaryFilter(),this.rerender()},toggleFilterMultiRefLogic(){this.configs.layout.toggleMultiLogicRefFilter(),this.rerender()},doFilter(t){this.configs.layout.doFilter(this.filterContent,t),this.rerender()},toggleProperty(){this.showProperty=!this.showProperty,this.configs.layout.toggleProperty(this.showProperty),this.rerender()},importData(){this.$refs.datamodal.showModal()},importJSON(){const t=Object.freeze(function(t){Za=0,tc=[],Qa=[],ec=[],nc=[],ic=[],sc=[],t.entities.map(lc),t.structures.map(cc),t.logics.map(oc),t.views.map(rc);const e=(t,e,n)=>{t.forEach((t=>{const i=e.find((e=>e.name===t));i&&n.push(i)}))};return console.log(sc),tc.forEach((t=>{const{refByLogic:n,refByView:i,refByViewLogic:s,refByViewEvent:r,refBySturcture:o}=t.source;e(n,nc,t.refByLogic),e(i,ec,t.refByView),e(s.map((t=>`${t.view}/${t.logic}`)),ic,t.refByViewLogic),e(r.map((t=>`${t.view}/${t.element}@${t.event}`)),sc,t.refByViewEvent),e(o,Qa,t.refByStructure)})),Qa.forEach((t=>{const{refByLogic:n,refByView:i,refByViewLogic:s,refByViewEvent:r,refBySturcture:o}=t.source;e(n,nc,t.refByLogic),e(i,ec,t.refByView),e(s.map((t=>`${t.view}/${t.logic}`)),ic,t.refByViewLogic),e(r.map((t=>`${t.view}/${t.element}@${t.event}`)),sc,t.refByViewEvent),e(o,Qa,t.refByStructure)})),nc.forEach((t=>{const{refByLogic:n,refByView:i,refByViewLogic:s,refByViewEvent:r}=t.source;e(n,nc,t.refByLogic),e(i,ec,t.refByView),e(s.map((t=>`${t.view}/${t.logic}`)),ic,t.refByViewLogic),e(r.map((t=>`${t.view}/${t.element}@${t.event}`)),sc,t.refByViewEvent)})),{structures:Qa.slice(),views:ec.slice(),viewLogics:ic.slice(),viewEvents:sc.slice(),logics:nc.slice(),entities:tc.slice()}}(JSON.parse(this.currJSON)));this.curData=t,this.$refs.jflow?this.rerender():this.configs.layout=new class{constructor(t){this.static=!1,this.flowStack=[],this.flowLinkStack=[],this.erNodes=[],this.viewVisible=!0,this.logicVisible=!0,this.structureVisible=!0,this.LCAPvisible=!1,this.multiRefFilter=!1,this.multiLogicRefFilter=!1,this.primaryFilter=!1,this.filterContent="",this.filterPart="",this.showProperty=!1,this.reOrder(t)}reOrder(t){this.flowStack=[],this.flowLinkStack=[],this.source=t;const{structures:e,views:n,viewLogics:i,viewEvents:s,logics:r,entities:o}=t,a=["refByView","refByStructure","refByLogic","refByViewLogic","refByViewEvent"];function c(t){t.forEach((t=>{const e=new Set,n=t.name;!function t(i){"view"===i.concept&&(i.refs||(i.refs=[]),i.refs.push(n)),a.forEach((n=>{i[n]&&i[n].forEach((n=>{e.has(n)||(e.add(n),t(n))}))}))}(t)}))}function l(t,e){return[...t.filter((t=>!e.includes(t))),...e.filter((e=>!t.includes(e)))]}function h(t,e){if(0===t.length&&0===e.length)return 0;const n=(i=t,s=e,i.filter((t=>s.includes(t)))).length;var i,s;const r=l(t,e).length;return 0===n?0:r/n}c(e),c(r),c(o);const u=[],d=function(t){const e=t.slice().sort(((t,e)=>t[2]-e[2])),n=[],i=[];for(;e.length;){n.push(e.shift());const t=new Set;for(;n.length;){const i=n.shift();t.add(i[0]),t.add(i[1]);const s=e.findIndex((t=>t.includes(i[0])));-1!==s&&n.push(e.splice(s,1)[0]);const r=e.findIndex((t=>t.includes(i[1])));-1!==r&&n.push(e.splice(r,1)[0])}i.push(Array.from(t))}return i}(function(t){const e=t.length,n=[];for(let i=0;i<e;i++)for(let s=0;s<e;s++){if(i===s)continue;const e=h(t[i],t[s]);if(e>0){const t=[i,s];n.find((e=>{return i=e,(n=t)[0]===i[0]&&n[1]===i[1]||n[0]===i[1]&&n[1]===i[0];var n,i}))||n.push([i,s,e]),u[i]||(u[i]=[]),u[i][s]=e}}return n}(n.map((t=>t.refs||[])))),f=[],p=new Array(n.length).fill(1).map(((t,e)=>e)),g=[];d.forEach((t=>{const e=[];t.forEach((t=>{e.push({view:n[t],idx:t}),g.push(t)})),Ja(function(t,e,n,i,s,r){"string"==typeof(e=e||"euclidean")&&(e=Ga[e]);var o=new qa(e,n=n||"average",i).cluster(t,s,r);return void 0===i?o[0]:o}(e,((t,e)=>u[t.idx]?.[e.idx]||u[e.idx]?.[t.idx]||1/0),"single"),(t=>{f.push(t.view)}))})),l(p,g).forEach((t=>{f.push(n[t])})),new Set,new Set,new Set,new Set,new Set,new Set,this.filterContent.toLocaleLowerCase();let m=o.map((t=>new Ya(t,"Entity"))),_=e.map((t=>new Ya(t,"Structure"))),v=r.map((t=>new Ya(t,"Logic"))),y=s.map((t=>new Ya(t,"ViewEvent"))),w=i.map((t=>new Ya(t,"ViewLogic"))),b=f.map((t=>new Ya(t,"View")));[...m,..._,...v,...y,...w,...b].forEach((t=>{this.flowStack.push({type:t.type,source:t.source,layoutNode:t})}));const x=(t,e,n)=>{t&&t.forEach((t=>{const i=e.find((e=>e.source===t));i&&this.flowLinkStack.push({from:n,to:i,part:Ka++})}))},S=t=>{const e=t.source;x(e.refByStructure,_,t),x(e.refByLogic,v,t),x(e.refByView,b,t),x(e.refByViewLogic,w,t),x(e.refByViewEvent,y,t)};m.forEach(S),_.forEach(S),v.forEach(S),y.forEach(S),w.forEach(S),Object.assign(this,{entityNodes:m,structNodes:_,logicNodes:v,viewLogicsNodes:w,viewEventsNodes:y,viewNodes:b})}staticCheck(t,e){return!1}reflow(t){const{entityNodes:e,structNodes:n,logicNodes:i,viewLogicsNodes:s,viewEventsNodes:r,viewNodes:o}=this;function a(e,n=0,i,s=!1,r=!1){let o=0,a=0;return e.forEach(((e,n)=>{const r=t.getRenderNodeBySource(e.source),{width:c,height:l}=r.getBoundingDimension();if(a=Math.max(c,a),!s){const t=l/2;n>0&&(o+=t),r.anchor[1]=o,i&&i(e,o),o+=t+20}})),r?n-=a/2:n+=a/2,e.forEach((e=>{t.getRenderNodeBySource(e.source).anchor[0]=n})),r?n-=a/2:n+=a/2,n}function c(t){t.forEach((t=>{const e=[];t.refByViewSide=!1,function s(r){const o=r.source;if(o.refByView.length||o.refByViewEvent.length||o.refByViewLogic.length)return t.refByViewSide=!0,!0;o.refByLogic.forEach((t=>{e.includes(t.name)||(e.push(t.name),s(i.find((e=>e.source===t))))})),o.refByStructure&&o.refByStructure.forEach((t=>{e.includes(t.name)||(e.push(t.name),s(n.find((e=>e.source===t))))}))}(t)}))}c(i);const l=i.filter((t=>t.refByViewSide)),h=i.filter((t=>!t.refByViewSide));c(n);const u=n.filter((t=>t.refByViewSide)),d=n.filter((t=>!t.refByViewSide));let f=[e,u].reduce(((t,e)=>0===e.length?t:a(e,t)+200),0);function p(t,e){let n=new Map;t.forEach((i=>{const s=i.source,r=s.name;n.has(r)||n.set(r,{node:i,level:0}),s[e].forEach((e=>{const i=t.find((t=>t.source.name===e.name));if(i){const t=i.name;n.has(t)||n.set(t,{node:i,level:0}),n.get(t).level++}}))}));const i={};return n.forEach((t=>{const e=t.level;i[e]||(i[e]=[]),i[e].push(t.node)})),i}const g=p(l,"refByLogic"),m=Object.keys(g).sort();let _=0;o.forEach((e=>{const n=e.source;let i=_;const o=t.getRenderNodeBySource(n),{height:a}=o.getBoundingDimension();function c(e){let n=i;return e.forEach(((e,i)=>{const s=t.getRenderNodeBySource(e.source),{height:r}=s.getBoundingDimension(),o=r/2;n+=o,s.anchor[1]=n,n+=o+20})),n}o.anchor[1]=a/2+i;const l=s.filter((t=>t.source.refByView.includes(n))),h=r.filter((t=>t.source.refByView.includes(n))),u=Math.max(c(l),c(h));_=u+40})),m.forEach((e=>{g[e].forEach((e=>{const n=e.source;let i=0,s=0;function r(e){if(h.find((t=>t.source===e)))return;const n=t.getRenderNodeBySource(e);i+=n.anchor[1],s++}n.refByLogic.forEach(r),n.refByView.forEach(r),n.refByViewLogic.forEach(r),n.refByViewEvent.forEach(r),0===s||(t.getRenderNodeBySource(n).anchor[1]=i/s)}))}));const v=p(u,"refByStructure"),y=Object.keys(v).sort();y.forEach((e=>{v[e].forEach((e=>{const n=e.source;let i=0,s=0;function r(e){if(d.find((t=>t.source===e)))return;const n=t.getRenderNodeBySource(e);i+=n.anchor[1],s++}n.refByStructure.forEach(r),n.refByLogic.forEach(r),n.refByView.forEach(r),n.refByViewLogic.forEach(r),n.refByViewEvent.forEach(r),0===s||(t.getRenderNodeBySource(n).anchor[1]=i/s)}))})),y.reverse(),y.forEach((t=>{const e=v[t];e.length&&(f=a(e,f,null,!0)+200)})),m.reverse(),m.forEach((t=>{const e=g[t];e.length&&(f=a(e,f,null,!0)+200)}));const w=[];e.forEach((e=>{const n=e.source;let i=0,s=0;function r(e){const r=h.find((t=>t.source===e));if(r)return r.refNodes||(r.refNodes=[]),void r.refNodes.push(n);const o=d.find((t=>t.source===e));if(o)return o.refNodes||(o.refNodes=[]),void o.refNodes.push(n);const a=t.getRenderNodeBySource(e);i+=a.anchor[1],s++}n.refByStructure.forEach(r),n.refByLogic.forEach(r),n.refByView.forEach(r),n.refByViewLogic.forEach(r),n.refByViewEvent.forEach(r),0===s?w.push(e):t.getRenderNodeBySource(n).anchor[1]=i/s}));const b=p(h,"refByLogic"),x=Object.keys(b).sort();let S=-200;x.forEach((e=>{b[e].forEach((e=>{const n=e.source;let i=0,s=0;n.refByLogic.forEach((t=>{const e=h.find((e=>e.source===t));e&&(e.refNodes||(e.refNodes=[]),e.refNodes.push(n))})),e.refNodes&&e.refNodes.forEach((function(e){const n=t.getRenderNodeBySource(e);i+=n.anchor[1],s++})),0===s||(t.getRenderNodeBySource(n).anchor[1]=i/s)}))})),d.forEach((e=>{const n=e.source;let s=0,r=0;n.refByLogic&&n.refByLogic.forEach((e=>{const n=i.find((t=>t.source===e));if(n){const e=t.getRenderNodeBySource(n.source);s+=e.anchor[1],r++}})),e.refNodes&&e.refNodes.forEach((e=>{const n=t.getRenderNodeBySource(e);s+=n.anchor[1],r++})),0===r||(t.getRenderNodeBySource(n).anchor[1]=s/r)})),S=a(d,S,null,!0,!0)-200,x.forEach((t=>{const e=b[t];S=a(e,S,null,!0,!0)-200})),[s,r,o].reduce(((t,e)=>0===e.length?t:a(e,t,null,!0)+200),f)}toggleView(){this.viewVisible=!this.viewVisible}toggleLogic(){this.logicVisible=!this.logicVisible}toggleStructure(){this.structureVisible=!this.structureVisible}toggleLcap(){this.LCAPvisible=!this.LCAPvisible}toggleFilterMultiRef(){this.multiRefFilter=!this.multiRefFilter}togglePrimaryFilter(){this.primaryFilter=!this.primaryFilter}toggleMultiLogicRefFilter(){this.multiLogicRefFilter=!this.multiLogicRefFilter}doFilter(t,e){this.filterPart=e,this.filterContent=t}toggleProperty(t){this.showProperty=t}}(t)}}};var fc=za(dc,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{display:"block",width:"100vw",height:"90vh",border:"1px solid #000",overflow:"visible",position:"relative"}},[n("div",{staticStyle:{position:"absolute",left:"20px",top:"10px","z-index":"1000"}},[n("span",{staticClass:"legend entity"},[t._v("实体")]),t._v(" "),n("span",{staticClass:"legend structure"},[t._v("结构")]),t._v(" "),n("span",{staticClass:"legend globallogic"},[t._v("全局逻辑")]),t._v(" "),n("span",{staticClass:"legend viewlogic"},[t._v("页面逻辑")]),t._v(" "),n("span",{staticClass:"legend viewevent"},[t._v("页面事件")]),t._v(" "),n("span",{staticClass:"legend view"},[t._v("页面")]),t._v(" "),n("label",{staticClass:"legend"},[t._v("\n            搜索: "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchContent,expression:"searchContent"}],domProps:{value:t.searchContent},on:{keydown:t.onkeydown,input:function(e){e.target.composing||(t.searchContent=e.target.value)}}}),t._v(" "),n("span",[t._v(t._s(t.count))]),t._v(" of "),n("span",[t._v(t._s(t.total))])])]),t._v(" "),n("div",{staticStyle:{display:"block",width:"100%",height:"100%"}},[t.curData?n("j-jflow",{ref:"jflow",staticStyle:{width:"100%",height:"100%"},attrs:{configs:t.configs,"gen-vue-component-key":t.genVueComponentKey,loading:t.jflowloading},on:{"update:loading":function(e){t.jflowloading=e},zoompan:t.onZoompan},scopedSlots:t._u([{key:"Structure",fn:function(e){var i=e.source;return[t.showProperty?n("j-er-node-comp",{attrs:{node:i}}):n("j-plain-node",{attrs:{node:i}})]}},{key:"ViewLogic",fn:function(e){var i=e.source;return[t.showProperty?n("j-er-node-comp",{attrs:{node:i}}):n("j-plain-node",{attrs:{node:i}})]}},{key:"ViewEvent",fn:function(t){var e=t.source;return[n("j-plain-node",{attrs:{node:e}})]}},{key:"Logic",fn:function(e){var i=e.source;return[t.showProperty?n("j-er-node-comp",{attrs:{node:i}}):n("j-plain-node",{attrs:{node:i}})]}},{key:"View",fn:function(t){var e=t.source;return[n("j-plain-node",{attrs:{node:e}})]}},{key:"Entity",fn:function(t){var e=t.source;return[n("j-plain-node",{attrs:{node:e}})]}},{key:"plainlink",fn:function(t){var e=t.configs;return[n("jBezierLink",{attrs:{configs:e,from:e.from.source,to:e.to.source}})]}}],null,!1,1530517222)}):t._e(),t._v(" "),n("div",{staticClass:"minimap"},[n("div",{ref:"minimap",staticClass:"content"})])],1),t._v(" "),n("div",[n("button",{on:{click:function(e){return t.$refs.scriptdialog.showModal()}}},[t._v("get script")]),t._v(" "),n("button",{on:{click:t.importData}},[t._v("import data")]),t._v(" "),n("span",[t._v(t._s(t.statistics))]),t._v(" "),n("br")]),t._v(" "),n("dialog",{ref:"datamodal"},[n("form",{attrs:{method:"dialog"}},[n("p",[n("label",[n("span",{staticStyle:{"vertical-align":"top"}},[t._v("json: ")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.currJSON,expression:"currJSON"}],staticStyle:{"white-space":"pre",width:"600px",height:"400px"},domProps:{value:t.currJSON},on:{input:function(e){e.target.composing||(t.currJSON=e.target.value)}}})])]),t._v(" "),n("div",[n("button",{attrs:{value:"cancel"}},[t._v("close")]),t._v(" "),n("button",{attrs:{id:"confirmBtn",value:"default"},on:{click:t.importJSON}},[t._v("confirm")])])])]),t._v(" "),n("dialog",{ref:"scriptdialog"},[t._m(0)])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{attrs:{method:"dialog"}},[n("textarea",{staticStyle:{"white-space":"pre",width:"600px",height:"400px"}},[t._v("                function getFullName(node) {\n                    return `${node.getNamespace()}.${node.name}`;\n                }\n                function figureOutRefs(result) {\n                    const refByLogic = [];\n                    const refByView = [];\n                    const refByViewEvent = [];\n                    const refByViewLogic = [];\n                    const refBySturcture = [];\n                    const refByOther = [];\n                    for (const entry of result) {\n                        const n = entry[0];\n                        \n                        switch(n.concept) {\n                            \n                            case 'Logic': \n                                refByLogic.push(getFullName(entry[0]));\n                                break;\n                            case 'Structure':\n                                refBySturcture.push(getFullName(entry[0]));\n                                break;\n                            case 'View':\n                            case 'Frontend':\n                \n                                let v = entry[1];\n                                function iterate(node, lastName) {\n                                    node.children.forEach(c => {\n                                        switch(c.node.concept) {\n                                            case 'View':\n                                            case 'Frontend': \n                                                iterate(c, `${lastName}/${c.node.name}`);\n                                                break\n                                            case 'ViewElement':\n                                                iterate(c, lastName);\n                                                break;\n                                            case 'Logic':\n                                                refByViewLogic.push({\n                                                    view: lastName,\n                                                    logic: c.node.name,\n                                                })\n                                                break;\n                                            case 'BindEvent':\n                                                refByViewEvent.push({\n                                                    view: lastName,\n                                                    element: c.node.parentNode.name,\n                                                    event: 'click',\n                                                })\n                                                break;\n                                            default: \n                                                refByView.push(lastName)\n                                        }\n                                    })\n                                }\n                                iterate(v, v.node.name);\n                                break;\n                            default: \n                                refByOther.push(entry[0].name);\n                        }\n                    }\n                    return {\n                        refByLogic,\n                        refByView,\n                        refByOther,\n                        refByViewLogic,\n                        refByViewEvent,\n                        refBySturcture,\n                    }\n                }\n                \n                function getTypeKey(node) {\n                    return (node.typeAnnotation || node.__TypeAnnotation)?.typeKey;\n                }\n                Promise.all([\n                    Promise.all($data.app.dataSources.map(async ds => {\n                            // const dsname = ds.name;\n                            const r = await Promise.all(ds.entities.map(async entity => {\n                                const result = await window.globalData.naslServer.findReferences(entity);\n                                const {\n                                    refByLogic,\n                                    refByView,\n                                    refByOther,\n                                    refByViewLogic,\n                                    refByViewEvent,\n                                    refBySturcture\n                                } = figureOutRefs(result);\n                                return {\n                                    entity: getFullName(entity),\n                                    refByLogic,\n                                    refByView: Array.from(new Set(refByView)),\n                                    refByViewLogic,\n                                    refByViewEvent,\n                                    refBySturcture,\n                                    refByOther\n                                }\n                            }));\n                            return r;\n                        })).then(res => {\n                            return res.flat();\n                        }),\n                    Promise.all($data.app.logics.map(async s => { \n                        const result = await window.globalData.naslServer.findReferences(s);\n                        const {\n                            refByLogic,\n                            refByView,\n                            refByOther,\n                            refByViewLogic,\n                            refByViewEvent\n                        } = figureOutRefs(result);\n                \n                        return {\n                            name: getFullName(s),\n                            param: s.params.map(p => ({\n                                ref: getTypeKey(p),\n                                name: p.name,\n                            })),\n                            return: s.returns.map(p => ({\n                                ref: getTypeKey(p),\n                                name: p.name,\n                            })),\n                            refByLogic: Array.from(new Set(refByLogic)),\n                            refByView: Array.from(new Set(refByView)),\n                            refByViewLogic,\n                            refByViewEvent,\n                            refByOther\n                        }\n                    })).then(res => {\n                        return res\n                    }),\n                    Promise.all($data.app.structures.map(async s => { \n                        const result = await window.globalData.naslServer.findReferences(s);\n                        const {\n                            refByLogic,\n                            refByView,\n                            refByViewLogic,\n                            refByViewEvent,\n                            refBySturcture,\n                            refByOther,\n                        } = figureOutRefs(result);\n                        \n                        return {\n                            structure: getFullName(s),\n                            properties: s.properties.map(p => {\n                                return {\n                                    ref: getTypeKey(p),\n                                    name: p.name\n                                }\n                            }),\n                            refByLogic,\n                            refByView: Array.from(new Set(refByView)),\n                            refByViewLogic,\n                            refByViewEvent,\n                            refBySturcture,\n                            refByOther\n                        }\n                    })).then(res => {\n                        return res\n                    }),\n                    Promise.resolve(\n                        $data.app.frontends.map(f => f.views.map(v => {\n                            const viewNames = [];\n                            function iterate(viewNode, lastName) {\n                \n                                viewNode.getViewBindEvents();\n                \n                                viewNames.push({\n                                    name: lastName,\n                                    logics: viewNode.logics.map(l => ({\n                                        name: l.name,\n                                        param: l.params.map(p => ({\n                                            ref: getTypeKey(p),\n                                            name: p.name,\n                                        })),\n                                        return: l.returns.map(p => ({\n                                            ref: getTypeKey(p),\n                                            name: p.name,\n                                        }))\n                                    })),  \n                                    events: viewNode.getViewBindEvents().map(bindEvent => ({\n                                        element: bindEvent.parentNode.name,\n                                        event: bindEvent.name,\n                                    }))\n                                });\n                                viewNode.children.forEach(c => {\n                                    iterate(c, `${lastName}/${c.name}`);\n                                })\n                            }\n                            iterate(v, `${f.name}/${v.name}`);\n                            return viewNames;\n                        }).reduce((accu, curr) => accu.concat(curr), [])).flat())\n                ]).then(([entities, logics, structures, views]) => {\n                    console.log(JSON.stringify({ entities, logics, structures, views }, null, '\\t'));\n                })\n                                    \n            ")]),t._v(" "),n("button",{attrs:{value:"cancel"}},[t._v("close")])])}],!1,null,null,null);const pc=fc.exports;js.config.productionTip=!1,js.use(Fa,{customGroups:{CustomGroup:class extends Sa{getIntersectionsInFourDimension(){let t=this.anchor;this._belongs&&this._belongs.calculateToCoordination&&(t=this._belongs.calculateToCoordination(t));const[e,n]=t,i=this.width/2;return this.height,{0:[e+i,n],2:[e-i,n]}}}}}),new js({render:t=>t(pc)}).$mount("#app")})()})();